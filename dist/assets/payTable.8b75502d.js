var S=(e,C,c)=>new Promise((A,E)=>{var D=t=>{try{m(c.next(t))}catch(r){E(r)}},_=t=>{try{m(c.throw(t))}catch(r){E(r)}},m=t=>t.done?A(t.value):Promise.resolve(t.value).then(D,_);m((c=c.apply(e,C)).next())});import{aE as L,a as P,cv as W,e as j,x as Q,bq as H,w as K,i as J,h as V,aG as u,o as n,j as y,q as i,B as p,l as g,n as f,F as G,C as l,t as h,k as F,G as X}from"./index.314cb164.js";import{B as Y,T as Z,u as ee}from"./useTable.cfcdff09.js";import{T as oe,y as te,x as ae}from"./useForm.15613cdc.js";import{g as ue,b as ne,s as se,o as ie,U as le,D as re}from"./data.69a8939a.js";import{T as de}from"./index.0919dd1a.js";import{A as pe}from"./index.d3f6dfd6.js";import{S as ce}from"./index.30d3c472.js";import"./index.d86be4eb.js";import{U as me,u as ge}from"./UploadModal.a798128b.js";import{u as $}from"./index.c6f2c71e.js";import fe from"./Echat.6cf211bc.js";import{Q as Ce}from"./index.8cd7b758.js";import{o as be}from"./index.eec5bd2f.js";import{R as he,C as Ee}from"./index.eae0d10d.js";import"./index.b5d67dff.js";import"./index.cfb0c6f2.js";import"./index.0ad176d2.js";import"./useWindowSizeFn.871352f3.js";import"./useContentViewHeight.233b7170.js";import"./ArrowLeftOutlined.47bc42ec.js";import"./transButton.e721f95b.js";import"./index.f71492b4.js";import"./get.96830a59.js";import"./index.f3ab6787.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.4270a312.js";import"./FullscreenOutlined.be23287c.js";import"./eagerComputed.40a2d445.js";import"./scrollTo.c572d0a0.js";import"./index.23e675cf.js";import"./index.05a83db7.js";import"./_baseIteratee.fd1a2cd7.js";import"./useSize.7ea8df22.js";import"./index.f58a858b.js";import"./useRefs.57282ad5.js";import"./download.79fb128a.js";import"./index.1194be5e.js";import"./uniqBy.8ff2060d.js";import"./useECharts.983f2e5c.js";import"./Echarts.49879135.js";const _e=P({components:{BasicTable:Y,TableAction:oe,TableImg:Z,Avatar:pe,BasicUpload:te,Switch:ce,Tag:de,UploadModal:me,Echat:fe,QrCode:Ce,Modal:W,Alert:ae,Row:he,Col:Ee},setup(){const{t:e}=j(),C=Q({}),{currentRoute:c}=H(),{createConfirm:A,createInfoModal:E}=X(),[D,{openModal:_}]=$(),[m,{openModal:t}]=$(),r=K(!1),s=Q({type:"qr",total:0,url:"",secondsToGo:180}),[I,{reload:B,updateTableDataRecord:v}]=ee({title:c.value.meta.title||"\u6807\u9898\u9519\u8BEF",api:ue,rowKey:"id",columns:ne,formConfig:{labelWidth:120,schemas:se,autoSubmitOnEnter:!0},useSearchForm:!1,showIndexColumn:!1,showTableSetting:!1,bordered:!0,ellipsis:!1,handleSearchInfoFn(o){return o},actionColumn:{width:80,title:"\u64CD\u4F5C",dataIndex:"action"}});function T(o){t(!0,{record:o})}const k=J(),U=V(()=>{var o;return((o=k.getBaseOption.base)==null?void 0:o.qqtwo)||""}),x=V(()=>{var o;return((o=k.getBaseOption.base)==null?void 0:o.groupQrcode)||""});let a="";function d(o){return S(this,null,function*(){if(o.bing_type)return;r.value=!0;let b=yield ie({id:o.id});o.text?(s.type="qr",s.url=o.text):(s.type="img",s.url=o.url),s.secondsToGo=b.time,s.total=b.total,a=setInterval(()=>{s.secondsToGo-=1,s.secondsToGo<1&&clearInterval(a)},1e3)})}be("OPEN_QRCODE",o=>{E({title:o.data.msg,content:o.data.info}),B(),r.value=!1});function q(o){clearInterval(a)}function w(o){_(!0,{record:o})}function N(o){B()}function O(Ao){return S(this,arguments,function*({record:o,index:b,key:R,value:M}){yield le({id:o.id,[R]:M})})}function z(o){A({iconType:"warning",title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onOk:function(){let b={id:o.id};re(b).then(()=>{B()})},onCancel:function(){}})}return{t:e,registerTable:I,searchInfo:C,uploadApi:ge,handleChange:N,beforeEditSubmit:O,handleDelete:z,registerView:D,registerView1:m,handleUpload:w,handleEchat:T,handleBind:d,qrCodeUrl:s,visible:r,modalCancel:q,kefu:U,groupQrcode:x}}}),Be=l("89/2"),ye=l("89/2"),Fe={key:0,style:{"text-align":"center",margin:"4px auto","font-size":"16px"}},Ae={style:{"font-size":"13px"}},De=["src"],ve=["src"],Te=l(" \u8BF7\u4ED8\u6B3E "),ke={style:{color:"red"}},we=l(" \u5143 "),Ie=l(" (\u8BF7\u5728 "),Ue={style:{color:"red"}},xe=l(" \u79D2\u5185\u5B8C\u6210,\u8D85\u65F6\u540E\u4ED8\u6B3E\u65E0\u6548) ");function Se(e,C,c,A,E,D){const _=u("BasicUpload"),m=u("TableImg"),t=u("Tag"),r=u("TableAction"),s=u("BasicTable"),I=u("UploadModal"),B=u("Echat"),v=u("Alert"),T=u("Col"),k=u("QrCode"),U=u("Row"),x=u("Modal");return n(),y("div",null,[i(s,{onRegister:e.registerTable,searchInfo:e.searchInfo,beforeEditSubmit:e.beforeEditSubmit},{tableTitle:p(()=>[i(_,{maxSize:20,maxNumber:10,uploadParams:{pid:"wechatQr",isWechat:1},onChange:e.handleChange,api:e.uploadApi,emptyHidePreview:!0,class:"my-5",accept:["image/*"]},null,8,["onChange","api"])]),bodyCell:p(({column:a,record:d,text:q})=>[a.dataIndex=="url"?(n(),g(m,{key:0,size:35,simpleShow:!0,imgList:[d.url]},null,8,["imgList"])):f("",!0),a.dataIndex=="today"?(n(),y(G,{key:1},[Be],64)):f("",!0),a.dataIndex=="exception"?(n(),y(G,{key:2},[ye],64)):f("",!0),a.dataIndex=="fixedCode"?(n(),g(t,{key:3,color:"blue",onClick:w=>e.handleUpload(d),style:{cursor:"pointer"}},{default:p(()=>[l(h(e.t("lang.\u4E0A\u4F20\u56FA\u7801","\u4E0A\u4F20\u56FA\u7801")),1)]),_:2},1032,["onClick"])):f("",!0),a.dataIndex=="count"?(n(),g(t,{key:4,color:"blue",onClick:w=>e.handleEchat(d),style:{cursor:"pointer"}},{default:p(()=>[l(h(e.t("lang.\u6536\u6B3E\u660E\u7EC6","\u6536\u6B3E\u660E\u7EC6")),1)]),_:2},1032,["onClick"])):f("",!0),a.dataIndex=="bing_type"?(n(),g(t,{key:5,color:d.bing_type?"blue":"orange",onClick:w=>e.handleBind(d),style:{cursor:"pointer"}},{default:p(()=>[l(h(d.bing_type?"\u5DF2\u7ED1\u5B9A":"\u672A\u7ED1\u5B9A\u5E97\u5458"),1)]),_:2},1032,["color","onClick"])):f("",!0),a.dataIndex==="action"?(n(),g(r,{key:6,actions:[{icon:"ant-design:delete-outlined",color:"error",label:e.t("lang.\u5220\u9664","\u5220\u9664"),tooltip:"\u5220\u9664\u6B64\u4FE1\u606F",onClick:e.handleDelete.bind(null,d)}]},null,8,["actions"])):f("",!0)]),_:1},8,["onRegister","searchInfo","beforeEditSubmit"]),i(I,{onRegister:e.registerView},null,8,["onRegister"]),i(B,{onRegister:e.registerView1},null,8,["onRegister"]),i(x,{visible:e.visible,"onUpdate:visible":C[0]||(C[0]=a=>e.visible=a),title:"\u7ED1\u5B9A\u9A8C\u8BC1",onCancel:e.modalCancel,footer:null},{default:p(()=>[e.qrCodeUrl.secondsToGo>1?(n(),y("div",Fe,[i(U,null,{default:p(()=>[i(T,{xs:24,sm:24,md:12},{default:p(()=>[i(v,{message:"\u7B2C\u4E00\u6B65:\u6DFB\u52A0\u5E97\u5458",type:"warning",style:{"text-align":"left",margin:"10px"}}),F("p",Ae,[l(" \u8054\u7CFB\u5BA2\u670D:"+h(e.kefu)+",\u53D1\u9001\u5E97\u5458\u7801\uFF0C \u6216\u8005\u626B\u7801\u8FDB\u7FA4,\u53D1\u9001\u5E97\u5458\u7801 ",1),F("img",{src:e.groupQrcode,style:{margin:"4px auto","max-width":"200px"}},null,8,De)])]),_:1}),i(T,{xs:24,sm:24,md:12},{default:p(()=>[i(v,{message:"\u7B2C\u4E8C\u6B65:\u5FAE\u4FE1\u626B\u7801\u652F\u4ED8\u4EE5\u4E0B\u91D1\u989D",type:"success",style:{"text-align":"left",margin:"10px"}}),e.qrCodeUrl.type=="qr"?(n(),g(k,{key:0,value:e.qrCodeUrl.url,tag:"canvas"},null,8,["value"])):(n(),y("img",{key:1,src:e.qrCodeUrl.url,style:{margin:"4px auto","max-width":"200px"}},null,8,ve)),F("h2",null,[Te,F("span",ke,h(e.qrCodeUrl.total),1),we])]),_:1})]),_:1}),Ie,F("span",Ue,"\u3010"+h(e.qrCodeUrl.secondsToGo)+"\u3011",1),xe])):(n(),g(v,{key:1,message:"\u5F00\u542F\u5931\u8D25|\u672A\u4ED8\u6B3E/\u672A\u7ED1\u5B9A\u5E97\u5458",description:`\u5982\u679C\u60A8\u5DF2\u7ECF\u4ED8\u6B3E,\u4F46\u662F\u672A\u5F00\u542F,\u8BF7\u8054\u7CFB\u5BA2\u670D\u5148\u7ED1\u5B9A\u5E97\u5458,\u8054\u7CFB\u5BA2\u670D:${e.kefu}`,type:"error"},null,8,["description"]))]),_:1},8,["visible","onCancel"])])}var yo=L(_e,[["render",Se],["__scopeId","data-v-be5830be"]]);export{yo as default};
