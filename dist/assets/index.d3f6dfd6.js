import{a as G,w as _,W as H,h as V,cK as X,a4 as D,az as J,N as R,Q as N,O as Y,bb as $,S as l,q as c,_ as B,cm as Z,T as y,U as aa,a0 as ta,co as ea,bB as ra}from"./index.314cb164.js";import{u as na,a as ia}from"./useSize.7ea8df22.js";import{e as oa}from"./eagerComputed.40a2d445.js";var la=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:aa.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},sa=G({name:"AAvatar",inheritAttrs:!1,props:la(),slots:["icon"],setup:function(a,b){var S=b.slots,i=b.attrs,d=_(!0),m=_(!1),h=_(1),o=_(null),x=_(null),w=H("avatar",a),p=w.prefixCls,A=na(),n=V(function(){return a.size==="default"?A.value:a.size}),T=X(),u=oa(function(){if(D(a.size)==="object"){var t=J.find(function(r){return T.value[r]}),e=a.size[t];return e}}),O=function(e){return u.value?{width:"".concat(u.value,"px"),height:"".concat(u.value,"px"),lineHeight:"".concat(u.value,"px"),fontSize:"".concat(e?u.value/2:18,"px")}:{}},v=function(){if(!(!o.value||!x.value)){var e=o.value.offsetWidth,r=x.value.offsetWidth;if(e!==0&&r!==0){var s=a.gap,P=s===void 0?4:s;P*2<r&&(h.value=r-P*2<e?(r-P*2)/e:1)}}},z=function(){var e=a.loadError,r=e==null?void 0:e();r!==!1&&(d.value=!1)};return R(function(){return a.src},function(){N(function(){d.value=!0,h.value=1})}),R(function(){return a.gap},function(){N(function(){v()})}),Y(function(){N(function(){v(),m.value=!0})}),function(){var t,e,r=a.shape,s=a.src,P=a.alt,q=a.srcset,F=a.draggable,L=a.crossOrigin,C=$(S,a,"icon"),f=p.value,M=(t={},l(t,"".concat(i.class),!!i.class),l(t,f,!0),l(t,"".concat(f,"-lg"),n.value==="large"),l(t,"".concat(f,"-sm"),n.value==="small"),l(t,"".concat(f,"-").concat(r),r),l(t,"".concat(f,"-image"),s&&d.value),l(t,"".concat(f,"-icon"),C),t),K=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:C?"".concat(n.value/2,"px"):"18px"}:{},W=(e=S.default)===null||e===void 0?void 0:e.call(S),k;if(s&&d.value)k=c("img",{draggable:F,src:s,srcset:q,onError:z,alt:P,crossorigin:L},null);else if(C)k=C;else if(m.value||h.value!==1){var E="scale(".concat(h.value,") translateX(-50%)"),Q={msTransform:E,WebkitTransform:E,transform:E},U=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};k=c(Z,{onResize:v},{default:function(){return[c("span",{class:"".concat(f,"-string"),ref:o,style:B(B({},U),Q)},[W])]}})}else k=c("span",{class:"".concat(f,"-string"),ref:o,style:{opacity:0}},[W]);return c("span",y(y({},i),{},{ref:x,class:M,style:[K,O(!!C),i.style]}),[k])}}}),j=sa,ca=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},ua=G({name:"AAvatarGroup",inheritAttrs:!1,props:ca(),setup:function(a,b){var S=b.slots,i=b.attrs,d=H("avatar-group",a),m=d.prefixCls,h=d.direction;return ia(a),function(){var o,x=a.maxPopoverPlacement,w=x===void 0?"top":x,p=a.maxCount,A=a.maxStyle,n=a.maxPopoverTrigger,T=n===void 0?"hover":n,u=(o={},l(o,m.value,!0),l(o,"".concat(m.value,"-rtl"),h.value==="rtl"),l(o,"".concat(i.class),!!i.class),o),O=$(S,a),v=ta(O).map(function(r,s){return ea(r,{key:"avatar-key-".concat(s)})}),z=v.length;if(p&&p<z){var t=v.slice(0,p),e=v.slice(p,z);return t.push(c(ra,{key:"avatar-popover-key",content:e,trigger:T,placement:w,overlayClassName:"".concat(m.value,"-popover")},{default:function(){return[c(j,{style:A},{default:function(){return["+".concat(z-p)]}})]}})),c("div",y(y({},i),{},{class:u,style:i.style}),[t])}return c("div",y(y({},i),{},{class:u,style:i.style}),[v])}}}),I=ua;j.Group=I;j.install=function(g){return g.component(j.name,j),g.component(I.name,I),g};export{j as A};
