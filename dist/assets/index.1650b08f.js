var C=(h,m,t)=>new Promise((e,l)=>{var f=r=>{try{i(t.next(r))}catch(a){l(a)}},d=r=>{try{i(t.throw(r))}catch(a){l(a)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(f,d);i((t=t.apply(h,m)).next())});import{cu as x,a as T,w as k,e as D,cU as A,N as B,Q as R,an as V,aG as I,o as u,j as _,F as N,aJ as S,y as j,z as M,q as s,m as o,B as n,C as y,t as b,l as F,n as $}from"./index.314cb164.js";import q from"./DetailModal.2c812ac9.js";import{u as z,B as G}from"./useTable.cfcdff09.js";import{T as H}from"./useForm.15613cdc.js";import{u as J}from"./index.c6f2c71e.js";import{getColumns as Q}from"./data.d2e714ed.js";import"./index.f3fb02cd.js";import"./get.96830a59.js";import"./index.b5d67dff.js";import"./index.cfb0c6f2.js";import"./index.0ad176d2.js";import"./index.d3f6dfd6.js";import"./useSize.7ea8df22.js";import"./eagerComputed.40a2d445.js";import"./useWindowSizeFn.871352f3.js";import"./useContentViewHeight.233b7170.js";import"./ArrowLeftOutlined.47bc42ec.js";import"./transButton.e721f95b.js";import"./index.f71492b4.js";import"./index.30d3c472.js";import"./index.0919dd1a.js";import"./index.f3ab6787.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.4270a312.js";import"./FullscreenOutlined.be23287c.js";import"./scrollTo.c572d0a0.js";import"./index.23e675cf.js";import"./index.05a83db7.js";import"./index.d86be4eb.js";import"./_baseIteratee.fd1a2cd7.js";import"./index.f58a858b.js";import"./useRefs.57282ad5.js";import"./download.79fb128a.js";import"./index.1194be5e.js";import"./index.eae0d10d.js";import"./uniqBy.8ff2060d.js";const U=()=>x.get({url:"/error"}),K={class:"p-4"},O=["src"],Ir=T({__name:"index",setup(h){const m=k(),t=k([]),{t:e}=D(),l=A(),[f,{setTableData:d}]=z({title:e("sys.errorLog.tableTitle"),columns:Q(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[i,{openModal:r}]=J();B(()=>l.getErrorLogInfoList,p=>{R(()=>{d(V(p))})},{immediate:!0});function a(p){m.value=p,r(!0)}function w(){throw new Error("fire vue error!")}function E(){t.value.push(`${new Date().getTime()}.png`)}function L(){return C(this,null,function*(){yield U()})}return(p,P)=>{const g=I("a-button");return u(),_("div",K,[(u(!0),_(N,null,S(t.value,c=>j((u(),_("img",{key:c,src:c,alt:""},null,8,O)),[[M,!1]])),128)),s(q,{info:m.value,onRegister:o(i)},null,8,["info","onRegister"]),s(o(G),{onRegister:o(f),class:"error-handle-table"},{toolbar:n(()=>[s(g,{onClick:w,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireVueError")),1)]),_:1}),s(g,{onClick:E,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireResourceError")),1)]),_:1}),s(g,{onClick:L,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireAjaxError")),1)]),_:1})]),bodyCell:n(({column:c,record:v})=>[c.key==="action"?(u(),F(o(H),{key:0,actions:[{label:o(e)("sys.errorLog.tableActionDesc"),onClick:a.bind(null,v)}]},null,8,["actions"])):$("",!0)]),_:1},8,["onRegister"])])}}});export{Ir as default};
