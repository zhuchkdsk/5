var g=(e,s,t)=>new Promise((c,i)=>{var m=o=>{try{n(t.next(o))}catch(l){i(l)}},r=o=>{try{n(t.throw(o))}catch(l){i(l)}},n=o=>o.done?c(o.value):Promise.resolve(o.value).then(m,r);n((t=t.apply(e,s)).next())});import{B as M,b as I}from"./index.c6f2c71e.js";import{T as y,y as E}from"./useForm.15613cdc.js";import{b as P,cu as A,aE as U,a as k,x as S,bq as D,aG as u,o as h,l as C,B,q as w,n as F,aH as R,G as v}from"./index.314cb164.js";import{g as $,c as O,s as x,D as z,U as H}from"./data.69a8939a.js";import{B as G,T as L,u as N}from"./useTable.cfcdff09.js";const{uploadUrl:j=""}=P();function q(e,s){return A.uploadFile({url:j,onUploadProgress:s},e)}const Q=k({components:{BasicTable:G,TableAction:y,TableImg:L,BasicModal:M,BasicUpload:E},setup(){const e=S({pid:"wechatQr",nid:0,isFixedQrcode:1,isWechat:1}),s=S({});D();const{createConfirm:t}=v(),[c,{setModalProps:i,closeModal:m,redoModalHeight:r}]=I(a=>g(this,null,function*(){e.nid=a.record.id,i({showOkBtn:!1}),o(),r()})),[n,{reload:o,updateTableDataRecord:l}]=N({api:$,rowKey:"id",columns:O,formConfig:{labelWidth:120,schemas:x,autoSubmitOnEnter:!0},useSearchForm:!1,showIndexColumn:!1,showTableSetting:!1,isCanResizeParent:!0,bordered:!0,handleSearchInfoFn(a){return a},beforeFetch(a){return a.nid=e.nid,a},actionColumn:{width:80,title:"\u64CD\u4F5C",dataIndex:"action"}});function b(a){o()}function d(a){t({iconType:"warning",title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onOk:function(){let f={id:a.id};z(f).then(()=>{o()})},onCancel:function(){}})}function p(te){return g(this,arguments,function*({record:a,index:f,key:T,value:_}){yield H({id:a.id,[T]:_})})}return{registerTable:n,searchInfo:s,handleDelete:d,beforeEditSubmit:p,registerModal:c,uploadApi:q,handleChange:b,uploadParams:e}}});function V(e,s,t,c,i,m){const r=u("BasicUpload"),n=u("TableImg"),o=u("TableAction"),l=u("BasicTable"),b=u("BasicModal");return h(),C(b,R(e.$attrs,{title:"\u4E0A\u4F20\u56FA\u7801",onRegister:e.registerModal}),{default:B(()=>[w(l,{onRegister:e.registerTable,searchInfo:e.searchInfo,beforeEditSubmit:e.beforeEditSubmit},{toolbar:B(()=>[w(r,{maxSize:20,maxNumber:10,onChange:e.handleChange,api:e.uploadApi,emptyHidePreview:!0,showPreview:!1,uploadParams:e.uploadParams,class:"uploadclass",accept:["image/*"]},null,8,["onChange","api","uploadParams"])]),bodyCell:B(({column:d,record:p,text:a})=>[d.dataIndex=="url"?(h(),C(n,{key:0,size:35,simpleShow:!0,imgList:[p.url]},null,8,["imgList"])):F("",!0),d.key==="action"?(h(),C(o,{key:1,actions:[{icon:"ant-design:delete-outlined",color:"error",label:"\u5220\u9664",tooltip:"\u5220\u9664\u6B64\u4FE1\u606F",onClick:e.handleDelete.bind(null,p)}]},null,8,["actions"])):F("",!0)]),_:1},8,["onRegister","searchInfo","beforeEditSubmit"])]),_:1},16,["onRegister"])}var W=U(Q,[["render",V]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as U,ae as a,q as u};
