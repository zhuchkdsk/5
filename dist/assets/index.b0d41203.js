var _o=Object.defineProperty,So=Object.defineProperties;var Co=Object.getOwnPropertyDescriptors;var Dn=Object.getOwnPropertySymbols;var To=Object.prototype.hasOwnProperty,Lo=Object.prototype.propertyIsEnumerable;var On=(me,ge,pe)=>ge in me?_o(me,ge,{enumerable:!0,configurable:!0,writable:!0,value:pe}):me[ge]=pe,Ye=(me,ge)=>{for(var pe in ge||(ge={}))To.call(ge,pe)&&On(me,pe,ge[pe]);if(Dn)for(var pe of Dn(ge))Lo.call(ge,pe)&&On(me,pe,ge[pe]);return me},jn=(me,ge)=>So(me,Co(ge));var In=(me,ge,pe)=>new Promise((_e,U)=>{var Te=f=>{try{_(pe.next(f))}catch(c){U(c)}},O=f=>{try{_(pe.throw(f))}catch(c){U(c)}},_=f=>f.done?_e(f.value):Promise.resolve(f.value).then(Te,O);_((pe=pe.apply(me,ge)).next())});import{cu as Ao,dK as Bn,eG as qn,a as Wt,w as Ke,bX as Mo,bP as zn,N as _t,h as Ho,m as lt,Z as Vn,eH as Un,aE as Gn,Q as No,o as St,j as Wn,s as Fn,aN as Kn,K as Do,O as Oo,aG as Ut,c1 as jo,l as Rn,B as Pn,y as Io,q as Ro}from"./index.314cb164.js";import{o as Xn,P as Po}from"./index.cfb0c6f2.js";import{C as Bo}from"./index.bac827c9.js";import"./index.c1f39743.js";import"./index.d86be4eb.js";import{a as qo}from"./index.c6f2c71e.js";import"./index.0ad176d2.js";import"./index.d3f6dfd6.js";import"./useSize.7ea8df22.js";import"./eagerComputed.40a2d445.js";import"./useWindowSizeFn.871352f3.js";import"./useContentViewHeight.233b7170.js";import"./ArrowLeftOutlined.47bc42ec.js";import"./transButton.e721f95b.js";import"./index.eae0d10d.js";import"./useRefs.57282ad5.js";import"./FullscreenOutlined.be23287c.js";const zo=me=>Ao.post({url:"/MarkDown/index",params:me});var Jn={exports:{}};(function(me,ge){(function(pe,_e){me.exports=_e()})(Bn,function(){return(()=>{var pe={760:O=>{var _=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},f=-1;_.Diff=function(c,p){return[c,p]},_.prototype.diff_main=function(c,p,d,m){m===void 0&&(m=this.Diff_Timeout<=0?Number.MAX_VALUE:new Date().getTime()+1e3*this.Diff_Timeout);var l=m;if(c==null||p==null)throw new Error("Null input. (diff_main)");if(c==p)return c?[new _.Diff(0,c)]:[];d===void 0&&(d=!0);var s=d,u=this.diff_commonPrefix(c,p),g=c.substring(0,u);c=c.substring(u),p=p.substring(u),u=this.diff_commonSuffix(c,p);var b=c.substring(c.length-u);c=c.substring(0,c.length-u),p=p.substring(0,p.length-u);var C=this.diff_compute_(c,p,s,l);return g&&C.unshift(new _.Diff(0,g)),b&&C.push(new _.Diff(0,b)),this.diff_cleanupMerge(C),C},_.prototype.diff_compute_=function(c,p,d,m){var l;if(!c)return[new _.Diff(1,p)];if(!p)return[new _.Diff(f,c)];var s=c.length>p.length?c:p,u=c.length>p.length?p:c,g=s.indexOf(u);if(g!=-1)return l=[new _.Diff(1,s.substring(0,g)),new _.Diff(0,u),new _.Diff(1,s.substring(g+u.length))],c.length>p.length&&(l[0][0]=l[2][0]=f),l;if(u.length==1)return[new _.Diff(f,c),new _.Diff(1,p)];var b=this.diff_halfMatch_(c,p);if(b){var C=b[0],T=b[1],k=b[2],x=b[3],v=b[4],N=this.diff_main(C,k,d,m),P=this.diff_main(T,x,d,m);return N.concat([new _.Diff(0,v)],P)}return d&&c.length>100&&p.length>100?this.diff_lineMode_(c,p,m):this.diff_bisect_(c,p,m)},_.prototype.diff_lineMode_=function(c,p,d){var m=this.diff_linesToChars_(c,p);c=m.chars1,p=m.chars2;var l=m.lineArray,s=this.diff_main(c,p,!1,d);this.diff_charsToLines_(s,l),this.diff_cleanupSemantic(s),s.push(new _.Diff(0,""));for(var u=0,g=0,b=0,C="",T="";u<s.length;){switch(s[u][0]){case 1:b++,T+=s[u][1];break;case f:g++,C+=s[u][1];break;case 0:if(g>=1&&b>=1){s.splice(u-g-b,g+b),u=u-g-b;for(var k=this.diff_main(C,T,!1,d),x=k.length-1;x>=0;x--)s.splice(u,0,k[x]);u+=k.length}b=0,g=0,C="",T=""}u++}return s.pop(),s},_.prototype.diff_bisect_=function(c,p,d){for(var m=c.length,l=p.length,s=Math.ceil((m+l)/2),u=s,g=2*s,b=new Array(g),C=new Array(g),T=0;T<g;T++)b[T]=-1,C[T]=-1;b[u+1]=0,C[u+1]=0;for(var k=m-l,x=k%2!=0,v=0,N=0,P=0,J=0,$=0;$<s&&!(new Date().getTime()>d);$++){for(var ie=-$+v;ie<=$-N;ie+=2){for(var de=u+ie,we=(Ne=ie==-$||ie!=$&&b[de-1]<b[de+1]?b[de+1]:b[de-1]+1)-ie;Ne<m&&we<l&&c.charAt(Ne)==p.charAt(we);)Ne++,we++;if(b[de]=Ne,Ne>m)N+=2;else if(we>l)v+=2;else if(x&&(ke=u+k-ie)>=0&&ke<g&&C[ke]!=-1&&Ne>=(ve=m-C[ke]))return this.diff_bisectSplit_(c,p,Ne,we,d)}for(var fe=-$+P;fe<=$-J;fe+=2){for(var ve,ke=u+fe,He=(ve=fe==-$||fe!=$&&C[ke-1]<C[ke+1]?C[ke+1]:C[ke-1]+1)-fe;ve<m&&He<l&&c.charAt(m-ve-1)==p.charAt(l-He-1);)ve++,He++;if(C[ke]=ve,ve>m)J+=2;else if(He>l)P+=2;else if(!x&&(de=u+k-fe)>=0&&de<g&&b[de]!=-1){var Ne;if(we=u+(Ne=b[de])-de,Ne>=(ve=m-ve))return this.diff_bisectSplit_(c,p,Ne,we,d)}}}return[new _.Diff(f,c),new _.Diff(1,p)]},_.prototype.diff_bisectSplit_=function(c,p,d,m,l){var s=c.substring(0,d),u=p.substring(0,m),g=c.substring(d),b=p.substring(m),C=this.diff_main(s,u,!1,l),T=this.diff_main(g,b,!1,l);return C.concat(T)},_.prototype.diff_linesToChars_=function(c,p){var d=[],m={};function l(g){for(var b="",C=0,T=-1,k=d.length;T<g.length-1;){(T=g.indexOf(`
`,C))==-1&&(T=g.length-1);var x=g.substring(C,T+1);(m.hasOwnProperty?m.hasOwnProperty(x):m[x]!==void 0)?b+=String.fromCharCode(m[x]):(k==s&&(x=g.substring(C),T=g.length),b+=String.fromCharCode(k),m[x]=k,d[k++]=x),C=T+1}return b}d[0]="";var s=4e4,u=l(c);return s=65535,{chars1:u,chars2:l(p),lineArray:d}},_.prototype.diff_charsToLines_=function(c,p){for(var d=0;d<c.length;d++){for(var m=c[d][1],l=[],s=0;s<m.length;s++)l[s]=p[m.charCodeAt(s)];c[d][1]=l.join("")}},_.prototype.diff_commonPrefix=function(c,p){if(!c||!p||c.charAt(0)!=p.charAt(0))return 0;for(var d=0,m=Math.min(c.length,p.length),l=m,s=0;d<l;)c.substring(s,l)==p.substring(s,l)?s=d=l:m=l,l=Math.floor((m-d)/2+d);return l},_.prototype.diff_commonSuffix=function(c,p){if(!c||!p||c.charAt(c.length-1)!=p.charAt(p.length-1))return 0;for(var d=0,m=Math.min(c.length,p.length),l=m,s=0;d<l;)c.substring(c.length-l,c.length-s)==p.substring(p.length-l,p.length-s)?s=d=l:m=l,l=Math.floor((m-d)/2+d);return l},_.prototype.diff_commonOverlap_=function(c,p){var d=c.length,m=p.length;if(d==0||m==0)return 0;d>m?c=c.substring(d-m):d<m&&(p=p.substring(0,d));var l=Math.min(d,m);if(c==p)return l;for(var s=0,u=1;;){var g=c.substring(l-u),b=p.indexOf(g);if(b==-1)return s;u+=b,b!=0&&c.substring(l-u)!=p.substring(0,u)||(s=u,u++)}},_.prototype.diff_halfMatch_=function(c,p){if(this.Diff_Timeout<=0)return null;var d=c.length>p.length?c:p,m=c.length>p.length?p:c;if(d.length<4||2*m.length<d.length)return null;var l=this;function s(v,N,P){for(var J,$,ie,de,we=v.substring(P,P+Math.floor(v.length/4)),fe=-1,ve="";(fe=N.indexOf(we,fe+1))!=-1;){var ke=l.diff_commonPrefix(v.substring(P),N.substring(fe)),He=l.diff_commonSuffix(v.substring(0,P),N.substring(0,fe));ve.length<He+ke&&(ve=N.substring(fe-He,fe)+N.substring(fe,fe+ke),J=v.substring(0,P-He),$=v.substring(P+ke),ie=N.substring(0,fe-He),de=N.substring(fe+ke))}return 2*ve.length>=v.length?[J,$,ie,de,ve]:null}var u,g,b,C,T,k=s(d,m,Math.ceil(d.length/4)),x=s(d,m,Math.ceil(d.length/2));return k||x?(u=x?k&&k[4].length>x[4].length?k:x:k,c.length>p.length?(g=u[0],b=u[1],C=u[2],T=u[3]):(C=u[0],T=u[1],g=u[2],b=u[3]),[g,b,C,T,u[4]]):null},_.prototype.diff_cleanupSemantic=function(c){for(var p=!1,d=[],m=0,l=null,s=0,u=0,g=0,b=0,C=0;s<c.length;)c[s][0]==0?(d[m++]=s,u=b,g=C,b=0,C=0,l=c[s][1]):(c[s][0]==1?b+=c[s][1].length:C+=c[s][1].length,l&&l.length<=Math.max(u,g)&&l.length<=Math.max(b,C)&&(c.splice(d[m-1],0,new _.Diff(f,l)),c[d[m-1]+1][0]=1,m--,s=--m>0?d[m-1]:-1,u=0,g=0,b=0,C=0,l=null,p=!0)),s++;for(p&&this.diff_cleanupMerge(c),this.diff_cleanupSemanticLossless(c),s=1;s<c.length;){if(c[s-1][0]==f&&c[s][0]==1){var T=c[s-1][1],k=c[s][1],x=this.diff_commonOverlap_(T,k),v=this.diff_commonOverlap_(k,T);x>=v?(x>=T.length/2||x>=k.length/2)&&(c.splice(s,0,new _.Diff(0,k.substring(0,x))),c[s-1][1]=T.substring(0,T.length-x),c[s+1][1]=k.substring(x),s++):(v>=T.length/2||v>=k.length/2)&&(c.splice(s,0,new _.Diff(0,T.substring(0,v))),c[s-1][0]=1,c[s-1][1]=k.substring(0,k.length-v),c[s+1][0]=f,c[s+1][1]=T.substring(v),s++),s++}s++}},_.prototype.diff_cleanupSemanticLossless=function(c){function p(v,N){if(!v||!N)return 6;var P=v.charAt(v.length-1),J=N.charAt(0),$=P.match(_.nonAlphaNumericRegex_),ie=J.match(_.nonAlphaNumericRegex_),de=$&&P.match(_.whitespaceRegex_),we=ie&&J.match(_.whitespaceRegex_),fe=de&&P.match(_.linebreakRegex_),ve=we&&J.match(_.linebreakRegex_),ke=fe&&v.match(_.blanklineEndRegex_),He=ve&&N.match(_.blanklineStartRegex_);return ke||He?5:fe||ve?4:$&&!de&&we?3:de||we?2:$||ie?1:0}for(var d=1;d<c.length-1;){if(c[d-1][0]==0&&c[d+1][0]==0){var m=c[d-1][1],l=c[d][1],s=c[d+1][1],u=this.diff_commonSuffix(m,l);if(u){var g=l.substring(l.length-u);m=m.substring(0,m.length-u),l=g+l.substring(0,l.length-u),s=g+s}for(var b=m,C=l,T=s,k=p(m,l)+p(l,s);l.charAt(0)===s.charAt(0);){m+=l.charAt(0),l=l.substring(1)+s.charAt(0),s=s.substring(1);var x=p(m,l)+p(l,s);x>=k&&(k=x,b=m,C=l,T=s)}c[d-1][1]!=b&&(b?c[d-1][1]=b:(c.splice(d-1,1),d--),c[d][1]=C,T?c[d+1][1]=T:(c.splice(d+1,1),d--))}d++}},_.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,_.whitespaceRegex_=/\s/,_.linebreakRegex_=/[\r\n]/,_.blanklineEndRegex_=/\n\r?\n$/,_.blanklineStartRegex_=/^\r?\n\r?\n/,_.prototype.diff_cleanupEfficiency=function(c){for(var p=!1,d=[],m=0,l=null,s=0,u=!1,g=!1,b=!1,C=!1;s<c.length;)c[s][0]==0?(c[s][1].length<this.Diff_EditCost&&(b||C)?(d[m++]=s,u=b,g=C,l=c[s][1]):(m=0,l=null),b=C=!1):(c[s][0]==f?C=!0:b=!0,l&&(u&&g&&b&&C||l.length<this.Diff_EditCost/2&&u+g+b+C==3)&&(c.splice(d[m-1],0,new _.Diff(f,l)),c[d[m-1]+1][0]=1,m--,l=null,u&&g?(b=C=!0,m=0):(s=--m>0?d[m-1]:-1,b=C=!1),p=!0)),s++;p&&this.diff_cleanupMerge(c)},_.prototype.diff_cleanupMerge=function(c){c.push(new _.Diff(0,""));for(var p,d=0,m=0,l=0,s="",u="";d<c.length;)switch(c[d][0]){case 1:l++,u+=c[d][1],d++;break;case f:m++,s+=c[d][1],d++;break;case 0:m+l>1?(m!==0&&l!==0&&((p=this.diff_commonPrefix(u,s))!==0&&(d-m-l>0&&c[d-m-l-1][0]==0?c[d-m-l-1][1]+=u.substring(0,p):(c.splice(0,0,new _.Diff(0,u.substring(0,p))),d++),u=u.substring(p),s=s.substring(p)),(p=this.diff_commonSuffix(u,s))!==0&&(c[d][1]=u.substring(u.length-p)+c[d][1],u=u.substring(0,u.length-p),s=s.substring(0,s.length-p))),d-=m+l,c.splice(d,m+l),s.length&&(c.splice(d,0,new _.Diff(f,s)),d++),u.length&&(c.splice(d,0,new _.Diff(1,u)),d++),d++):d!==0&&c[d-1][0]==0?(c[d-1][1]+=c[d][1],c.splice(d,1)):d++,l=0,m=0,s="",u=""}c[c.length-1][1]===""&&c.pop();var g=!1;for(d=1;d<c.length-1;)c[d-1][0]==0&&c[d+1][0]==0&&(c[d][1].substring(c[d][1].length-c[d-1][1].length)==c[d-1][1]?(c[d][1]=c[d-1][1]+c[d][1].substring(0,c[d][1].length-c[d-1][1].length),c[d+1][1]=c[d-1][1]+c[d+1][1],c.splice(d-1,1),g=!0):c[d][1].substring(0,c[d+1][1].length)==c[d+1][1]&&(c[d-1][1]+=c[d+1][1],c[d][1]=c[d][1].substring(c[d+1][1].length)+c[d+1][1],c.splice(d+1,1),g=!0)),d++;g&&this.diff_cleanupMerge(c)},_.prototype.diff_xIndex=function(c,p){var d,m=0,l=0,s=0,u=0;for(d=0;d<c.length&&(c[d][0]!==1&&(m+=c[d][1].length),c[d][0]!==f&&(l+=c[d][1].length),!(m>p));d++)s=m,u=l;return c.length!=d&&c[d][0]===f?u:u+(p-s)},_.prototype.diff_prettyHtml=function(c){for(var p=[],d=/&/g,m=/</g,l=/>/g,s=/\n/g,u=0;u<c.length;u++){var g=c[u][0],b=c[u][1].replace(d,"&amp;").replace(m,"&lt;").replace(l,"&gt;").replace(s,"&para;<br>");switch(g){case 1:p[u]='<ins style="background:#e6ffe6;">'+b+"</ins>";break;case f:p[u]='<del style="background:#ffe6e6;">'+b+"</del>";break;case 0:p[u]="<span>"+b+"</span>"}}return p.join("")},_.prototype.diff_text1=function(c){for(var p=[],d=0;d<c.length;d++)c[d][0]!==1&&(p[d]=c[d][1]);return p.join("")},_.prototype.diff_text2=function(c){for(var p=[],d=0;d<c.length;d++)c[d][0]!==f&&(p[d]=c[d][1]);return p.join("")},_.prototype.diff_levenshtein=function(c){for(var p=0,d=0,m=0,l=0;l<c.length;l++){var s=c[l][0],u=c[l][1];switch(s){case 1:d+=u.length;break;case f:m+=u.length;break;case 0:p+=Math.max(d,m),d=0,m=0}}return p+=Math.max(d,m)},_.prototype.diff_toDelta=function(c){for(var p=[],d=0;d<c.length;d++)switch(c[d][0]){case 1:p[d]="+"+encodeURI(c[d][1]);break;case f:p[d]="-"+c[d][1].length;break;case 0:p[d]="="+c[d][1].length}return p.join("	").replace(/%20/g," ")},_.prototype.diff_fromDelta=function(c,p){for(var d=[],m=0,l=0,s=p.split(/\t/g),u=0;u<s.length;u++){var g=s[u].substring(1);switch(s[u].charAt(0)){case"+":try{d[m++]=new _.Diff(1,decodeURI(g))}catch(T){throw new Error("Illegal escape in diff_fromDelta: "+g)}break;case"-":case"=":var b=parseInt(g,10);if(isNaN(b)||b<0)throw new Error("Invalid number in diff_fromDelta: "+g);var C=c.substring(l,l+=b);s[u].charAt(0)=="="?d[m++]=new _.Diff(0,C):d[m++]=new _.Diff(f,C);break;default:if(s[u])throw new Error("Invalid diff operation in diff_fromDelta: "+s[u])}}if(l!=c.length)throw new Error("Delta length ("+l+") does not equal source text length ("+c.length+").");return d},_.prototype.match_main=function(c,p,d){if(c==null||p==null||d==null)throw new Error("Null input. (match_main)");return d=Math.max(0,Math.min(d,c.length)),c==p?0:c.length?c.substring(d,d+p.length)==p?d:this.match_bitap_(c,p,d):-1},_.prototype.match_bitap_=function(c,p,d){if(p.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var m=this.match_alphabet_(p),l=this;function s(we,fe){var ve=we/p.length,ke=Math.abs(d-fe);return l.Match_Distance?ve+ke/l.Match_Distance:ke?1:ve}var u=this.Match_Threshold,g=c.indexOf(p,d);g!=-1&&(u=Math.min(s(0,g),u),(g=c.lastIndexOf(p,d+p.length))!=-1&&(u=Math.min(s(0,g),u)));var b,C,T=1<<p.length-1;g=-1;for(var k,x=p.length+c.length,v=0;v<p.length;v++){for(b=0,C=x;b<C;)s(v,d+C)<=u?b=C:x=C,C=Math.floor((x-b)/2+b);x=C;var N=Math.max(1,d-C+1),P=Math.min(d+C,c.length)+p.length,J=Array(P+2);J[P+1]=(1<<v)-1;for(var $=P;$>=N;$--){var ie=m[c.charAt($-1)];if(J[$]=v===0?(J[$+1]<<1|1)&ie:(J[$+1]<<1|1)&ie|(k[$+1]|k[$])<<1|1|k[$+1],J[$]&T){var de=s(v,$-1);if(de<=u){if(u=de,!((g=$-1)>d))break;N=Math.max(1,2*d-g)}}}if(s(v+1,d)>u)break;k=J}return g},_.prototype.match_alphabet_=function(c){for(var p={},d=0;d<c.length;d++)p[c.charAt(d)]=0;for(d=0;d<c.length;d++)p[c.charAt(d)]|=1<<c.length-d-1;return p},_.prototype.patch_addContext_=function(c,p){if(p.length!=0){if(c.start2===null)throw Error("patch not initialized");for(var d=p.substring(c.start2,c.start2+c.length1),m=0;p.indexOf(d)!=p.lastIndexOf(d)&&d.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)m+=this.Patch_Margin,d=p.substring(c.start2-m,c.start2+c.length1+m);m+=this.Patch_Margin;var l=p.substring(c.start2-m,c.start2);l&&c.diffs.unshift(new _.Diff(0,l));var s=p.substring(c.start2+c.length1,c.start2+c.length1+m);s&&c.diffs.push(new _.Diff(0,s)),c.start1-=l.length,c.start2-=l.length,c.length1+=l.length+s.length,c.length2+=l.length+s.length}},_.prototype.patch_make=function(c,p,d){var m,l;if(typeof c=="string"&&typeof p=="string"&&d===void 0)m=c,(l=this.diff_main(m,p,!0)).length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(c&&typeof c=="object"&&p===void 0&&d===void 0)l=c,m=this.diff_text1(l);else if(typeof c=="string"&&p&&typeof p=="object"&&d===void 0)m=c,l=p;else{if(typeof c!="string"||typeof p!="string"||!d||typeof d!="object")throw new Error("Unknown call format to patch_make.");m=c,l=d}if(l.length===0)return[];for(var s=[],u=new _.patch_obj,g=0,b=0,C=0,T=m,k=m,x=0;x<l.length;x++){var v=l[x][0],N=l[x][1];switch(g||v===0||(u.start1=b,u.start2=C),v){case 1:u.diffs[g++]=l[x],u.length2+=N.length,k=k.substring(0,C)+N+k.substring(C);break;case f:u.length1+=N.length,u.diffs[g++]=l[x],k=k.substring(0,C)+k.substring(C+N.length);break;case 0:N.length<=2*this.Patch_Margin&&g&&l.length!=x+1?(u.diffs[g++]=l[x],u.length1+=N.length,u.length2+=N.length):N.length>=2*this.Patch_Margin&&g&&(this.patch_addContext_(u,T),s.push(u),u=new _.patch_obj,g=0,T=k,b=C)}v!==1&&(b+=N.length),v!==f&&(C+=N.length)}return g&&(this.patch_addContext_(u,T),s.push(u)),s},_.prototype.patch_deepCopy=function(c){for(var p=[],d=0;d<c.length;d++){var m=c[d],l=new _.patch_obj;l.diffs=[];for(var s=0;s<m.diffs.length;s++)l.diffs[s]=new _.Diff(m.diffs[s][0],m.diffs[s][1]);l.start1=m.start1,l.start2=m.start2,l.length1=m.length1,l.length2=m.length2,p[d]=l}return p},_.prototype.patch_apply=function(c,p){if(c.length==0)return[p,[]];c=this.patch_deepCopy(c);var d=this.patch_addPadding(c);p=d+p+d,this.patch_splitMax(c);for(var m=0,l=[],s=0;s<c.length;s++){var u,g,b=c[s].start2+m,C=this.diff_text1(c[s].diffs),T=-1;if(C.length>this.Match_MaxBits?(u=this.match_main(p,C.substring(0,this.Match_MaxBits),b))!=-1&&((T=this.match_main(p,C.substring(C.length-this.Match_MaxBits),b+C.length-this.Match_MaxBits))==-1||u>=T)&&(u=-1):u=this.match_main(p,C,b),u==-1)l[s]=!1,m-=c[s].length2-c[s].length1;else if(l[s]=!0,m=u-b,C==(g=T==-1?p.substring(u,u+C.length):p.substring(u,T+this.Match_MaxBits)))p=p.substring(0,u)+this.diff_text2(c[s].diffs)+p.substring(u+C.length);else{var k=this.diff_main(C,g,!1);if(C.length>this.Match_MaxBits&&this.diff_levenshtein(k)/C.length>this.Patch_DeleteThreshold)l[s]=!1;else{this.diff_cleanupSemanticLossless(k);for(var x,v=0,N=0;N<c[s].diffs.length;N++){var P=c[s].diffs[N];P[0]!==0&&(x=this.diff_xIndex(k,v)),P[0]===1?p=p.substring(0,u+x)+P[1]+p.substring(u+x):P[0]===f&&(p=p.substring(0,u+x)+p.substring(u+this.diff_xIndex(k,v+P[1].length))),P[0]!==f&&(v+=P[1].length)}}}}return[p=p.substring(d.length,p.length-d.length),l]},_.prototype.patch_addPadding=function(c){for(var p=this.Patch_Margin,d="",m=1;m<=p;m++)d+=String.fromCharCode(m);for(m=0;m<c.length;m++)c[m].start1+=p,c[m].start2+=p;var l=c[0],s=l.diffs;if(s.length==0||s[0][0]!=0)s.unshift(new _.Diff(0,d)),l.start1-=p,l.start2-=p,l.length1+=p,l.length2+=p;else if(p>s[0][1].length){var u=p-s[0][1].length;s[0][1]=d.substring(s[0][1].length)+s[0][1],l.start1-=u,l.start2-=u,l.length1+=u,l.length2+=u}return(s=(l=c[c.length-1]).diffs).length==0||s[s.length-1][0]!=0?(s.push(new _.Diff(0,d)),l.length1+=p,l.length2+=p):p>s[s.length-1][1].length&&(u=p-s[s.length-1][1].length,s[s.length-1][1]+=d.substring(0,u),l.length1+=u,l.length2+=u),d},_.prototype.patch_splitMax=function(c){for(var p=this.Match_MaxBits,d=0;d<c.length;d++)if(!(c[d].length1<=p)){var m=c[d];c.splice(d--,1);for(var l=m.start1,s=m.start2,u="";m.diffs.length!==0;){var g=new _.patch_obj,b=!0;for(g.start1=l-u.length,g.start2=s-u.length,u!==""&&(g.length1=g.length2=u.length,g.diffs.push(new _.Diff(0,u)));m.diffs.length!==0&&g.length1<p-this.Patch_Margin;){var C=m.diffs[0][0],T=m.diffs[0][1];C===1?(g.length2+=T.length,s+=T.length,g.diffs.push(m.diffs.shift()),b=!1):C===f&&g.diffs.length==1&&g.diffs[0][0]==0&&T.length>2*p?(g.length1+=T.length,l+=T.length,b=!1,g.diffs.push(new _.Diff(C,T)),m.diffs.shift()):(T=T.substring(0,p-g.length1-this.Patch_Margin),g.length1+=T.length,l+=T.length,C===0?(g.length2+=T.length,s+=T.length):b=!1,g.diffs.push(new _.Diff(C,T)),T==m.diffs[0][1]?m.diffs.shift():m.diffs[0][1]=m.diffs[0][1].substring(T.length))}u=(u=this.diff_text2(g.diffs)).substring(u.length-this.Patch_Margin);var k=this.diff_text1(m.diffs).substring(0,this.Patch_Margin);k!==""&&(g.length1+=k.length,g.length2+=k.length,g.diffs.length!==0&&g.diffs[g.diffs.length-1][0]===0?g.diffs[g.diffs.length-1][1]+=k:g.diffs.push(new _.Diff(0,k))),b||c.splice(++d,0,g)}}},_.prototype.patch_toText=function(c){for(var p=[],d=0;d<c.length;d++)p[d]=c[d];return p.join("")},_.prototype.patch_fromText=function(c){var p=[];if(!c)return p;for(var d=c.split(`
`),m=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;m<d.length;){var s=d[m].match(l);if(!s)throw new Error("Invalid patch string: "+d[m]);var u=new _.patch_obj;for(p.push(u),u.start1=parseInt(s[1],10),s[2]===""?(u.start1--,u.length1=1):s[2]=="0"?u.length1=0:(u.start1--,u.length1=parseInt(s[2],10)),u.start2=parseInt(s[3],10),s[4]===""?(u.start2--,u.length2=1):s[4]=="0"?u.length2=0:(u.start2--,u.length2=parseInt(s[4],10)),m++;m<d.length;){var g=d[m].charAt(0);try{var b=decodeURI(d[m].substring(1))}catch(C){throw new Error("Illegal escape in patch_fromText: "+b)}if(g=="-")u.diffs.push(new _.Diff(f,b));else if(g=="+")u.diffs.push(new _.Diff(1,b));else if(g==" ")u.diffs.push(new _.Diff(0,b));else{if(g=="@")break;if(g!=="")throw new Error('Invalid patch mode "'+g+'" in: '+b)}m++}}return p},(_.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var c,p=["@@ -"+(this.length1===0?this.start1+",0":this.length1==1?this.start1+1:this.start1+1+","+this.length1)+" +"+(this.length2===0?this.start2+",0":this.length2==1?this.start2+1:this.start2+1+","+this.length2)+` @@
`],d=0;d<this.diffs.length;d++){switch(this.diffs[d][0]){case 1:c="+";break;case f:c="-";break;case 0:c=" "}p[d+1]=c+encodeURI(this.diffs[d][1])+`
`}return p.join("").replace(/%20/g," ")},O.exports=_,O.exports.diff_match_patch=_,O.exports.DIFF_DELETE=f,O.exports.DIFF_INSERT=1,O.exports.DIFF_EQUAL=0},872:(O,_,f)=>{f.d(_,{default:()=>ee});var c=f(478),p=f(156),d=f(314),m=f(730),l=f(66),s=f(218),u=f(702),g=function(H){H===void 0&&(H=document);var q=function(R){var D=document.createElement("img");D.src=R.getAttribute("data-src"),D.addEventListener("load",function(){R.getAttribute("style")||R.getAttribute("class")||R.getAttribute("width")||R.getAttribute("height")||D.naturalHeight>D.naturalWidth&&D.naturalWidth/D.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&D.naturalHeight>window.innerHeight-40&&(R.style.height=window.innerHeight-40+"px"),R.src=D.src}),R.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return H.querySelectorAll("img").forEach(function(R){R.getAttribute("data-src")&&q(R)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),H.querySelectorAll("img").forEach(function(R){window.vditorImageIntersectionObserver.observe(R)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(R){R.forEach(function(D){(D.isIntersecting===void 0?D.intersectionRatio!==0:D.isIntersecting)&&D.target.getAttribute("data-src")&&q(D.target)})}),H.querySelectorAll("img").forEach(function(R){window.vditorImageIntersectionObserver.observe(R)}))},b=f(466),C=f(554),T=f(40),k=f(749),x=f(818),v=f(408),N=f(54),P=f(227),J=f(526),$=f(827),ie=f(640),de=f(895),we=f(393),fe=function(H,q){if(q===void 0&&(q="zh_CN"),typeof speechSynthesis!="undefined"&&typeof SpeechSynthesisUtterance!="undefined"){var R='<svg><use xlink:href="#vditor-icon-play"></use></svg>',D='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(R='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',D='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var G=document.querySelector(".vditor-speech");if(!G){(G=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",G);var ae=function(){var Y,ue;return speechSynthesis.getVoices().forEach(function(be){be.lang===q.replace("_","-")&&(Y=be),be.default&&(ue=be)}),Y||(Y=ue),Y};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=ae);var te=ae();G.onclick=function(){if(G.className==="vditor-speech"){var Y=new SpeechSynthesisUtterance(G.getAttribute("data-text"));Y.voice=te,Y.onend=function(){G.className="vditor-speech",speechSynthesis.cancel(),G.innerHTML=R},speechSynthesis.speak(Y),G.className="vditor-speech vditor-speech--current",G.innerHTML=D}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),G.innerHTML=D):(speechSynthesis.pause(),G.innerHTML=R));(0,we.Hc)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&G.style.display==="block"&&(G.className="vditor-speech",speechSynthesis.cancel(),G.style.display="none")})}H.addEventListener("mouseup",function(Y){var ue=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()!==""){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var be=getSelection().getRangeAt(0).getBoundingClientRect();G.innerHTML=R,G.style.display="block",G.style.top=be.top+be.height+document.querySelector("html").scrollTop-20+"px",G.style.left=Y.screenX+2+"px",G.setAttribute("data-text",ue)}else G.style.display==="block"&&(G.className="vditor-speech",G.style.display="none")})}},ve=function(H,q,R,D){return new(R||(R=Promise))(function(G,ae){function te(be){try{ue(D.next(be))}catch(se){ae(se)}}function Y(be){try{ue(D.throw(be))}catch(se){ae(se)}}function ue(be){var se;be.done?G(be.value):(se=be.value,se instanceof R?se:new R(function(We){We(se)})).then(te,Y)}ue((D=D.apply(H,q||[])).next())})},ke=function(H,q){var R,D,G,ae,te={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return ae={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae;function Y(ue){return function(be){return function(se){if(R)throw new TypeError("Generator is already executing.");for(;te;)try{if(R=1,D&&(G=2&se[0]?D.return:se[0]?D.throw||((G=D.return)&&G.call(D),0):D.next)&&!(G=G.call(D,se[1])).done)return G;switch(D=0,G&&(se=[2&se[0],G.value]),se[0]){case 0:case 1:G=se;break;case 4:return te.label++,{value:se[1],done:!1};case 5:te.label++,D=se[1],se=[0];continue;case 7:se=te.ops.pop(),te.trys.pop();continue;default:if(G=te.trys,!((G=G.length>0&&G[G.length-1])||se[0]!==6&&se[0]!==2)){te=0;continue}if(se[0]===3&&(!G||se[1]>G[0]&&se[1]<G[3])){te.label=se[1];break}if(se[0]===6&&te.label<G[1]){te.label=G[1],G=se;break}if(G&&te.label<G[2]){te.label=G[2],te.ops.push(se);break}G[2]&&te.ops.pop(),te.trys.pop();continue}se=q.call(H,te)}catch(We){se=[6,We],D=0}finally{R=G=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([ue,be])}}},He=function(H){var q={anchor:0,cdn:N.g.CDN,customEmoji:{},emojiPath:(H&&H.emojiPath||N.g.CDN)+"/dist/images/emoji",hljs:N.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:N.g.MARKDOWN_OPTIONS,math:N.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:N.g.THEME_OPTIONS};return(0,ie.T)(q,H)},Ne=function(H,q){var R=He(q);return(0,J.G)(R.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var D=(0,de.X)({autoSpace:R.markdown.autoSpace,codeBlockPreview:R.markdown.codeBlockPreview,emojiSite:R.emojiPath,emojis:R.customEmoji,fixTermTypo:R.markdown.fixTermTypo,footnotes:R.markdown.footnotes,headingAnchor:R.anchor!==0,inlineMathDigit:R.math.inlineDigit,lazyLoadImage:R.lazyLoadImage,linkBase:R.markdown.linkBase,linkPrefix:R.markdown.linkPrefix,listStyle:R.markdown.listStyle,mark:R.markdown.mark,mathBlockPreview:R.markdown.mathBlockPreview,paragraphBeginningSpace:R.markdown.paragraphBeginningSpace,sanitize:R.markdown.sanitize,toc:R.markdown.toc});return q!=null&&q.renderers&&D.SetJSRenderers({renderers:{Md2HTML:q.renderers}}),D.SetHeadingID(!0),D.Md2HTML(H)})},Le=function(H,q,R){return ve(void 0,void 0,void 0,function(){var D,G,ae;return ke(this,function(te){switch(te.label){case 0:return D=He(R),[4,Ne(q,D)];case 1:if(G=te.sent(),D.transform&&(G=D.transform(G)),H.innerHTML=G,H.classList.add("vditor-reset"),D.i18n)return[3,5];if(["en_US","ja_JP","ko_KR","ru_RU","zh_CN","zh_TW"].includes(D.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return ae="vditorI18nScript"+D.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(ue){ue.id!==ae&&document.head.removeChild(ue)}),[4,(0,J.G)(D.cdn+"/dist/js/i18n/"+D.lang+".js",ae)];case 3:te.sent(),te.label=4;case 4:return[3,6];case 5:window.VditorI18n=D.i18n,te.label=6;case 6:return D.icon?[4,(0,J.G)(D.cdn+"/dist/js/icons/"+D.icon+".js","vditorIconScript")]:[3,8];case 7:te.sent(),te.label=8;case 8:return(0,P.Z)(D.theme.current,D.theme.path),D.anchor===1&&H.classList.add("vditor-reset--anchor"),(0,m.O)(H),(0,u.s)(D.hljs,H,D.cdn),(0,b.H)(H,{cdn:D.cdn,math:D.math}),(0,T.i)(H,D.cdn,D.mode),(0,l.P)(H,D.cdn),(0,s.v)(H,D.cdn),(0,d.p)(H,D.cdn,D.mode),(0,k.P)(H,D.cdn,D.mode),(0,v.B)(H,D.cdn),(0,c.Q)(H,D.cdn),(0,C.Y)(H),D.speech.enable&&fe(H),D.anchor!==0&&(Y=D.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(ue){Y===1&&ue.classList.add("vditor-anchor--left"),ue.onclick=function(){var be=ue.getAttribute("href").substr(1),se=document.getElementById("vditorAnchor-"+be).offsetTop;document.querySelector("html").scrollTop=se}}),window.onhashchange=function(){var ue=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));ue&&(document.querySelector("html").scrollTop=ue.offsetTop)}),D.after&&D.after(),D.lazyLoadImage&&g(H),H.addEventListener("click",function(ue){var be=(0,$.lG)(ue.target,"SPAN");if(be&&(0,$.fb)(be,"vditor-toc")){var se=H.querySelector("#"+be.getAttribute("data-target-id"));se&&window.scrollTo(window.scrollX,se.offsetTop)}}),[2]}var Y})})},S=f(863),he=f(312);const ee=function(){function H(){}return H.adapterRender=p,H.previewImage=S.E,H.codeRender=m.O,H.graphvizRender=s.v,H.highlightRender=u.s,H.mathRender=b.H,H.mermaidRender=T.i,H.flowchartRender=l.P,H.chartRender=d.p,H.abcRender=c.Q,H.mindmapRender=k.P,H.plantumlRender=v.B,H.outlineRender=x.k,H.mediaRender=C.Y,H.speechRender=fe,H.lazyLoadImageRender=g,H.md2html=Ne,H.preview=Le,H.setCodeTheme=he.Y,H.setContentTheme=P.Z,H}()},54:(O,_,f)=>{f.d(_,{H:()=>c,g:()=>p});var c="3.8.15",p=function(){function d(){}return d.ZWSP="\u200B",d.DROP_EDITOR="application/editor",d.MOBILE_WIDTH=520,d.CLASS_MENU_DISABLED="vditor-menu--disabled",d.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],d.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],d.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],d.CDN="https://unpkg.com/vditor@3.8.15",d.MARKDOWN_OPTIONS={autoSpace:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},d.HLJS_OPTIONS={enable:!0,lineNumber:!1,style:"github"},d.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},d.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:d.CDN+"/dist/css/content-theme"},d}()},478:(O,_,f)=>{f.d(_,{Q:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var u=d.abcRenderAdapter.getElements(l);u.length>0&&(0,p.G)(s+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){u.forEach(function(g){g.parentElement.classList.contains("vditor-wysiwyg__pre")||g.parentElement.classList.contains("vditor-ir__marker--pre")||g.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(g,d.abcRenderAdapter.getCode(g).trim()),g.style.overflowX="auto",g.setAttribute("data-processed","true"))})})}},156:(O,_,f)=>{f.r(_),f.d(_,{mathRenderAdapter:()=>c,mermaidRenderAdapter:()=>p,mindmapRenderAdapter:()=>d,chartRenderAdapter:()=>m,abcRenderAdapter:()=>l,graphvizRenderAdapter:()=>s,flowchartRenderAdapter:()=>u,plantumlRenderAdapter:()=>g});var c={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-math")}},p={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-mermaid")}},d={getCode:function(b){return b.getAttribute("data-code")},getElements:function(b){return b.querySelectorAll(".language-mindmap")}},m={getCode:function(b){return b.innerText},getElements:function(b){return b.querySelectorAll(".language-echarts")}},l={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-abc")}},s={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-graphviz")}},u={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-flowchart")}},g={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-plantuml")}}},314:(O,_,f)=>{f.d(_,{p:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var g=d.chartRenderAdapter.getElements(l);g.length>0&&(0,p.G)(s+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){g.forEach(function(b){if(!b.parentElement.classList.contains("vditor-wysiwyg__pre")&&!b.parentElement.classList.contains("vditor-ir__marker--pre")){var C=d.chartRenderAdapter.getCode(b).trim();if(C)try{if(b.getAttribute("data-processed")==="true")return;var T=JSON.parse(C);echarts.init(b,u==="dark"?"dark":void 0).setOption(T),b.setAttribute("data-processed","true")}catch(k){b.className="vditor-reset--error",b.innerHTML="echarts render error: <br>"+k}}})})}},730:(O,_,f)=>{f.d(_,{O:()=>p});var c=f(51),p=function(d){d.querySelectorAll("pre > code").forEach(function(m,l){var s,u,g;if(!m.parentElement.classList.contains("vditor-wysiwyg__pre")&&!m.parentElement.classList.contains("vditor-ir__marker--pre")&&!(m.classList.contains("language-mermaid")||m.classList.contains("language-flowchart")||m.classList.contains("language-echarts")||m.classList.contains("language-mindmap")||m.classList.contains("language-plantuml")||m.classList.contains("language-abc")||m.classList.contains("language-graphviz")||m.classList.contains("language-math")||m.style.maxHeight.indexOf("px")>-1||d.classList.contains("vditor-preview")&&l>5)){var b=m.innerText;if(m.classList.contains("highlight-chroma")){var C=document.createElement("code");C.innerHTML=m.innerHTML,C.querySelectorAll(".highlight-ln").forEach(function(v){v.remove()}),b=C.innerText}var T='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(T='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var k=document.createElement("div");k.className="vditor-copy",k.innerHTML='<span aria-label="'+(((s=window.VditorI18n)===null||s===void 0?void 0:s.copy)||"\u590D\u5236")+`"
onmouseover="this.setAttribute('aria-label', '`+(((u=window.VditorI18n)===null||u===void 0?void 0:u.copy)||"\u590D\u5236")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((g=window.VditorI18n)===null||g===void 0?void 0:g.copy)||"\u5DF2\u590D\u5236")+`')">`+T+"</span>";var x=document.createElement("textarea");x.value=(0,c.X)(b),k.insertAdjacentElement("afterbegin",x),m.before(k),m.style.maxHeight=window.outerHeight-40+"px"}})}},66:(O,_,f)=>{f.d(_,{P:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){s===void 0&&(s=c.g.CDN);var u=d.flowchartRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){u.forEach(function(g){if(g.getAttribute("data-processed")!=="true"){var b=flowchart.parse(d.flowchartRenderAdapter.getCode(g));g.innerHTML="",b.drawSVG(g),g.setAttribute("data-processed","true")}})})}},218:(O,_,f)=>{f.d(_,{v:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){s===void 0&&(s=c.g.CDN);var u=d.graphvizRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){u.forEach(function(g){var b=d.graphvizRenderAdapter.getCode(g);if(!g.parentElement.classList.contains("vditor-wysiwyg__pre")&&!g.parentElement.classList.contains("vditor-ir__marker--pre")&&g.getAttribute("data-processed")!=="true"&&b.trim()!==""){try{var C=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),T=(window.URL||window.webkitURL).createObjectURL(C),k=new Worker(T);new Viz({worker:k}).renderSVGElement(b).then(function(x){g.innerHTML=x.outerHTML}).catch(function(x){g.innerHTML="graphviz render error: <br>"+x,g.className="vditor-reset--error"})}catch(x){console.error("graphviz error",x)}g.setAttribute("data-processed","true")}})})}},702:(O,_,f)=>{f.d(_,{s:()=>m});var c=f(54),p=f(526),d=f(578),m=function(l,s,u){s===void 0&&(s=document),u===void 0&&(u=c.g.CDN);var g=l.style;c.g.CODE_THEME.includes(g)||(g="github");var b=document.getElementById("vditorHljsStyle"),C=u+"/dist/js/highlight.js/styles/"+g+".css";b&&b.href!==C&&b.remove(),(0,d.c)(u+"/dist/js/highlight.js/styles/"+g+".css","vditorHljsStyle"),l.enable!==!1&&s.querySelectorAll("pre > code").length!==0&&(0,p.G)(u+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,p.G)(u+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,p.G)(u+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){s.querySelectorAll("pre > code").forEach(function(T){if(!T.parentElement.classList.contains("vditor-ir__marker--pre")&&!T.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(T.classList.contains("language-mermaid")||T.classList.contains("language-flowchart")||T.classList.contains("language-echarts")||T.classList.contains("language-mindmap")||T.classList.contains("language-plantuml")||T.classList.contains("language-abc")||T.classList.contains("language-graphviz")||T.classList.contains("language-math"))&&(hljs.highlightElement(T),l.lineNumber)){T.classList.add("vditor-linenumber");var k=T.querySelector(".vditor-linenumber__temp");k||((k=document.createElement("div")).className="vditor-linenumber__temp",T.insertAdjacentElement("beforeend",k));var x=getComputedStyle(T).whiteSpace,v=!1;x!=="pre-wrap"&&x!=="pre-line"||(v=!0);var N="",P=T.textContent.split(/\r\n|\r|\n/g);P.pop(),P.map(function(J){var $="";v&&(k.textContent=J||`
`,$=' style="height:'+k.getBoundingClientRect().height+'px"'),N+="<span"+$+"></span>"}),k.style.display="none",N='<span class="vditor-linenumber__rows">'+N+"</span>",T.insertAdjacentHTML("beforeend",N)}})})})})}},466:(O,_,f)=>{f.d(_,{H:()=>s});var c=f(54),p=f(526),d=f(578),m=f(51),l=f(156),s=function(u,g){var b=l.mathRenderAdapter.getElements(u);if(b.length!==0){var C={cdn:c.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(g&&g.math&&(g.math=Object.assign({},C.math,g.math)),(g=Object.assign({},C,g)).math.engine==="KaTeX")(0,d.c)(g.cdn+"/dist/js/katex/katex.min.css","vditorKatexStyle"),(0,p.G)(g.cdn+"/dist/js/katex/katex.min.js","vditorKatexScript").then(function(){(0,p.G)(g.cdn+"/dist/js/katex/mhchem.min.js","vditorKatexChemScript").then(function(){b.forEach(function(k){if(!k.parentElement.classList.contains("vditor-wysiwyg__pre")&&!k.parentElement.classList.contains("vditor-ir__marker--pre")&&!k.getAttribute("data-math")){var x=(0,m.X)(l.mathRenderAdapter.getCode(k));k.setAttribute("data-math",x);try{k.innerHTML=katex.renderToString(x,{displayMode:k.tagName==="DIV",output:"html"})}catch(v){k.innerHTML=v.message,k.className="language-math vditor-reset--error"}k.addEventListener("copy",function(v){v.stopPropagation(),v.preventDefault();var N=v.currentTarget.closest(".language-math");v.clipboardData.setData("text/html",N.innerHTML),v.clipboardData.setData("text/plain",N.getAttribute("data-math"))})}})})});else if(g.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:g.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:g.math.macros}}),(0,p.J)(g.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript");var T=function(k,x){var v=(0,m.X)(k.textContent).trim(),N=window.MathJax.getMetricsFor(k);N.display=k.tagName==="DIV",window.MathJax.tex2svgPromise(v,N).then(function(P){k.innerHTML="",k.setAttribute("data-math",v),k.append(P),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var J=P.querySelector('[data-mml-node="merror"]');J&&J.textContent.trim()!==""&&(k.innerHTML=J.textContent.trim(),k.className="vditor-reset--error"),x&&x()})};window.MathJax.startup.promise.then(function(){for(var k=[],x=function(N){var P=b[N];P.parentElement.classList.contains("vditor-wysiwyg__pre")||P.parentElement.classList.contains("vditor-ir__marker--pre")||P.getAttribute("data-math")||!(0,m.X)(P.textContent).trim()||k.push(function(J){N===b.length-1?T(P):T(P,J)})},v=0;v<b.length;v++)x(v);(function(N){if(N.length!==0){var P=0,J=N[N.length-1],$=function(){var ie=N[P++];ie===J?ie():ie($)};$()}})(k)})}}}},554:(O,_,f)=>{f.d(_,{Y:()=>c});var c=function(p){p&&p.querySelectorAll("a").forEach(function(d){var m=d.getAttribute("href");m&&(m.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(l,s){l.insertAdjacentHTML("afterend",'<video controls="controls" src="'+s+'"></video>'),l.remove()}(d,m):m.match(/^.+.(mp3|wav|flac)$/)?function(l,s){l.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+s+'"></audio>'),l.remove()}(d,m):function(l,s){var u=s.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),g=s.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),b=s.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),C=s.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),T=s.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),k=s.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),x=s.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),v=s.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);u&&u[1].length===11?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+u[1]+(u[2]?"?start="+u[2]:"")+'"></iframe>'),l.remove()):g&&g[1]?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+g[1]+'"></iframe>'),l.remove()):b&&b[1]?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+b[1]+'"></iframe>'),l.remove()):C&&C[1]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+C[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),l.remove()):T&&T[0]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(T[0])+'"></iframe>'),l.remove()):k&&k[2]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+k[2]+'"></iframe>'),l.remove()):x&&x[1]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+x[1]+'"></iframe>'),l.remove()):v&&v[1]&&(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+v[1]+'"></iframe>'),l.remove())}(d,m))})}},40:(O,_,f)=>{f.d(_,{i:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){s===void 0&&(s=c.g.CDN);var g=d.mermaidRenderAdapter.getElements(l);g.length!==0&&(0,p.G)(s+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var b={altFontFamily:"sans-serif",flowchart:{htmlLabels:!0,useMaxWidth:!0},fontFamily:"sans-serif",gantt:{leftPadding:75,rightPadding:20},securityLevel:"loose",sequence:{boxMargin:8,diagramMarginX:8,diagramMarginY:8,useMaxWidth:!0},startOnLoad:!1};u==="dark"&&(b.theme="dark",b.themeVariables={activationBkgColor:"hsl(180, 1.5873015873%, 28.3529411765%)",activationBorderColor:"#81B1DB",activeTaskBkgColor:"#81B1DB",activeTaskBorderColor:"#ffffff",actorBkg:"#1f2020",actorBorder:"#81B1DB",actorLineColor:"lightgrey",actorTextColor:"lightgrey",altBackground:"hsl(0, 0%, 40%)",altSectionBkgColor:"#333",arrowheadColor:"lightgrey",background:"#333",border1:"#81B1DB",border2:"rgba(255, 255, 255, 0.25)",classText:"#e0dfdf",clusterBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",clusterBorder:"rgba(255, 255, 255, 0.25)",critBkgColor:"#E83737",critBorderColor:"#E83737",darkTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",defaultLinkColor:"lightgrey",doneTaskBkgColor:"lightgrey",doneTaskBorderColor:"grey",edgeLabelBackground:"hsl(0, 0%, 34.4117647059%)",errorBkgColor:"#a44141",errorTextColor:"#ddd",fillType0:"#1f2020",fillType1:"hsl(180, 1.5873015873%, 28.3529411765%)",fillType2:"hsl(244, 1.5873015873%, 12.3529411765%)",fillType3:"hsl(244, 1.5873015873%, 28.3529411765%)",fillType4:"hsl(116, 1.5873015873%, 12.3529411765%)",fillType5:"hsl(116, 1.5873015873%, 28.3529411765%)",fillType6:"hsl(308, 1.5873015873%, 12.3529411765%)",fillType7:"hsl(308, 1.5873015873%, 28.3529411765%)",fontFamily:'"trebuchet ms", verdana, arial',fontSize:"16px",gridColor:"lightgrey",labelBackground:"#181818",labelBoxBkgColor:"#1f2020",labelBoxBorderColor:"#81B1DB",labelColor:"#ccc",labelTextColor:"lightgrey",lineColor:"lightgrey",loopTextColor:"lightgrey",mainBkg:"#1f2020",mainContrastColor:"lightgrey",nodeBkg:"#1f2020",nodeBorder:"#81B1DB",noteBkgColor:"#fff5ad",noteBorderColor:"rgba(255, 255, 255, 0.25)",noteTextColor:"#1f2020",primaryBorderColor:"hsl(180, 0%, 2.3529411765%)",primaryColor:"#1f2020",primaryTextColor:"#e0dfdf",secondBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryBorderColor:"hsl(180, 0%, 18.3529411765%)",secondaryColor:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryTextColor:"rgb(183.8476190475, 181.5523809523, 181.5523809523)",sectionBkgColor:"hsl(52.9411764706, 28.813559322%, 58.431372549%)",sectionBkgColor2:"#EAE8D9",sequenceNumberColor:"black",signalColor:"lightgrey",signalTextColor:"lightgrey",taskBkgColor:"hsl(180, 1.5873015873%, 35.3529411765%)",taskBorderColor:"#ffffff",taskTextClickableColor:"#003163",taskTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextDarkColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextLightColor:"lightgrey",taskTextOutsideColor:"lightgrey",tertiaryBorderColor:"hsl(20, 0%, 2.3529411765%)",tertiaryColor:"hsl(20, 1.5873015873%, 12.3529411765%)",tertiaryTextColor:"rgb(222.9999999999, 223.6666666666, 223.9999999999)",textColor:"#ccc",titleColor:"#F9FFFE",todayLineColor:"#DB5757"}),mermaid.initialize(b),g.forEach(function(C){var T=d.mermaidRenderAdapter.getCode(C);C.getAttribute("data-processed")!=="true"&&T.trim()!==""&&(mermaid.init(void 0,C),C.setAttribute("data-processed","true"))})})}},749:(O,_,f)=>{f.d(_,{P:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var g=d.mindmapRenderAdapter.getElements(l);g.length>0&&(0,p.G)(s+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){g.forEach(function(b){if(!b.parentElement.classList.contains("vditor-wysiwyg__pre")&&!b.parentElement.classList.contains("vditor-ir__marker--pre")){var C=d.mindmapRenderAdapter.getCode(b);if(C)try{if(b.getAttribute("data-processed")==="true")return;echarts.init(b,u==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(C))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(T,k){var x;return!((x=k==null?void 0:k.data)===null||x===void 0)&&x.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),b.setAttribute("data-processed","true")}catch(T){b.className="vditor-reset--error",b.innerHTML="mindmap render error: <br>"+T}}})})}},818:(O,_,f)=>{f.d(_,{k:()=>d});var c=f(64),p=f(466),d=function(m,l,s){var u="",g=[];if(Array.from(m.children).forEach(function(k,x){if((0,c.W)(k)){if(s){var v=k.id.lastIndexOf("_");k.id=k.id.substring(0,v===-1?void 0:v)+"_"+x}g.push(k.id),u+=k.outerHTML.replace("<wbr>","")}}),u==="")return l.innerHTML="","";var b=document.createElement("div");if(s)s.lute.SetToC(!0),s.currentMode!=="wysiwyg"||s.preview.element.contains(m)?s.currentMode!=="ir"||s.preview.element.contains(m)?b.innerHTML=s.lute.HTML2VditorDOM("<p>[ToC]</p>"+u):b.innerHTML=s.lute.SpinVditorIRDOM("<p>[ToC]</p>"+u):b.innerHTML=s.lute.SpinVditorDOM("<p>[ToC]</p>"+u),s.lute.SetToC(s.options.preview.markdown.toc);else{l.classList.add("vditor-outline");var C=Lute.New();C.SetToC(!0),b.innerHTML=C.HTML2VditorDOM("<p>[ToC]</p>"+u)}var T=b.firstElementChild.querySelectorAll("li > span[data-target-id]");return T.forEach(function(k,x){if(k.nextElementSibling&&k.nextElementSibling.tagName==="UL"){var v="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(v='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),k.innerHTML=v+"<span>"+k.innerHTML+"</span>"}else k.innerHTML="<svg></svg><span>"+k.innerHTML+"</span>";k.setAttribute("data-target-id",g[x])}),u=b.firstElementChild.innerHTML,T.length===0?(l.innerHTML="",u):(l.innerHTML=u,s&&(0,p.H)(l,{cdn:s.options.cdn,math:s.options.preview.math}),l.firstElementChild.addEventListener("click",function(k){for(var x=k.target;x&&!x.isEqualNode(l);){if(x.classList.contains("vditor-outline__action")){x.classList.contains("vditor-outline__action--close")?(x.classList.remove("vditor-outline__action--close"),x.parentElement.nextElementSibling.setAttribute("style","display:block")):(x.classList.add("vditor-outline__action--close"),x.parentElement.nextElementSibling.setAttribute("style","display:none")),k.preventDefault(),k.stopPropagation();break}if(x.getAttribute("data-target-id")){k.preventDefault(),k.stopPropagation();var v=document.getElementById(x.getAttribute("data-target-id"));if(!v)return;if(s)if(s.options.height==="auto"){var N=v.offsetTop+s.element.offsetTop;s.options.toolbarConfig.pin||(N+=s.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,N)}else s.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,s.element.offsetTop),s.preview.element.contains(m)?m.parentElement.scrollTop=v.offsetTop:m.scrollTop=v.offsetTop;else window.scrollTo(window.scrollX,v.offsetTop);break}x=x.parentElement}}),u)}},408:(O,_,f)=>{f.d(_,{B:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var u=d.plantumlRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){u.forEach(function(g){if(!g.parentElement.classList.contains("vditor-wysiwyg__pre")&&!g.parentElement.classList.contains("vditor-ir__marker--pre")){var b=d.plantumlRenderAdapter.getCode(g).trim();if(b)try{g.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(b)+'">'}catch(C){g.className="vditor-reset--error",g.innerHTML="plantuml render error: <br>"+C}}})})}},895:(O,_,f)=>{f.d(_,{X:()=>c});var c=function(p){var d=Lute.New();return d.PutEmojis(p.emojis),d.SetEmojiSite(p.emojiSite),d.SetHeadingAnchor(p.headingAnchor),d.SetInlineMathAllowDigitAfterOpenMarker(p.inlineMathDigit),d.SetAutoSpace(p.autoSpace),d.SetToC(p.toc),d.SetFootnotes(p.footnotes),d.SetFixTermTypo(p.fixTermTypo),d.SetVditorCodeBlockPreview(p.codeBlockPreview),d.SetVditorMathBlockPreview(p.mathBlockPreview),d.SetSanitize(p.sanitize),d.SetChineseParagraphBeginningSpace(p.paragraphBeginningSpace),d.SetRenderListStyle(p.listStyle),d.SetLinkBase(p.linkBase),d.SetLinkPrefix(p.linkPrefix),d.SetMark(p.mark),p.lazyLoadImage&&d.SetImageLazyLoading(p.lazyLoadImage),d}},863:(O,_,f)=>{f.d(_,{E:()=>c});var c=function(p,d,m){m===void 0&&(m="classic");var l=p.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(m==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+p.width+"px;height:"+p.height+"px;transform: translate3d("+l.left+"px, "+(l.top-36)+'px, 0)" src="'+p.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var s=document.querySelector(".vditor-img img"),u="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-p.naturalHeight)/2+"px, 0)";setTimeout(function(){s.setAttribute("style","transition: transform .3s ease-in-out;transform: "+u),setTimeout(function(){s.parentElement.scrollTo((s.parentElement.scrollWidth-s.parentElement.clientWidth)/2,(s.parentElement.scrollHeight-s.parentElement.clientHeight)/2)},400)});var g=document.querySelector(".vditor-img__btn");g.addEventListener("click",function(){var b=parseInt(g.getAttribute("data-deg"),10)+90;b/90%2==1&&p.naturalWidth>s.parentElement.clientHeight?s.style.transform="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+(p.naturalWidth/2-p.naturalHeight/2)+"px, 0) rotateZ("+b+"deg)":s.style.transform=u+" rotateZ("+b+"deg)",g.setAttribute("data-deg",b.toString()),setTimeout(function(){s.parentElement.scrollTo((s.parentElement.scrollWidth-s.parentElement.clientWidth)/2,(s.parentElement.scrollHeight-s.parentElement.clientHeight)/2)},400)})}},312:(O,_,f)=>{f.d(_,{Y:()=>d});var c=f(54),p=f(578),d=function(m,l){l===void 0&&(l=c.g.CDN),c.g.CODE_THEME.includes(m)||(m="github");var s=document.getElementById("vditorHljsStyle"),u=l+"/dist/js/highlight.js/styles/"+m+".css";s?s.href!==u&&(s.remove(),(0,p.c)(u,"vditorHljsStyle")):(0,p.c)(u,"vditorHljsStyle")}},227:(O,_,f)=>{f.d(_,{Z:()=>p});var c=f(578),p=function(d,m){if(d&&m){var l=document.getElementById("vditorContentTheme"),s=m+"/"+d+".css";l?l.getAttribute("href")!==s&&(l.remove(),(0,c.c)(s,"vditorContentTheme")):(0,c.c)(s,"vditorContentTheme")}}},526:(O,_,f)=>{f.d(_,{J:()=>c,G:()=>p});var c=function(d,m){if(document.getElementById(m))return!1;var l=new XMLHttpRequest;l.open("GET",d,!1),l.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),l.send("");var s=document.createElement("script");s.type="text/javascript",s.text=l.responseText,s.id=m,document.head.appendChild(s)},p=function(d,m){return new Promise(function(l,s){if(document.getElementById(m))return l(),!1;var u=document.createElement("script");u.src=d,u.async=!0,document.head.appendChild(u),u.onload=function(){if(document.getElementById(m))return u.remove(),l(),!1;u.id=m,l()}})}},578:(O,_,f)=>{f.d(_,{c:()=>c});var c=function(p,d){if(!document.getElementById(d)){var m=document.createElement("link");m.id=d,m.rel="stylesheet",m.type="text/css",m.href=p,document.getElementsByTagName("head")[0].appendChild(m)}}},51:(O,_,f)=>{f.d(_,{X:()=>c});var c=function(p){return p.replace(/\u00a0/g," ")}},794:(O,_,f)=>{f.d(_,{G6:()=>c,vU:()=>p,pK:()=>d,Le:()=>m,yl:()=>l,ns:()=>s,i7:()=>u});var c=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},p=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},d=function(){try{return typeof localStorage!="undefined"}catch(g){return!1}},m=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},l=function(g){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!(!g.metaKey||g.ctrlKey):!(g.metaKey||!g.ctrlKey)},s=function(g){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?g.indexOf("\u21E7")>-1&&p()&&(g=g.replace(";",":").replace("=","+").replace("-","_")):(g=(g=g.startsWith("\u2318")?g.replace("\u2318","\u2318+"):g.startsWith("\u2325")&&g.substr(1,1)!=="\u2318"?g.replace("\u2325","\u2325+"):g.replace("\u21E7\u2318","\u2318+\u21E7+").replace("\u2325\u2318","\u2325+\u2318+")).replace("\u2318","Ctrl").replace("\u21E7","Shift").replace("\u2325","Alt")).indexOf("Shift")>-1&&(g=g.replace(";",":").replace("=","+").replace("-","_")),g},u=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},827:(O,_,f)=>{f.d(_,{JQ:()=>p,E2:()=>d,O9:()=>m,a1:()=>l,F9:()=>s,lG:()=>u,fb:()=>g,DX:()=>b});var c=f(64),p=function(C,T){for(var k=g(C,T),x=!1,v=!1;k&&!k.classList.contains("vditor-reset")&&!v;)(x=g(k.parentElement,T))?k=x:v=!0;return k||!1},d=function(C,T){for(var k=(0,c.S)(C,T),x=!1,v=!1;k&&!k.classList.contains("vditor-reset")&&!v;)(x=(0,c.S)(k.parentElement,T))?k=x:v=!0;return k||!1},m=function(C){var T=d(C,"UL"),k=d(C,"OL"),x=T;return k&&(!T||T&&k.contains(T))&&(x=k),x},l=function(C,T,k){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var x=C,v=!1;x&&!v&&!x.classList.contains("vditor-reset");)x.getAttribute(T)===k?v=!0:x=x.parentElement;return v&&x},s=function(C){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);var T=C,k=!1,x=l(C,"data-block","0");if(x)return x;for(;T&&!k&&!T.classList.contains("vditor-reset");)T.tagName==="H1"||T.tagName==="H2"||T.tagName==="H3"||T.tagName==="H4"||T.tagName==="H5"||T.tagName==="H6"||T.tagName==="P"||T.tagName==="BLOCKQUOTE"||T.tagName==="OL"||T.tagName==="UL"?k=!0:T=T.parentElement;return k&&T},u=function(C,T){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var k=C,x=!1;k&&!x&&!k.classList.contains("vditor-reset");)k.nodeName===T?x=!0:k=k.parentElement;return x&&k},g=function(C,T){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var k=C,x=!1;k&&!x&&!k.classList.contains("vditor-reset");)k.classList.contains(T)?x=!0:k=k.parentElement;return x&&k},b=function(C){for(;C&&C.lastChild;)C=C.lastChild;return C}},64:(O,_,f)=>{f.d(_,{S:()=>c,W:()=>p});var c=function(d,m){if(!d)return!1;d.nodeType===3&&(d=d.parentElement);for(var l=d,s=!1;l&&!s&&!l.classList.contains("vditor-reset");)l.nodeName.indexOf(m)===0?s=!0:l=l.parentElement;return s&&l},p=function(d){var m=c(d,"H");return!(!m||m.tagName.length!==2||m.tagName==="HR")&&m}},640:(O,_,f)=>{f.d(_,{T:()=>c});var c=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];for(var m={},l=function(u){for(var g in u)u.hasOwnProperty(g)&&(Object.prototype.toString.call(u[g])==="[object Object]"?m[g]=c(m[g],u[g]):m[g]=u[g])},s=0;s<p.length;s++)l(p[s]);return m}},393:(O,_,f)=>{f.d(_,{zh:()=>m,Ny:()=>l,Gb:()=>s,Hc:()=>u,im:()=>g,$j:()=>b,ib:()=>C,oC:()=>T});var c=f(54),p=f(794),d=f(827),m=function(k){var x,v=k[k.currentMode].element;return getSelection().rangeCount>0&&(x=getSelection().getRangeAt(0),v.isEqualNode(x.startContainer)||v.contains(x.startContainer))?x:k[k.currentMode].range?k[k.currentMode].range:(v.focus(),(x=v.ownerDocument.createRange()).setStart(v,0),x.collapse(!0),x)},l=function(k){var x=window.getSelection().getRangeAt(0);if(!k.contains(x.startContainer)&&!(0,d.fb)(x.startContainer,"vditor-panel--none"))return{left:0,top:0};var v,N=k.parentElement.getBoundingClientRect();if(x.getClientRects().length===0)if(x.startContainer.nodeType===3){var P=x.startContainer.parentElement;if(!(P&&P.getClientRects().length>0))return{left:0,top:0};v=P.getClientRects()[0]}else{var J=x.startContainer.children;if(J[x.startOffset]&&J[x.startOffset].getClientRects().length>0)v=J[x.startOffset].getClientRects()[0];else if(x.startContainer.childNodes.length>0){var $=x.cloneRange();x.selectNode(x.startContainer.childNodes[Math.max(0,x.startOffset-1)]),v=x.getClientRects()[0],x.setEnd($.endContainer,$.endOffset),x.setStart($.startContainer,$.startOffset)}else v=x.startContainer.getClientRects()[0];if(!v){for(var ie=x.startContainer.childNodes[x.startOffset];!ie.getClientRects||ie.getClientRects&&ie.getClientRects().length===0;)ie=ie.parentElement;v=ie.getClientRects()[0]}}else v=x.getClientRects()[0];return{left:v.left-N.left,top:v.top-N.top}},s=function(k,x){if(!x){if(getSelection().rangeCount===0)return!1;x=getSelection().getRangeAt(0)}var v=x.commonAncestorContainer;return k.isEqualNode(v)||k.contains(v)},u=function(k){var x=window.getSelection();x.removeAllRanges(),x.addRange(k)},g=function(k,x,v){var N={end:0,start:0};if(!v){if(getSelection().rangeCount===0)return N;v=window.getSelection().getRangeAt(0)}if(s(x,v)){var P=v.cloneRange();k.childNodes[0]&&k.childNodes[0].childNodes[0]?P.setStart(k.childNodes[0].childNodes[0],0):P.selectNodeContents(k),P.setEnd(v.startContainer,v.startOffset),N.start=P.toString().length,N.end=N.start+v.toString().length}return N},b=function(k,x,v){var N=0,P=0,J=v.childNodes[P],$=!1,ie=!1;k=Math.max(0,k),x=Math.max(0,x);var de=v.ownerDocument.createRange();for(de.setStart(J||v,0),de.collapse(!0);!ie&&J;){var we=N+J.textContent.length;if(!$&&k>=N&&k<=we&&(k===0?de.setStart(J,0):J.childNodes[0].nodeType===3?de.setStart(J.childNodes[0],k-N):J.nextSibling?de.setStartBefore(J.nextSibling):de.setStartAfter(J),$=!0,k===x)){ie=!0;break}$&&x>=N&&x<=we&&(x===0?de.setEnd(J,0):J.childNodes[0].nodeType===3?de.setEnd(J.childNodes[0],x-N):J.nextSibling?de.setEndBefore(J.nextSibling):de.setEndAfter(J),ie=!0),N=we,J=v.childNodes[++P]}return!ie&&v.childNodes[P-1]&&de.setStartBefore(v.childNodes[P-1]),u(de),de},C=function(k,x){var v=k.querySelector("wbr");if(v){if(v.previousElementSibling)if(v.previousElementSibling.isSameNode(v.previousSibling)){if(v.previousElementSibling.lastChild)return x.setStartBefore(v),x.collapse(!0),u(x),!(0,p.i7)()||v.previousElementSibling.tagName!=="EM"&&v.previousElementSibling.tagName!=="STRONG"&&v.previousElementSibling.tagName!=="S"||(x.insertNode(document.createTextNode(c.g.ZWSP)),x.collapse(!1)),void v.remove();x.setStartAfter(v.previousElementSibling)}else x.setStart(v.previousSibling,v.previousSibling.textContent.length);else v.previousSibling?x.setStart(v.previousSibling,v.previousSibling.textContent.length):v.nextSibling?v.nextSibling.nodeType===3?x.setStart(v.nextSibling,0):x.setStartBefore(v.nextSibling):x.setStart(v.parentElement,0);x.collapse(!0),v.remove(),u(x)}},T=function(k,x){var v=document.createElement("div");v.innerHTML=k;var N=v.querySelectorAll("p");N.length===1&&!N[0].previousSibling&&!N[0].nextSibling&&x[x.currentMode].element.children.length>0&&v.firstElementChild.tagName==="P"&&(k=N[0].innerHTML.trim());var P=document.createElement("div");P.innerHTML=k;var J=m(x);if(J.toString()!==""&&(x[x.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),P.firstElementChild&&P.firstElementChild.getAttribute("data-block")==="0"){P.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var $=(0,d.F9)(J.startContainer);$?$.insertAdjacentHTML("afterend",P.innerHTML):x[x.currentMode].element.insertAdjacentHTML("beforeend",P.innerHTML),C(x[x.currentMode].element,J)}else{var ie=document.createElement("template");ie.innerHTML=k,J.insertNode(ie.content.cloneNode(!0)),J.collapse(!1),u(J)}}}},_e={};function U(O){var _=_e[O];if(_!==void 0)return _.exports;var f=_e[O]={exports:{}};return pe[O](f,f.exports,U),f.exports}U.d=(O,_)=>{for(var f in _)U.o(_,f)&&!U.o(O,f)&&Object.defineProperty(O,f,{enumerable:!0,get:_[f]})},U.o=(O,_)=>Object.prototype.hasOwnProperty.call(O,_),U.r=O=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var Te={};return(()=>{U.d(Te,{default:()=>xo});var O,_=U(872),f=U(54),c=U(51),p=function(e){return e.currentMode==="sv"?(0,c.X)((e.sv.element.textContent+`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},d=U(526),m=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&(0,d.G)(t.options.cdn+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(p(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(o){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=o}})},e}(),l=U(794),s=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains("vditor-menu--current")&&o.classList.remove("vditor-menu--current")}})},u=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains("vditor-menu--current")&&o.classList.add("vditor-menu--current")}})},g=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains(f.g.CLASS_MENU_DISABLED)&&o.classList.remove(f.g.CLASS_MENU_DISABLED)}})},b=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains(f.g.CLASS_MENU_DISABLED)&&o.classList.add(f.g.CLASS_MENU_DISABLED)}})},C=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},T=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},k=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(o){n&&o.isEqualNode(n)||(o.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},x=function(e,t,n,o){n.addEventListener((0,l.Le)(),function(r){r.preventDefault(),r.stopPropagation(),n.classList.contains(f.g.CLASS_MENU_DISABLED)||(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(i){i.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(k(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},v=U(827),N=U(64),P=function(e,t,n,o){o&&e+""+n+t},J=U(478),$=U(314),ie=U(730),de=U(66),we=U(218),fe=U(702),ve=U(466),ke=U(40),He=U(749),Ne=U(408),Le=function(e,t){if(e)if(e.parentElement.getAttribute("data-type")!=="html-block"){var n=e.firstElementChild.className.replace("language-","");n&&(n==="abc"?(0,J.Q)(e,t.options.cdn):n==="mermaid"?(0,ke.i)(e,t.options.cdn,t.options.theme):n==="flowchart"?(0,de.P)(e,t.options.cdn):n==="echarts"?(0,$.p)(e,t.options.cdn,t.options.theme):n==="mindmap"?(0,He.P)(e,t.options.cdn,t.options.theme):n==="plantuml"?(0,Ne.B)(e,t.options.cdn):n==="graphviz"?(0,we.v)(e,t.options.cdn):n==="math"?(0,ve.H)(e,{cdn:t.options.cdn,math:t.options.preview.math}):((0,fe.s)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),(0,ie.O)(e)),e.setAttribute("data-render","1"))}else e.setAttribute("data-render","1")},S=U(393),he=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(o){o.innerHTML=n,(0,ve.H)(o,{cdn:e.options.cdn,math:e.options.preview.math})})}},ee=function(e,t){var n=(0,v.lG)(e.target,"SPAN");if(n&&(0,v.fb)(n,"vditor-toc")){var o=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(o)if(t.options.height==="auto"){var r=o.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(r+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,r)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=o.offsetTop}},H=function(e,t,n,o){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&(0,S.im)(e,t[t.currentMode].element,o).start===0)return e.previousElementSibling.remove(),ce(t),!0;if(tt(t,n,o,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&(0,S.im)(e,t[t.currentMode].element,o).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),ce(t),!0;if(ut(t,n,o,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var r=(0,v.fb)(o.startContainer,"vditor-toc");if(r)return r.remove(),ce(t),!0}},q=function(e,t,n,o){n===void 0&&(n=!1);var r=(0,v.F9)(t.startContainer);if(r&&!n&&r.getAttribute("data-type")!=="code-block"){if(Rt(r.innerHTML)&&r.previousElementSibling||Pt(r.innerHTML))return;for(var i=(0,S.im)(r,e.ir.element,t).start,a=!0,h=i-1;h>r.textContent.substr(0,i).lastIndexOf(`
`);h--)if(r.textContent.charAt(h)!==" "&&r.textContent.charAt(h)!=="	"){a=!1;break}i===0&&(a=!1);var E=!0;for(h=i-1;h<r.textContent.length;h++)if(r.textContent.charAt(h)!==" "&&r.textContent.charAt(h)!==`
`){E=!1;break}if(a)return;if(E&&!(0,v.fb)(t.startContainer,"vditor-ir__marker")){var w=t.startContainer.previousSibling;return void(w&&w.nodeType!==3&&w.classList.contains("vditor-ir__node--expand")&&w.classList.remove("vditor-ir__node--expand"))}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(Z){Z.classList.remove("vditor-ir__node--expand")}),r||(r=e.ir.element),!r.querySelector("wbr")){var y=(0,v.fb)(t.startContainer,"vditor-ir__preview");y?y.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}r.querySelectorAll("[style]").forEach(function(Z){Z.removeAttribute("style")}),r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.ir.element);var A,I=r.isEqualNode(e.ir.element),B=(0,v.a1)(r,"data-type","footnotes-block"),L="";if(I)L=r.innerHTML;else{var j=(0,N.S)(t.startContainer,"BLOCKQUOTE"),K=(0,v.O9)(t.startContainer);if(K&&(r=K),j&&(!K||K&&!j.contains(K))&&(r=j),B&&(r=B),L=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var F=r.previousElementSibling,W=r.nextElementSibling;!F||F.tagName!=="UL"&&F.tagName!=="OL"||(L=F.outerHTML+L,F.remove()),!W||W.tagName!=="UL"&&W.tagName!=="OL"||(L+=W.outerHTML,W.remove()),L=L.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else r.previousElementSibling&&r.previousElementSibling.textContent.replace(f.g.ZWSP,"")!==""&&o&&o.inputType==="insertParagraph"&&(L=r.previousElementSibling.outerHTML+L,r.previousElementSibling.remove());e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Z){Z&&!r.isEqualNode(Z)&&(L+=Z.outerHTML,Z.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(Z){Z&&!r.isEqualNode(Z)&&(L+=Z.outerHTML,Z.remove())})}if(P("SpinVditorIRDOM",L,"argument",e.options.debugger),L=e.lute.SpinVditorIRDOM(L),P("SpinVditorIRDOM",L,"result",e.options.debugger),I)r.innerHTML=L;else if(r.outerHTML=L,B){var V=(0,v.a1)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(V){var M=V.textContent,X=M.substring(1,M.indexOf("]:")),oe=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+X+'"]');oe&&oe.setAttribute("aria-label",M.substr(X.length+3).trim().substr(0,24))}}var Q,re=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");re.forEach(function(Z,le){le===0?A=Z:(A.insertAdjacentHTML("beforeend",Z.innerHTML),Z.remove())}),re.length>0&&e.ir.element.insertAdjacentElement("beforeend",re[0]);var ne=e.ir.element.querySelectorAll("[data-type='footnotes-block']");ne.forEach(function(Z,le){le===0?Q=Z:(Q.insertAdjacentHTML("beforeend",Z.innerHTML),Z.remove())}),ne.length>0&&e.ir.element.insertAdjacentElement("beforeend",ne[0]),(0,S.ib)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(Z){Le(Z,e)}),he(e),Ve(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},R=function(e,t){if(e==="")return!1;if(e.indexOf("\u21E7")===-1&&e.indexOf("\u2318")===-1&&e.indexOf("\u2325")===-1)return!((0,l.yl)(t)||t.altKey||t.shiftKey||t.code!==e);if(e==="\u21E7Tab")return!((0,l.yl)(t)||t.altKey||!t.shiftKey||t.code!=="Tab");var n=e.split("");if(e.startsWith("\u2325")){var o=n.length===3?n[2]:n[1];return!((n.length===3?!(0,l.yl)(t):(0,l.yl)(t))||!t.altKey||t.shiftKey||t.code!==(/^[0-9]$/.test(o)?"Digit":"Key")+o)}e==="\u2318Enter"&&(n=["\u2318","Enter"]);var r=n.length>2&&n[0]==="\u21E7",i=r?n[2]:n[1];return!r||!(0,l.vU)()&&/Mac/.test(navigator.platform)||(i==="-"?i="_":i==="="&&(i="+")),!(!(0,l.yl)(t)||t.key.toLowerCase()!==i.toLowerCase()||t.altKey||!(!r&&!t.shiftKey||r&&t.shiftKey))},D=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(a){a.classList.remove("vditor-ir__node--expand")});var n=(0,v.JQ)(e.startContainer,"vditor-ir__node"),o=!e.collapsed&&(0,v.JQ)(e.endContainer,"vditor-ir__node");if(e.collapsed||n&&n===o){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),(0,S.Hc)(e));var r=function(a){var h=a.startContainer;if(h.nodeType===3&&h.nodeValue.length!==a.startOffset)return!1;for(var E=h.nextSibling;E&&E.textContent==="";)E=E.nextSibling;if(!E){var w=(0,v.fb)(h,"vditor-ir__marker");if(w&&!w.nextSibling){var y=h.parentElement.parentElement.nextSibling;if(y&&y.nodeType!==3&&y.classList.contains("vditor-ir__node"))return y}return!1}return!(!E||E.nodeType===3||!E.classList.contains("vditor-ir__node")||E.getAttribute("data-block"))&&E}(e);if(r)return r.classList.add("vditor-ir__node--expand"),void r.classList.remove("vditor-ir__node--hidden");var i=function(a){var h=a.startContainer,E=h.previousSibling;return!(h.nodeType!==3||a.startOffset!==0||!E||E.nodeType===3||!E.classList.contains("vditor-ir__node")||E.getAttribute("data-block"))&&E}(e);return i?(i.classList.add("vditor-ir__node--expand"),void i.classList.remove("vditor-ir__node--hidden")):void 0}},G=U(863),ae=function(e,t){var n,o=getSelection().getRangeAt(0).cloneRange(),r=o.startContainer;o.startContainer.nodeType!==3&&o.startContainer.tagName==="DIV"&&(r=o.startContainer.childNodes[o.startOffset-1]);var i=(0,v.a1)(r,"data-block","0");if(i&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var a=(0,S.im)(i,e.sv.element,o).start,h=!0,E=a-1;E>i.textContent.substr(0,a).lastIndexOf(`
`);E--)if(i.textContent.charAt(E)!==" "&&i.textContent.charAt(E)!=="	"){h=!1;break}if(a===0&&(h=!1),h)return void De(e);if(t.inputType==="deleteContentBackward"){var w=(0,v.a1)(r,"data-type","code-block-open-marker")||(0,v.a1)(r,"data-type","code-block-close-marker");if(w){var y;if(w.getAttribute("data-type")==="code-block-close-marker"&&(y=vt(r,"code-block-open-marker"))||w.getAttribute("data-type")==="code-block-open-marker"&&(y=vt(r,"code-block-close-marker",!1)))return y.textContent=w.textContent,void De(e)}var A=(0,v.a1)(r,"data-type","math-block-open-marker");if(A){var I=A.nextElementSibling.nextElementSibling;return void(I&&I.getAttribute("data-type")==="math-block-close-marker"&&(I.remove(),De(e)))}i.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(M){M.textContent.length===1&&M.remove()}),i.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(M){M.textContent.length===1&&M.remove()});var B=(0,v.a1)(r,"data-type","heading-marker");if(B&&B.textContent.indexOf("#")===-1)return void De(e)}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,v.a1)(r,"data-type","padding")||(0,v.a1)(r,"data-type","li-marker")||(0,v.a1)(r,"data-type","task-marker")||(0,v.a1)(r,"data-type","blockquote-marker")))return void De(e)}if(i&&i.textContent.trimRight()==="$$")De(e);else{i||(i=e.sv.element),((n=i.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(i=e.sv.element),(0,v.a1)(r,"data-type","footnotes-link")&&(i=e.sv.element),i.textContent.indexOf(Lute.Caret)===-1&&o.insertNode(document.createTextNode(Lute.Caret)),i.querySelectorAll("[style]").forEach(function(M){M.removeAttribute("style")}),i.querySelectorAll("font").forEach(function(M){M.outerHTML=M.innerHTML});var L,j=i.textContent,K=i.isEqualNode(e.sv.element);K?j=i.textContent:(i.previousElementSibling&&(j=i.previousElementSibling.textContent+j,i.previousElementSibling.remove()),i.previousElementSibling&&j.indexOf(`---
`)===0&&(j=i.previousElementSibling.textContent+j,i.previousElementSibling.remove()),e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(M,X){X===0&&M&&!i.isEqualNode(M.parentElement)&&(j+=`
`+M.parentElement.textContent,M.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(M,X){X===0&&M&&!i.isEqualNode(M.parentElement)&&(j+=`
`+M.parentElement.textContent,M.parentElement.remove())})),j=en(j,e),K?i.innerHTML=j:i.outerHTML=j;var F,W=e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']");W.forEach(function(M,X){X===0?L=M.parentElement:(L.lastElementChild.remove(),L.insertAdjacentHTML("beforeend",""+M.parentElement.innerHTML),M.parentElement.remove())}),W.length>0&&e.sv.element.insertAdjacentElement("beforeend",L);var V=e.sv.element.querySelectorAll("[data-type='footnotes-link']");V.forEach(function(M,X){X===0?F=M.parentElement:(F.lastElementChild.remove(),F.insertAdjacentHTML("beforeend",""+M.parentElement.innerHTML),M.parentElement.remove())}),V.length>0&&e.sv.element.insertAdjacentElement("beforeend",F),(0,S.ib)(e.sv.element,o),Ae(e),De(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})}},te=U(227),Y=function(e){e.options.theme==="dark"?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},ue=function(e){var t=window.innerWidth<=f.g.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px "+Math.max(t,n)+"px"}e.ir.element.parentElement.style.display!=="none"&&(n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.ir.element.style.padding="10px "+Math.max(t,n)+"px"),e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},be=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}};function se(){window.removeEventListener("resize",O)}var We,Ft,Yn=function(e){be(e),se(),window.addEventListener("resize",O=function(){ue(e),be(e)});var t=(0,l.pK)()&&localStorage.getItem(e.options.cache.id);return e.options.cache.enable&&t||(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},st=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,S.Gb)(e[e.currentMode].element)){s(e.toolbar.elements,f.g.EDIT_TOOLBARS),g(e.toolbar.elements,f.g.EDIT_TOOLBARS);var t=(0,S.zh)(e),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]),(e.currentMode==="sv"?(0,v.a1)(n,"data-type","heading"):(0,N.W)(n))&&u(e.toolbar.elements,["headings"]),(e.currentMode==="sv"?(0,v.a1)(n,"data-type","blockquote"):(0,v.lG)(n,"BLOCKQUOTE"))&&u(e.toolbar.elements,["quote"]),(0,v.a1)(n,"data-type","strong")&&u(e.toolbar.elements,["bold"]),(0,v.a1)(n,"data-type","em")&&u(e.toolbar.elements,["italic"]),(0,v.a1)(n,"data-type","s")&&u(e.toolbar.elements,["strike"]),(0,v.a1)(n,"data-type","a")&&u(e.toolbar.elements,["link"]);var o=(0,v.lG)(n,"LI");o?(o.classList.contains("vditor-task")?u(e.toolbar.elements,["check"]):o.parentElement.tagName==="OL"?u(e.toolbar.elements,["ordered-list"]):o.parentElement.tagName==="UL"&&u(e.toolbar.elements,["list"]),g(e.toolbar.elements,["outdent","indent"])):b(e.toolbar.elements,["outdent","indent"]),(0,v.a1)(n,"data-type","code-block")&&(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),u(e.toolbar.elements,["code"])),(0,v.a1)(n,"data-type","code")&&(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),u(e.toolbar.elements,["inline-code"])),(0,v.a1)(n,"data-type","table")&&b(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},Ee=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,l.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Kt=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},Xt=function(e){for(var t="",n=e.previousSibling;n;)t=n.nodeType===3?n.textContent+t:n.outerHTML+t,n=n.previousSibling;return t},Jt=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var o=document.createElement("p");o.setAttribute("data-block","0"),o.textContent=n.textContent;var r=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(o,n),n.remove(),t.setStart(o.firstChild,Math.min(o.firstChild.textContent.length,r)),t.collapse(!0),(0,S.Hc)(t),!0}if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>"):n.tagName==="BR"?n.outerHTML='<p data-block="0">'+n.outerHTML+"<wbr></p>":(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.outerHTML+"</p>"),(0,S.ib)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},ft=function(e,t){var n=(0,S.zh)(e),o=(0,v.F9)(n.startContainer);o||(o=n.startContainer.childNodes[n.startOffset]),o||e.wysiwyg.element.children.length!==0||(o=e.wysiwyg.element),o&&!o.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),o.innerHTML.trim()==="<wbr>"&&(o.innerHTML="<wbr><br>"),o.tagName==="BLOCKQUOTE"||o.classList.contains("vditor-reset")?o.innerHTML="<"+t+' data-block="0">'+o.innerHTML.trim()+"</"+t+">":o.outerHTML="<"+t+' data-block="0">'+o.innerHTML.trim()+"</"+t+">",(0,S.ib)(e.wysiwyg.element,n),he(e))},Ct=function(e){var t=getSelection().getRangeAt(0),n=(0,v.F9)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",(0,S.ib)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},dt=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling,r=o.ownerDocument.createRange();o.tagName==="CODE"?(o.style.display="inline-block",n?r.setStart(o.firstChild,1):r.selectNodeContents(o)):(o.style.display="block",o.firstChild.firstChild||o.firstChild.appendChild(document.createTextNode("")),r.selectNodeContents(o.firstChild)),n?r.collapse(!0):r.collapse(!1),(0,S.Hc)(r),e.firstElementChild.classList.contains("language-mindmap")||Ae(t)},je=function(e,t){if(R("\u21E7\u2318X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');if(n)return n.click(),t.preventDefault(),!0}},Xe=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,S.Gb)(e.wysiwyg.element)){s(e.toolbar.elements,f.g.EDIT_TOOLBARS),g(e.toolbar.elements,f.g.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;n=t.startContainer.nodeType===3?t.startContainer.parentElement:n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var o=(0,v.a1)(n,"data-type","footnotes-block");if(o)return e.wysiwyg.popover.innerHTML="",Pe(o,e),void Re(e,o);var r=(0,v.lG)(n,"LI");r?(r.classList.contains("vditor-task")?u(e.toolbar.elements,["check"]):r.parentElement.tagName==="OL"?u(e.toolbar.elements,["ordered-list"]):r.parentElement.tagName==="UL"&&u(e.toolbar.elements,["list"]),g(e.toolbar.elements,["outdent","indent"])):b(e.toolbar.elements,["outdent","indent"]),(0,v.lG)(n,"BLOCKQUOTE")&&u(e.toolbar.elements,["quote"]),((0,v.lG)(n,"B")||(0,v.lG)(n,"STRONG"))&&u(e.toolbar.elements,["bold"]),((0,v.lG)(n,"I")||(0,v.lG)(n,"EM"))&&u(e.toolbar.elements,["italic"]),((0,v.lG)(n,"STRIKE")||(0,v.lG)(n,"S"))&&u(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(z){z.classList.remove("vditor-comment--focus")});var i=(0,v.fb)(n,"vditor-comment");if(i){var a=i.getAttribute("data-cmtids").split(" ");if(a.length>1&&i.nextSibling.isSameNode(i.nextElementSibling)){var h=i.nextElementSibling.getAttribute("data-cmtids").split(" ");a.find(function(z){if(h.includes(z))return a=[z],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(z){z.getAttribute("data-cmtids").indexOf(a[0])>-1&&z.classList.add("vditor-comment--focus")})}var E=(0,v.lG)(n,"A");E&&u(e.toolbar.elements,["link"]);var w=(0,v.lG)(n,"TABLE"),y=(0,N.W)(n);(0,v.lG)(n,"CODE")?(0,v.lG)(n,"PRE")?(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),u(e.toolbar.elements,["code"])):(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),u(e.toolbar.elements,["inline-code"])):y?(b(e.toolbar.elements,["bold"]),u(e.toolbar.elements,["headings"])):w&&b(e.toolbar.elements,["table"]);var A=(0,v.fb)(n,"vditor-toc");if(A)return e.wysiwyg.popover.innerHTML="",Pe(A,e),void Re(e,A);var I=(0,N.S)(n,"BLOCKQUOTE");if(I&&(e.wysiwyg.popover.innerHTML="",$e(t,I,e),Qe(t,I,e),Pe(I,e),Re(e,I)),r&&(e.wysiwyg.popover.innerHTML="",$e(t,r,e),Qe(t,r,e),Pe(r,e),Re(e,r)),w){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var B=function(){var z=w.rows.length,xe=w.rows[0].cells.length,Ze=parseInt(le.value,10)||z,Ge=parseInt(Ce.value,10)||xe;if(Ze!==z||xe!==Ge){if(xe!==Ge)for(var An=Ge-xe,it=0;it<w.rows.length;it++)if(An>0)for(var Mn=0;Mn<An;Mn++)it===0?w.rows[it].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):w.rows[it].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var zt=xe-1;zt>=Ge;zt--)w.rows[it].cells[zt].remove();if(z!==Ze){var Hn=Ze-z;if(Hn>0){for(var Vt="<tr>",at=0;at<Ge;at++)Vt+="<td> </td>";for(var Nn=0;Nn<Hn;Nn++)w.querySelector("tbody")?w.querySelector("tbody").insertAdjacentHTML("beforeend",Vt):w.querySelector("thead").insertAdjacentHTML("afterend",Vt+"</tr>")}else for(at=z-1;at>=Ze;at--)w.rows[at].remove(),w.rows.length===1&&w.querySelector("tbody").remove()}}},L=function(z){yt(w,z),z==="right"?(W.classList.remove("vditor-icon--current"),V.classList.remove("vditor-icon--current"),M.classList.add("vditor-icon--current")):z==="center"?(W.classList.remove("vditor-icon--current"),M.classList.remove("vditor-icon--current"),V.classList.add("vditor-icon--current")):(V.classList.remove("vditor-icon--current"),M.classList.remove("vditor-icon--current"),W.classList.add("vditor-icon--current")),(0,S.Hc)(t),Ee(e)},j=(0,v.lG)(n,"TD"),K=(0,v.lG)(n,"TH"),F="left";j?F=j.getAttribute("align")||"left":K&&(F=K.getAttribute("align")||"center");var W=document.createElement("button");W.setAttribute("type","button"),W.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,l.ns)("\u21E7\u2318L")+">"),W.setAttribute("data-type","left"),W.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',W.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(F==="left"?" vditor-icon--current":""),W.onclick=function(){L("left")};var V=document.createElement("button");V.setAttribute("type","button"),V.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,l.ns)("\u21E7\u2318C")+">"),V.setAttribute("data-type","center"),V.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',V.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(F==="center"?" vditor-icon--current":""),V.onclick=function(){L("center")};var M=document.createElement("button");M.setAttribute("type","button"),M.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,l.ns)("\u21E7\u2318R")+">"),M.setAttribute("data-type","right"),M.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',M.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(F==="right"?" vditor-icon--current":""),M.onclick=function(){L("right")};var X=document.createElement("button");X.setAttribute("type","button"),X.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,l.ns)("\u2318=")+">"),X.setAttribute("data-type","insertRow"),X.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',X.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",X.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&un(e,t,xe)};var oe=document.createElement("button");oe.setAttribute("type","button"),oe.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,l.ns)("\u21E7\u2318F")+">"),oe.setAttribute("data-type","insertRow"),oe.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',oe.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",oe.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&mn(e,t,xe)};var Q=document.createElement("button");Q.setAttribute("type","button"),Q.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,l.ns)("\u21E7\u2318=")+">"),Q.setAttribute("data-type","insertColumn"),Q.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',Q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Q.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&wt(e,w,xe)};var re=document.createElement("button");re.setAttribute("type","button"),re.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,l.ns)("\u21E7\u2318G")+">"),re.setAttribute("data-type","insertColumn"),re.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',re.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",re.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&wt(e,w,xe,"beforebegin")};var ne=document.createElement("button");ne.setAttribute("type","button"),ne.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,l.ns)("\u2318-")+">"),ne.setAttribute("data-type","deleteRow"),ne.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',ne.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ne.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&fn(e,t,xe)};var Z=document.createElement("button");Z.setAttribute("type","button"),Z.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,l.ns)("\u21E7\u2318-")+">"),Z.setAttribute("data-type","deleteColumn"),Z.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',Z.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Z.onclick=function(){var z=getSelection().getRangeAt(0).startContainer,xe=(0,v.lG)(z,"TD")||(0,v.lG)(z,"TH");xe&&vn(e,t,w,xe)},(Be=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.row),Be.className="vditor-tooltipped vditor-tooltipped__n";var le=document.createElement("input");Be.appendChild(le),le.type="number",le.min="1",le.className="vditor-input",le.style.width="42px",le.style.textAlign="center",le.setAttribute("placeholder",window.VditorI18n.row),le.value=w.rows.length.toString(),le.oninput=function(){B()},le.onkeydown=function(z){if(!z.isComposing)return z.key==="Tab"?(Ce.focus(),Ce.select(),void z.preventDefault()):void je(e,z)};var ye=document.createElement("span");ye.setAttribute("aria-label",window.VditorI18n.column),ye.className="vditor-tooltipped vditor-tooltipped__n";var Ce=document.createElement("input");ye.appendChild(Ce),Ce.type="number",Ce.min="1",Ce.className="vditor-input",Ce.style.width="42px",Ce.style.textAlign="center",Ce.setAttribute("placeholder",window.VditorI18n.column),Ce.value=w.rows[0].cells.length.toString(),Ce.oninput=function(){B()},Ce.onkeydown=function(z){if(!z.isComposing)return z.key==="Tab"?(le.focus(),le.select(),void z.preventDefault()):void je(e,z)},$e(t,w,e),Qe(t,w,e),Pe(w,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",W),e.wysiwyg.popover.insertAdjacentElement("beforeend",V),e.wysiwyg.popover.insertAdjacentElement("beforeend",M),e.wysiwyg.popover.insertAdjacentElement("beforeend",oe),e.wysiwyg.popover.insertAdjacentElement("beforeend",X),e.wysiwyg.popover.insertAdjacentElement("beforeend",re),e.wysiwyg.popover.insertAdjacentElement("beforeend",Q),e.wysiwyg.popover.insertAdjacentElement("beforeend",ne),e.wysiwyg.popover.insertAdjacentElement("beforeend",Z),e.wysiwyg.popover.insertAdjacentElement("beforeend",Be),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",ye),Re(e,w)}var Ue=(0,v.a1)(n,"data-type","link-ref");Ue&&Zt(e,Ue);var Oe=(0,v.a1)(n,"data-type","footnotes-ref");if(Oe){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="",(Be=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,l.ns)("\u2325Enter")+">"),Be.className="vditor-tooltipped vditor-tooltipped__n";var Ie=document.createElement("input");Be.appendChild(Ie),Ie.className="vditor-input",Ie.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,l.ns)("\u2325Enter")+">"),Ie.style.width="120px",Ie.value=Oe.getAttribute("data-footnotes-label"),Ie.oninput=function(){Ie.value.trim()!==""&&Oe.setAttribute("data-footnotes-label",Ie.value)},Ie.onkeydown=function(z){if(!z.isComposing)return(0,l.yl)(z)||z.shiftKey||!z.altKey||z.key!=="Enter"?void je(e,z):(t.selectNodeContents(Oe),t.collapse(!1),(0,S.Hc)(t),void z.preventDefault())},Pe(Oe,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Be),Re(e,Oe)}var Me=(0,v.fb)(n,"vditor-wysiwyg__block"),nt=!!Me&&Me.getAttribute("data-type").indexOf("block")>-1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(z){(!Me||Me&&nt&&!Me.contains(z))&&(z.previousElementSibling.style.display="none")}),Me&&nt){if(e.wysiwyg.popover.innerHTML="",$e(t,Me,e),Qe(t,Me,e),Pe(Me,e),Me.getAttribute("data-type")==="code-block"){var xt=document.createElement("span");xt.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,l.ns)("\u2325Enter")+">"),xt.className="vditor-tooltipped vditor-tooltipped__n";var qe=document.createElement("input");xt.appendChild(qe);var rt=Me.firstElementChild.firstElementChild;qe.className="vditor-input",qe.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,l.ns)("\u2325Enter")+">"),qe.value=rt.className.indexOf("language-")>-1?rt.className.split("-")[1].split(" ")[0]:"",qe.oninput=function(z){qe.value.trim()!==""?rt.className="language-"+qe.value:(rt.className="",e.hint.recentLanguage=""),Me.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Me.lastElementChild.innerHTML=Me.firstElementChild.innerHTML,Le(Me.lastElementChild,e)),Ee(e),z.detail===1&&(t.setStart(rt.firstChild,0),t.collapse(!0),(0,S.Hc)(t))},qe.onkeydown=function(z){if(!z.isComposing&&!je(e,z)){if(z.key==="Escape"&&e.hint.element.style.display==="block")return e.hint.element.style.display="none",void z.preventDefault();e.hint.select(z,e),(0,l.yl)(z)||z.shiftKey||z.key!=="Enter"||(t.setStart(rt.firstChild,0),t.collapse(!0),(0,S.Hc)(t),z.preventDefault(),z.stopPropagation())}},qe.onkeyup=function(z){if(!z.isComposing&&z.key!=="Enter"&&z.key!=="ArrowUp"&&z.key!=="Escape"&&z.key!=="ArrowDown"){var xe=[],Ze=qe.value.substring(0,qe.selectionStart);f.g.CODE_LANGUAGES.forEach(function(Ge){Ge.indexOf(Ze.toLowerCase())>-1&&xe.push({html:Ge,value:Ge})}),e.hint.genHTML(xe,Ze,e),z.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",xt)}Re(e,Me)}else Me=void 0;if(y){var Be;e.wysiwyg.popover.innerHTML="",(Be=document.createElement("span")).setAttribute("aria-label","ID<"+(0,l.ns)("\u2325Enter")+">"),Be.className="vditor-tooltipped vditor-tooltipped__n";var Fe=document.createElement("input");Be.appendChild(Fe),Fe.className="vditor-input",Fe.setAttribute("placeholder","ID<"+(0,l.ns)("\u2325Enter")+">"),Fe.style.width="120px",Fe.value=y.getAttribute("data-id")||"",Fe.oninput=function(){y.setAttribute("data-id",Fe.value)},Fe.onkeydown=function(z){if(!z.isComposing)return(0,l.yl)(z)||z.shiftKey||!z.altKey||z.key!=="Enter"?void je(e,z):(t.selectNodeContents(y),t.collapse(!1),(0,S.Hc)(t),void z.preventDefault())},$e(t,y,e),Qe(t,y,e),Pe(y,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Be),Re(e,y)}if(E&&Tt(e,E),!(I||r||w||Me||E||Ue||Oe||y||A)){var ot=(0,v.a1)(n,"data-block","0");ot&&ot.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",$e(t,ot,e),Qe(t,ot,e),Pe(ot,e),Re(e,ot)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(z){z.style.display="none"});var Ln=(0,v.a1)(t.startContainer,"data-type","backslash");Ln&&(Ln.querySelector("span").style.display="inline")}},200)},Re=function(e,t){var n=t,o=(0,v.lG)(t,"TABLE");o&&(n=o),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},Zt=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){r.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",r.value):t.textContent=r.value),a.value.trim()!==""&&t.setAttribute("data-link-label",a.value)},o=document.createElement("span");o.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n";var r=document.createElement("input");o.appendChild(r),r.className="vditor-input",r.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),r.style.width="120px",r.value=t.getAttribute("alt")||t.textContent,r.oninput=function(){n()},r.onkeydown=function(h){je(e,h)||ct(e,t,h,a)};var i=document.createElement("span");i.setAttribute("aria-label",window.VditorI18n.linkRef),i.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");i.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",window.VditorI18n.linkRef),a.value=t.getAttribute("data-link-label"),a.oninput=function(){n()},a.onkeydown=function(h){je(e,h)||ct(e,t,h,r)},Pe(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),Re(e,t)},$e=function(e,t,n){var o=t.previousElementSibling;if(o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","up"),r.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,l.ns)("\u21E7\u2318U")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("beforebegin",t),(0,S.ib)(n.wysiwyg.element,e),Ee(n),Xe(n),Ae(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},Qe=function(e,t,n){var o=t.nextElementSibling;if(o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","down"),r.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,l.ns)("\u21E7\u2318D")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("afterend",t),(0,S.ib)(n.wysiwyg.element,e),Ee(n),Xe(n),Ae(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},Pe=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,l.ns)("\u21E7\u2318X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var o=(0,S.zh)(t);o.setStartAfter(e),(0,S.Hc)(o),e.remove(),Ee(t),Xe(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&he(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},ct=function(e,t,n,o){if(!n.isComposing){if(n.key==="Tab")return o.focus(),o.select(),void n.preventDefault();if(!(0,l.yl)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var r=(0,S.zh)(e);t.insertAdjacentHTML("afterend",f.g.ZWSP),r.setStartAfter(t.nextSibling),r.collapse(!0),(0,S.Hc)(r),n.preventDefault()}}},Tt=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){r.value.trim()!==""&&(t.innerHTML=r.value),t.setAttribute("href",a.value),t.setAttribute("title",E.value),Ee(e)};t.querySelectorAll("[data-marker]").forEach(function(w){w.removeAttribute("data-marker")});var o=document.createElement("span");o.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n";var r=document.createElement("input");o.appendChild(r),r.className="vditor-input",r.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),r.style.width="120px",r.value=t.innerHTML||"",r.oninput=function(){n()},r.onkeydown=function(w){je(e,w)||ct(e,t,w,a)};var i=document.createElement("span");i.setAttribute("aria-label",window.VditorI18n.link),i.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");i.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",window.VditorI18n.link),a.value=t.getAttribute("href")||"",a.oninput=function(){n()},a.onkeydown=function(w){je(e,w)||ct(e,t,w,E)};var h=document.createElement("span");h.setAttribute("aria-label",window.VditorI18n.tooltipText),h.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");h.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.tooltipText),E.style.width="60px",E.value=t.getAttribute("title")||"",E.oninput=function(){n()},E.onkeydown=function(w){je(e,w)||ct(e,t,w,r)},Pe(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),e.wysiwyg.popover.insertAdjacentElement("beforeend",h),Re(e,t)},et=function(e){e.currentMode==="wysiwyg"?Xe(e):e.currentMode==="ir"&&st(e)},Yt=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var o=e.wysiwyg.element;o.innerHTML=e.lute.Md2VditorDOM(t),o.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(r){Le(r,e),r.previousElementSibling.setAttribute("style","display:none")}),Ee(e,n)},$n=function(e,t,n){for(var o=e.startContainer.parentElement,r=!1,i="",a="",h=function(L){var j=Xt(L.startContainer),K=Kt(L.startContainer),F=L.startContainer.textContent,W=L.startOffset,V="",M="";return(F.substr(0,W)!==""&&F.substr(0,W)!==f.g.ZWSP||j)&&(V=""+j+F.substr(0,W)),(F.substr(W)!==""&&F.substr(W)!==f.g.ZWSP||K)&&(M=""+F.substr(W)+K),{afterHTML:M,beforeHTML:V}}(e),E=h.beforeHTML,w=h.afterHTML;o&&!r;){var y=o.tagName;if(y==="STRIKE"&&(y="S"),y==="I"&&(y="EM"),y==="B"&&(y="STRONG"),y==="S"||y==="STRONG"||y==="EM"){var A="",I="",B="";o.parentElement.getAttribute("data-block")!=="0"&&(I=Xt(o),B=Kt(o)),(E||I)&&(E=A=I+"<"+y+">"+E+"</"+y+">"),(n==="bold"&&y==="STRONG"||n==="italic"&&y==="EM"||n==="strikeThrough"&&y==="S")&&(A+=""+i+f.g.ZWSP+"<wbr>"+a,r=!0),(w||B)&&(A+=w="<"+y+">"+w+"</"+y+">"+B),o.parentElement.getAttribute("data-block")!=="0"?(o=o.parentElement).innerHTML=A:(o.outerHTML=A,o=o.parentElement),i="<"+y+">"+i,a="</"+y+">"+a}else r=!0}(0,S.ib)(t.wysiwyg.element,e)},Se=function(e,t){var n,o=this;this.element=document.createElement("div"),t.className&&(n=this.element.classList).add.apply(n,t.className.split(" "));var r=t.hotkey?" <"+(0,l.ns)(t.hotkey)+">":"";t.level===2&&(r=t.hotkey?" &lt;"+(0,l.ns)(t.hotkey)+"&gt;":"");var i=t.tip?t.tip+r:""+window.VditorI18n[t.name]+r,a=t.name==="upload"?"div":"button";if(t.level===2)this.element.innerHTML="<"+a+' data-type="'+t.name+'">'+i+"</"+a+">";else{this.element.classList.add("vditor-toolbar__item");var h=document.createElement(a);h.setAttribute("data-type",t.name),h.className="vditor-tooltipped vditor-tooltipped__"+t.tipPosition,h.setAttribute("aria-label",i),h.innerHTML=t.icon,this.element.appendChild(h)}t.prefix&&this.element.children[0].addEventListener((0,l.Le)(),function(E){E.preventDefault(),o.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||(e.currentMode==="wysiwyg"?function(w,y,A){if(!(w.wysiwyg.composingLock&&A instanceof CustomEvent)){var I=!0,B=!0;w.wysiwyg.element.querySelector("wbr")&&w.wysiwyg.element.querySelector("wbr").remove();var L=(0,S.zh)(w),j=y.getAttribute("data-type");if(y.classList.contains("vditor-menu--current"))if(j==="strike"&&(j="strikeThrough"),j==="quote"){var K=(0,v.lG)(L.startContainer,"BLOCKQUOTE");K||(K=L.startContainer.childNodes[L.startOffset]),K&&(I=!1,y.classList.remove("vditor-menu--current"),L.insertNode(document.createElement("wbr")),K.outerHTML=K.innerHTML.trim()===""?'<p data-block="0">'+K.innerHTML+"</p>":K.innerHTML,(0,S.ib)(w.wysiwyg.element,L))}else if(j==="inline-code"){var F=(0,v.lG)(L.startContainer,"CODE");F||(F=L.startContainer.childNodes[L.startOffset]),F&&(F.outerHTML=F.innerHTML.replace(f.g.ZWSP,"")+"<wbr>",(0,S.ib)(w.wysiwyg.element,L))}else j==="link"?(L.collapsed&&L.selectNode(L.startContainer.parentElement),document.execCommand("unlink",!1,"")):j==="check"||j==="list"||j==="ordered-list"?(bt(w,L,j),(0,S.ib)(w.wysiwyg.element,L),I=!1,y.classList.remove("vditor-menu--current")):(I=!1,y.classList.remove("vditor-menu--current"),L.toString()===""?$n(L,w,j):document.execCommand(j,!1,""));else{w.wysiwyg.element.childNodes.length===0&&(w.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,S.ib)(w.wysiwyg.element,L));var W=(0,v.F9)(L.startContainer);if(j==="quote"){if(W||(W=L.startContainer.childNodes[L.startOffset]),W){I=!1,y.classList.add("vditor-menu--current"),L.insertNode(document.createElement("wbr"));var V=(0,v.lG)(L.startContainer,"LI");V&&W.contains(V)?V.innerHTML='<blockquote data-block="0">'+V.innerHTML+"</blockquote>":W.outerHTML='<blockquote data-block="0">'+W.outerHTML+"</blockquote>",(0,S.ib)(w.wysiwyg.element,L)}}else if(j==="check"||j==="list"||j==="ordered-list")bt(w,L,j,!1),(0,S.ib)(w.wysiwyg.element,L),I=!1,s(w.toolbar.elements,["check","list","ordered-list"]),y.classList.add("vditor-menu--current");else if(j==="inline-code"){if(L.toString()==="")(M=document.createElement("code")).textContent=f.g.ZWSP,L.insertNode(M),L.setStart(M.firstChild,1),L.collapse(!0),(0,S.Hc)(L);else if(L.startContainer.nodeType===3){var M=document.createElement("code");L.surroundContents(M),L.insertNode(M),(0,S.Hc)(L)}y.classList.add("vditor-menu--current")}else if(j==="code")(M=document.createElement("div")).className="vditor-wysiwyg__block",M.setAttribute("data-type","code-block"),M.setAttribute("data-block","0"),M.setAttribute("data-marker","```"),L.toString()===""?M.innerHTML=`<pre><code><wbr>
</code></pre>`:(M.innerHTML="<pre><code>"+L.toString()+"<wbr></code></pre>",L.deleteContents()),L.insertNode(M),W&&(W.outerHTML=w.lute.SpinVditorDOM(W.outerHTML)),(0,S.ib)(w.wysiwyg.element,L),w.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(Ce){Le(Ce,w)}),y.classList.add("vditor-menu--disabled");else if(j==="link"){if(L.toString()===""){var X=document.createElement("a");X.innerText=f.g.ZWSP,L.insertNode(X),L.setStart(X.firstChild,1),L.collapse(!0),Tt(w,X);var oe=w.wysiwyg.popover.querySelector("input");oe.value="",oe.focus(),B=!1}else{(M=document.createElement("a")).setAttribute("href",""),M.innerHTML=L.toString(),L.surroundContents(M),L.insertNode(M),(0,S.Hc)(L),Tt(w,M);var Q=w.wysiwyg.popover.querySelectorAll("input");Q[0].value=M.innerText,Q[1].focus()}I=!1,y.classList.add("vditor-menu--current")}else if(j==="table"){var re='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(L.toString().trim()==="")W&&W.innerHTML.trim().replace(f.g.ZWSP,"")===""?W.outerHTML=re:document.execCommand("insertHTML",!1,re),L.selectNode(w.wysiwyg.element.querySelector("wbr").previousSibling),w.wysiwyg.element.querySelector("wbr").remove(),(0,S.Hc)(L);else{re='<table data-block="0"><thead><tr>';var ne=L.toString().split(`
`),Z=ne[0].split(",").length>ne[0].split("	").length?",":"	";ne.forEach(function(Ce,Ue){Ue===0?(Ce.split(Z).forEach(function(Oe,Ie){re+=Ie===0?"<th>"+Oe+"<wbr></th>":"<th>"+Oe+"</th>"}),re+="</tr></thead>"):(re+=Ue===1?"<tbody><tr>":"<tr>",Ce.split(Z).forEach(function(Oe){re+="<td>"+Oe+"</td>"}),re+="</tr>")}),re+="</tbody></table>",document.execCommand("insertHTML",!1,re),(0,S.ib)(w.wysiwyg.element,L)}I=!1,y.classList.add("vditor-menu--disabled")}else if(j==="line"){if(W){var le=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;W.innerHTML.trim()===""?W.outerHTML=le:W.insertAdjacentHTML("afterend",le),(0,S.ib)(w.wysiwyg.element,L)}}else if(I=!1,y.classList.add("vditor-menu--current"),j==="strike"&&(j="strikeThrough"),L.toString()!==""||j!=="bold"&&j!=="italic"&&j!=="strikeThrough")document.execCommand(j,!1,"");else{var ye="strong";j==="italic"?ye="em":j==="strikeThrough"&&(ye="s"),(M=document.createElement(ye)).textContent=f.g.ZWSP,L.insertNode(M),M.previousSibling&&M.previousSibling.textContent===f.g.ZWSP&&(M.previousSibling.textContent=""),L.setStart(M.firstChild,1),L.collapse(!0),(0,S.Hc)(L)}}I&&Xe(w),B&&Ee(w)}}(e,o.element.children[0],E):e.currentMode==="ir"?pr(e,o.element.children[0],t.prefix||"",t.suffix||""):nr(e,o.element.children[0],t.prefix||"",t.suffix||""))})},Qn=(We=function(e,t){return We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},We(e,t)},function(e,t){function n(){this.constructor=e}We(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),Je=function(e,t,n){var o;if(typeof n!="string"?(k(e,["subToolbar","hint"]),n.preventDefault(),o=p(e)):o=n,e.currentMode!==t||typeof n=="string"){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",g(e.toolbar.elements,f.g.EDIT_TOOLBARS),s(e.toolbar.elements,f.g.EDIT_TOOLBARS),b(e.toolbar.elements,["outdent","indent"]),t==="ir")C(e.toolbar.elements,["both"]),T(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(o),Ve(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),ue(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(i){Le(i,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(i){(0,ve.H)(i,{cdn:e.options.cdn,math:e.options.preview.math})});else if(t==="wysiwyg")C(e.toolbar.elements,["both"]),T(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",ue(e),Yt(e,o,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(i){(0,ve.H)(i,{cdn:e.options.cdn,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){T(e.toolbar.elements,["both"]),C(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var r=en(o,e);r==="<div data-block='0'></div>"&&(r=""),e.sv.element.innerHTML=r,De(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),ue(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),et(e)),he(e),be(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(i){i.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+e.currentMode+'"]').classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable)}},er=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");return i.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow"),i.innerHTML='<button data-mode="wysiwyg">'+window.VditorI18n.wysiwyg+" &lt;"+(0,l.ns)("\u2325\u23187")+`></button>
<button data-mode="ir">`+window.VditorI18n.instantRendering+" &lt;"+(0,l.ns)("\u2325\u23188")+`></button>
<button data-mode="sv">`+window.VditorI18n.splitView+" &lt;"+(0,l.ns)("\u2325\u23189")+"></button>",r.element.appendChild(i),r._bindEvent(n,i,o),r}return Qn(t,e),t.prototype._bindEvent=function(n,o,r){var i=this.element.children[0];x(n,o,i,r.level),o.children.item(0).addEventListener((0,l.Le)(),function(a){Je(n,"wysiwyg",a),a.preventDefault(),a.stopPropagation()}),o.children.item(1).addEventListener((0,l.Le)(),function(a){Je(n,"ir",a),a.preventDefault(),a.stopPropagation()}),o.children.item(2).addEventListener((0,l.Le)(),function(a){Je(n,"sv",a),a.preventDefault(),a.stopPropagation()})},t}(Se),pt=function(e,t){return(0,S.Gb)(e,t)?getSelection().toString():""},Lt=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(p(e)),k(e,["subToolbar","hint"])})},$t=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&(0,G.E)(n.target,e.options.lang,e.options.theme)})},At=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var o=e.ir.element.querySelector(".vditor-ir__node--expand");o&&o.classList.remove("vditor-ir__node--expand")}else e.currentMode!=="wysiwyg"||e.wysiwyg.selectPopover.contains(n.relatedTarget)||e.wysiwyg.hideComment();e[e.currentMode].range=(0,S.zh)(e),e.options.blur&&e.options.blur(p(e))})},Mt=function(e,t){t.addEventListener("dragstart",function(n){n.dataTransfer.setData(f.g.DROP_EDITOR,f.g.DROP_EDITOR)}),t.addEventListener("drop",function(n){n.dataTransfer.getData(f.g.DROP_EDITOR)?ce(e):(n.dataTransfer.types.includes("Files")||n.dataTransfer.types.includes("text/html"))&&kt(e,n,{pasteCode:function(o){document.execCommand("insertHTML",!1,o)}})})},Ht=function(e,t,n){t.addEventListener("copy",function(o){return n(o,e)})},Nt=function(e,t,n){t.addEventListener("cut",function(o){n(o,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},Ae=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),e.options.typewriterMode){var t=e[e.currentMode].element,n=(0,S.Ny)(t).top;e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},Dt=function(e,t){t.addEventListener("keydown",function(n){if(!(e.options.hint.extend.length>1||e.toolbar.elements.emoji)||!e.hint.select(n,e)){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||R("\u2318X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(function(r,i){var a,h,E,w,y;if(r.sv.composingLock=i.isComposing,i.isComposing||(i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,l.yl)(i)&&i.key!=="Escape"))return!1;var A=(0,S.zh)(r),I=A.startContainer;A.startContainer.nodeType!==3&&A.startContainer.tagName==="DIV"&&(I=A.startContainer.childNodes[A.startOffset-1]);var B=(0,v.a1)(I,"data-type","text"),L=(0,v.a1)(I,"data-type","blockquote-marker");if(!L&&A.startOffset===0&&B&&B.previousElementSibling&&B.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(L=B.previousElementSibling),L&&i.key==="Enter"&&!(0,l.yl)(i)&&!i.altKey&&L.nextElementSibling.textContent.trim()===""&&(0,S.im)(L,r.sv.element,A).start===L.textContent.length)return((a=L.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-type"))==="padding"&&L.previousElementSibling.setAttribute("data-action","enter-remove"),L.remove(),De(r),i.preventDefault(),!0;var j=(0,v.a1)(I,"data-type","li-marker"),K=(0,v.a1)(I,"data-type","task-marker"),F=j;if(F||K&&K.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(F=K),F||A.startOffset!==0||!B||!B.previousElementSibling||B.previousElementSibling.getAttribute("data-type")!=="li-marker"&&B.previousElementSibling.getAttribute("data-type")!=="task-marker"||(F=B.previousElementSibling),F){var W=(0,S.im)(F,r.sv.element,A).start,V=F.getAttribute("data-type")==="task-marker",M=F;if(V&&(M=F.previousElementSibling.previousElementSibling.previousElementSibling),W===F.textContent.length){if(i.key==="Enter"&&!(0,l.yl)(i)&&!i.altKey&&!i.shiftKey&&F.nextElementSibling.textContent.trim()==="")return((h=M.previousElementSibling)===null||h===void 0?void 0:h.getAttribute("data-type"))==="padding"?(M.previousElementSibling.remove(),ae(r)):(V&&(M.remove(),F.previousElementSibling.previousElementSibling.remove(),F.previousElementSibling.remove()),F.nextElementSibling.remove(),F.remove(),De(r)),i.preventDefault(),!0;if(i.key==="Tab")return M.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+M.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(M.textContent)&&(M.textContent=M.textContent.replace(/^\d{1,}/,"1"),A.selectNodeContents(F.firstChild),A.collapse(!1)),ae(r),i.preventDefault(),!0}}if(Bt(r,A,i))return!0;var X=(0,v.a1)(I,"data-block","0"),oe=(0,N.S)(I,"SPAN");if(i.key==="Enter"&&!(0,l.yl)(i)&&!i.altKey&&!i.shiftKey&&X){var Q=!1,re=X.textContent.match(/^\n+/);(0,S.im)(X,r.sv.element).start<=(re?re[0].length:0)&&(Q=!0);var ne=`
`;if(oe){if(((E=oe.previousElementSibling)===null||E===void 0?void 0:E.getAttribute("data-action"))==="enter-remove")return oe.previousElementSibling.remove(),De(r),i.preventDefault(),!0;ne+=tr(oe)}return A.insertNode(document.createTextNode(ne)),A.collapse(!1),X&&X.textContent.trim()!==""&&!Q?ae(r):De(r),i.preventDefault(),!0}if(i.key==="Backspace"&&!(0,l.yl)(i)&&!i.altKey&&!i.shiftKey){if(oe&&((w=oe.previousElementSibling)===null||w===void 0?void 0:w.getAttribute("data-type"))==="newline"&&(0,S.im)(oe,r.sv.element,A).start===1&&oe.getAttribute("data-type").indexOf("code-block-")===-1)return A.setStart(oe,0),A.extractContents(),oe.textContent.trim()!==""?ae(r):De(r),i.preventDefault(),!0;if(X&&(0,S.im)(X,r.sv.element,A).start===0&&X.previousElementSibling){A.extractContents();var Z=X.previousElementSibling.lastElementChild;return Z.getAttribute("data-type")==="newline"&&(Z.remove(),Z=X.previousElementSibling.lastElementChild),Z.getAttribute("data-type")!=="newline"&&(Z.insertAdjacentHTML("afterend",X.innerHTML),X.remove()),X.textContent.trim()===""||((y=X.previousElementSibling)===null||y===void 0?void 0:y.querySelector('[data-type="code-block-open-marker"]'))?(Z.getAttribute("data-type")!=="newline"&&(A.selectNodeContents(Z.lastChild),A.collapse(!1)),De(r)):ae(r),i.preventDefault(),!0}}return!1}(e,n))return}else if(e.currentMode==="wysiwyg"){if(function(r,i){if(r.wysiwyg.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i);var a=(0,S.zh)(r),h=a.startContainer;if(!on(i,r,h)||(an(a,r,i),kn(a),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,l.yl)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var E=(0,v.F9)(h),w=(0,v.lG)(h,"P");if(pn(i,r,w,a)||cn(a,r,w,i)||hn(r,i,a))return!0;var y=(0,v.fb)(h,"vditor-wysiwyg__block");if(y){if(i.key==="Escape"&&y.children.length===2)return r.wysiwyg.popover.style.display="none",y.firstElementChild.style.display="none",r.wysiwyg.element.blur(),i.preventDefault(),!0;if(!(0,l.yl)(i)&&!i.shiftKey&&i.altKey&&i.key==="Enter"&&y.getAttribute("data-type")==="code-block"){var A=r.wysiwyg.popover.querySelector(".vditor-input");return A.focus(),A.select(),i.preventDefault(),!0}if(y.getAttribute("data-block")==="0"&&(gn(r,i,y.firstElementChild,a)||ut(r,i,a,y.firstElementChild,y)||y.getAttribute("data-type")!=="yaml-front-matter"&&tt(r,i,a,y.firstElementChild,y)))return!0}if(bn(r,a,i,w))return!0;var I=(0,v.E2)(h,"BLOCKQUOTE");if(I&&!i.shiftKey&&i.altKey&&i.key==="Enter"){(0,l.yl)(i)?a.setStartBefore(I):a.setStartAfter(I),(0,S.Hc)(a);var B=document.createElement("p");return B.setAttribute("data-block","0"),B.innerHTML=`
`,a.insertNode(B),a.collapse(!0),(0,S.Hc)(a),Ee(r),Ae(r),i.preventDefault(),!0}var L,j=(0,N.W)(h);if(j){if(j.tagName==="H6"&&h.textContent.length===a.startOffset&&!(0,l.yl)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Enter"){var K=document.createElement("p");return K.textContent=`
`,K.setAttribute("data-block","0"),h.parentElement.insertAdjacentElement("afterend",K),a.setStart(K,0),(0,S.Hc)(a),Ee(r),Ae(r),i.preventDefault(),!0}var F;if(R("\u2318=",i))return(F=parseInt(j.tagName.substr(1),10)-1)>0&&(ft(r,"h"+F),Ee(r)),i.preventDefault(),!0;if(R("\u2318-",i))return(F=parseInt(j.tagName.substr(1),10)+1)<7&&(ft(r,"h"+F),Ee(r)),i.preventDefault(),!0;i.key!=="Backspace"||(0,l.yl)(i)||i.shiftKey||i.altKey||j.textContent.length!==1||Ct(r)}if(yn(r,a,i))return!0;if(i.altKey&&i.key==="Enter"&&!(0,l.yl)(i)&&!i.shiftKey){var W=(0,v.lG)(h,"A"),V=(0,v.a1)(h,"data-type","link-ref"),M=(0,v.a1)(h,"data-type","footnotes-ref");if(W||V||M||j&&j.tagName.length===2){var X=r.wysiwyg.popover.querySelector("input");X.focus(),X.select()}}if(je(r,i))return!0;if(R("\u21E7\u2318U",i)&&(L=r.wysiwyg.popover.querySelector('[data-type="up"]'))||R("\u21E7\u2318D",i)&&(L=r.wysiwyg.popover.querySelector('[data-type="down"]')))return L.click(),i.preventDefault(),!0;if(Bt(r,a,i))return!0;if(!(0,l.yl)(i)&&i.shiftKey&&!i.altKey&&i.key==="Enter"&&h.parentElement.tagName!=="LI"&&h.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(h.parentElement.tagName)?a.insertNode(document.createTextNode(`
`+f.g.ZWSP)):a.insertNode(document.createTextNode(`
`)),a.collapse(!1),(0,S.Hc)(a),Ee(r),Ae(r),i.preventDefault(),!0;if(i.key==="Backspace"&&!(0,l.yl)(i)&&!i.shiftKey&&!i.altKey&&a.toString()===""){if(wn(r,a,i,w))return!0;if(E){if(E.previousElementSibling&&E.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&E.previousElementSibling.getAttribute("data-block")==="0"&&E.tagName!=="UL"&&E.tagName!=="OL"){var oe=(0,S.im)(E,r.wysiwyg.element,a).start;if(oe===0&&a.startOffset===0||oe===1&&E.innerText.startsWith(f.g.ZWSP))return dt(E.previousElementSibling.lastElementChild,r,!1),E.innerHTML.trim().replace(f.g.ZWSP,"")===""&&(E.remove(),Ee(r)),i.preventDefault(),!0}var Q=a.startOffset;if(a.toString()===""&&h.nodeType===3&&h.textContent.charAt(Q-2)===`
`&&h.textContent.charAt(Q-1)!==f.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(h.parentElement.tagName))return h.textContent=h.textContent.substring(0,Q-1)+f.g.ZWSP,a.setStart(h,Q),a.collapse(!0),Ee(r),i.preventDefault(),!0;h.textContent===f.g.ZWSP&&a.startOffset===1&&!h.previousSibling&&function(ne){for(var Z=ne.startContainer.nextSibling;Z&&Z.textContent==="";)Z=Z.nextSibling;return!(!Z||Z.nodeType===3||Z.tagName!=="CODE"&&Z.getAttribute("data-type")!=="math-inline"&&Z.getAttribute("data-type")!=="html-entity"&&Z.getAttribute("data-type")!=="html-inline")}(a)&&(h.textContent=""),E.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(ne){ne.firstElementChild.style.display="inline",ne.lastElementChild.style.display="none"}),E.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(ne){ne.firstElementChild.style.display="inline",ne.lastElementChild.style.display="none"})}}if((0,l.vU)()&&a.startOffset===1&&h.textContent.indexOf(f.g.ZWSP)>-1&&h.previousSibling&&h.previousSibling.nodeType!==3&&h.previousSibling.tagName==="CODE"&&(i.key==="Backspace"||i.key==="ArrowLeft"))return a.selectNodeContents(h.previousSibling),a.collapse(!1),i.preventDefault(),!0;if(En(i,E,a))return i.preventDefault(),!0;if(ln(a,i.key),i.key==="ArrowDown"){var re=h.nextSibling;re&&re.nodeType!==3&&re.getAttribute("data-type")==="math-inline"&&a.setStartAfter(re)}return!(!E||!H(E,r,i,a)||(i.preventDefault(),0))}(e,n))return}else if(e.currentMode==="ir"&&function(r,i){if(r.ir.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i);var a=(0,S.zh)(r),h=a.startContainer;if(!on(i,r,h)||(an(a,r,i),kn(a),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,l.yl)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var E=(0,v.a1)(h,"data-newline","1");if(!(0,l.yl)(i)&&!i.altKey&&!i.shiftKey&&i.key==="Enter"&&E&&a.startOffset<E.textContent.length){var w=E.previousElementSibling;w&&(a.insertNode(document.createTextNode(w.textContent)),a.collapse(!1));var y=E.nextSibling;y&&(a.insertNode(document.createTextNode(y.textContent)),a.collapse(!0))}var A=(0,v.lG)(h,"P");if(pn(i,r,A,a)||cn(a,r,A,i)||bn(r,a,i,A))return!0;var I=(0,v.fb)(h,"vditor-ir__marker--pre");if(I&&I.tagName==="PRE"){var B=I.firstChild;if(gn(r,i,I,a)||(B.getAttribute("data-type")==="math-block"||B.getAttribute("data-type")==="html-block")&&tt(r,i,a,B,I.parentElement)||ut(r,i,a,B,I.parentElement))return!0}var L=(0,v.a1)(h,"data-type","code-block-info");if(L){if(i.key==="Enter"||i.key==="Tab")return a.selectNodeContents(L.nextElementSibling.firstChild),a.collapse(!0),i.preventDefault(),k(r,["hint"]),!0;if(i.key==="Backspace"){var j=(0,S.im)(L,r.ir.element).start;j===1&&a.setStart(h,0),j===2&&(r.hint.recentLanguage="")}if(tt(r,i,a,L,L.parentElement))return k(r,["hint"]),!0}var K=(0,v.lG)(h,"TD")||(0,v.lG)(h,"TH");if(i.key.indexOf("Arrow")>-1&&K){var F=dr(K);if(F&&tt(r,i,a,K,F))return!0;var W=cr(K);if(W&&ut(r,i,a,K,W))return!0}if(hn(r,i,a)||yn(r,a,i)||Bt(r,a,i))return!0;var V=(0,N.W)(h);if(V){var M;if(R("\u2318=",i))return(M=V.querySelector(".vditor-ir__marker--heading"))&&M.textContent.trim().length>1&&mt(r,M.textContent.substr(1)),i.preventDefault(),!0;if(R("\u2318-",i))return(M=V.querySelector(".vditor-ir__marker--heading"))&&M.textContent.trim().length<6&&mt(r,M.textContent.trim()+"# "),i.preventDefault(),!0}var X=(0,v.F9)(h);if(i.key==="Backspace"&&!(0,l.yl)(i)&&!i.shiftKey&&!i.altKey&&a.toString()===""){if(wn(r,a,i,A))return!0;if(X&&X.previousElementSibling&&X.tagName!=="UL"&&X.tagName!=="OL"&&(X.previousElementSibling.getAttribute("data-type")==="code-block"||X.previousElementSibling.getAttribute("data-type")==="math-block")){var oe=(0,S.im)(X,r.ir.element,a).start;if(oe===0||oe===1&&X.innerText.startsWith(f.g.ZWSP))return a.selectNodeContents(X.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),a.collapse(!1),D(a,r),X.textContent.trim().replace(f.g.ZWSP,"")===""&&(X.remove(),Ve(r)),i.preventDefault(),!0}if(V){var Q=V.firstElementChild.textContent.length;(0,S.im)(V,r.ir.element).start===Q&&(a.setStart(V.firstElementChild.firstChild,Q-1),a.collapse(!0),(0,S.Hc)(a))}}return!((i.key!=="ArrowUp"&&i.key!=="ArrowDown"||!X||(X.querySelectorAll(".vditor-ir__node").forEach(function(re){re.contains(h)||re.classList.add("vditor-ir__node--hidden")}),!En(i,X,a)))&&(ln(a,i.key),!X||!H(X,r,i,a)||(i.preventDefault(),0)))}(e,n))return;if(e.options.ctrlEnter&&R("\u2318Enter",n))return e.options.ctrlEnter(p(e)),void n.preventDefault();if(R("\u2318Z",n)&&!e.toolbar.elements.undo)return e.undo.undo(e),void n.preventDefault();if(R("\u2318Y",n)&&!e.toolbar.elements.redo)return e.undo.redo(e),void n.preventDefault();if(n.key==="Escape")return e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(p(e)),void n.preventDefault();if((0,l.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var o=n.code.replace("Digit","H");(0,v.lG)(getSelection().getRangeAt(0).startContainer,o)?Ct(e):ft(e,o),Ee(e)}else e.currentMode==="sv"?tn(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&mt(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if((0,l.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?Je(e,"wysiwyg",n):n.code==="Digit8"?Je(e,"ir",n):n.code==="Digit9"&&Je(e,"sv",n),!0;e.options.toolbar.find(function(r){return!r.hotkey||r.toolbar?!!r.toolbar&&!!r.toolbar.find(function(i){return!!i.hotkey&&(R(i.hotkey,n)?(e.toolbar.elements[i.name].children[0].dispatchEvent(new CustomEvent((0,l.Le)())),n.preventDefault(),!0):void 0)}):R(r.hotkey,n)?(e.toolbar.elements[r.name].children[0].dispatchEvent(new CustomEvent((0,l.Le)())),n.preventDefault(),!0):void 0})}})},Ot=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var o=pt(e[e.currentMode].element);o.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&((0,v.a1)(n.target,"data-type","footnotes-block")||(0,v.a1)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.hideComment():e.wysiwyg.showComment()),e.options.select&&e.options.select(o)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},Qt=function(e,t){var n=(0,S.zh)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var o=(0,v.a1)(n.startContainer,"data-block","0");o||(o=e.sv.element);var r="<div data-block='0'>"+e.lute.Md2VditorSVDOM(o.textContent).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>";o.isEqualNode(e.sv.element)?o.innerHTML=r:o.outerHTML=r,(0,S.ib)(e.sv.element,n),Ae(e)},vt=function(e,t,n){n===void 0&&(n=!0);var o=e;for(o.nodeType===3&&(o=o.parentElement);o;){if(o.getAttribute("data-type")===t)return o;o=n?o.previousElementSibling:o.nextElementSibling}return!1},en=function(e,t){return P("SpinVditorSVDOM",e,"argument",t.options.debugger),e="<div data-block='0'>"+t.lute.SpinVditorSVDOM(e).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",P("SpinVditorSVDOM",e,"result",t.options.debugger),e},tr=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,o=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",r=!1;for(t==="newline"&&(r=!0);n&&!r;){var i=n.getAttribute("data-type");if(i==="li-marker"||i==="blockquote-marker"||i==="task-marker"||i==="padding"){var a=n.textContent;if(i!=="li-marker"||t!=="code-block-open-marker"&&t!=="code-block-info")if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var h=vt(e,"code-block-open-marker");h&&h.previousElementSibling&&(n=h.previousElementSibling,o=a+o)}else o=a+o;else o=a.replace(/\S/g," ")+o}else i==="newline"&&(r=!0);n=n.previousElementSibling}return o},De=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,l.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},tn=function(e,t){var n=(0,S.zh)(e),o=(0,N.S)(n.startContainer,"SPAN");o&&o.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},nr=function(e,t,n,o){var r=(0,S.zh)(e),i=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,S.ib)(e.sv.element,r));var a=(0,v.F9)(r.startContainer),h=(0,N.S)(r.startContainer,"SPAN");if(a){if(i==="link"){var E=void 0;return E=r.toString()===""?""+n+Lute.Caret+o:""+n+r.toString()+o.replace(")",Lute.Caret+")"),void document.execCommand("insertHTML",!1,E)}if(i==="italic"||i==="bold"||i==="strike"||i==="inline-code"||i==="code"||i==="table"||i==="line")return E=void 0,E=r.toString()===""?""+n+Lute.Caret+(i==="code"?"":o):""+n+r.toString()+Lute.Caret+(i==="code"?"":o),i==="table"||i==="code"&&h&&h.textContent!==""?E=`

`+E:i==="line"&&(E=`

`+n+`
`+Lute.Caret),void document.execCommand("insertHTML",!1,E);if((i==="check"||i==="list"||i==="ordered-list"||i==="quote")&&h){var w="* ";i==="check"?w="* [ ] ":i==="ordered-list"?w="1. ":i==="quote"&&(w="> ");var y=vt(h,"newline");return y?y.insertAdjacentText("afterend",w):a.insertAdjacentText("afterbegin",w),void ae(e)}(0,S.ib)(e.sv.element,r),De(e)}},nn=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},rn=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},rr=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(w){try{E(o.next(w))}catch(y){i(y)}}function h(w){try{E(o.throw(w))}catch(y){i(y)}}function E(w){var y;w.done?r(w.value):(y=w.value,y instanceof n?y:new n(function(A){A(y)})).then(a,h)}E((o=o.apply(e,t||[])).next())})},or=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function h(E){return function(w){return function(y){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&y[0]?o.return:y[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,y[1])).done)return r;switch(o=0,r&&(y=[2&y[0],r.value]),y[0]){case 0:case 1:r=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,o=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||y[0]!==6&&y[0]!==2)){a=0;continue}if(y[0]===3&&(!r||y[1]>r[0]&&y[1]<r[3])){a.label=y[1];break}if(y[0]===6&&a.label<r[1]){a.label=r[1],r=y;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(y);break}r[2]&&a.ops.pop(),a.trys.pop();continue}y=t.call(e,a)}catch(A){y=[6,A],o=0}finally{n=r=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([E,w])}}},ir=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},jt=function(e,t,n){return rr(void 0,void 0,void 0,function(){var o,r,i,a,h,E,w,y,A,I,B,L,j,K;return or(this,function(F){switch(F.label){case 0:for(o=[],r=e.options.upload.multiple===!0?t.length:1,L=0;L<r;L++)(i=t[L])instanceof DataTransferItem&&(i=i.getAsFile()),o.push(i);return e.options.upload.handler?[4,e.options.upload.handler(o)]:[3,2];case 1:return a=F.sent(),n&&(n.value=""),typeof a=="string"?(e.tip.show(a),[2]):[2];case 2:return e.options.upload.url&&e.upload?e.options.upload.file?[4,e.options.upload.file(o)]:[3,4]:(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]);case 3:o=F.sent(),F.label=4;case 4:if(e.options.upload.validate&&typeof(a=e.options.upload.validate(o))=="string")return e.tip.show(a),[2];if(h=nn(e),e.upload.range=(0,S.zh)(e),E=function(W,V){W.tip.hide();for(var M=[],X="",oe="",Q=(W.options.lang,W.options,function(Z,le){var ye=V[le],Ce=!0;ye.name||(X+="<li>"+window.VditorI18n.nameEmpty+"</li>",Ce=!1),ye.size>W.options.upload.max&&(X+="<li>"+ye.name+" "+window.VditorI18n.over+" "+W.options.upload.max/1024/1024+"M</li>",Ce=!1);var Ue=ye.name.lastIndexOf("."),Oe=ye.name.substr(Ue),Ie=W.options.upload.filename(ye.name.substr(0,Ue))+Oe;W.options.upload.accept&&(W.options.upload.accept.split(",").some(function(Me){var nt=Me.trim();if(nt.indexOf(".")===0){if(Oe.toLowerCase()===nt.toLowerCase())return!0}else if(ye.type.split("/")[0]===nt.split("/")[0])return!0;return!1})||(X+="<li>"+ye.name+" "+window.VditorI18n.fileTypeError+"</li>",Ce=!1)),Ce&&(M.push(ye),oe+="<li>"+Ie+" "+window.VditorI18n.uploading+"</li>")}),re=V.length,ne=0;ne<re;ne++)Q(0,ne);return W.tip.show("<ul>"+X+oe+"</ul>"),M}(e,o),E.length===0)return n&&(n.value=""),[2];for(w=new FormData,y=e.options.upload.extraData,A=0,I=Object.keys(y);A<I.length;A++)B=I[A],w.append(B,y[B]);for(L=0,j=E.length;L<j;L++)w.append(e.options.upload.fieldName,E[L]);return(K=new XMLHttpRequest).open("POST",e.options.upload.url),e.options.upload.token&&K.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(K.withCredentials=!0),rn(e,K),e.upload.isUploading=!0,h.setAttribute("contenteditable","false"),K.onreadystatechange=function(){if(K.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,h.setAttribute("contenteditable","true"),K.status>=200&&K.status<300)if(e.options.upload.success)e.options.upload.success(h,K.responseText);else{var W=K.responseText;e.options.upload.format&&(W=e.options.upload.format(t,K.responseText)),function(V,M){nn(M).focus();var X=JSON.parse(V),oe="";X.code===1&&(oe=""+X.msg),X.data.errFiles&&X.data.errFiles.length>0&&(oe="<ul><li>"+oe+"</li>",X.data.errFiles.forEach(function(re){var ne=re.lastIndexOf("."),Z=M.options.upload.filename(re.substr(0,ne))+re.substr(ne);oe+="<li>"+Z+" "+window.VditorI18n.uploadError+"</li>"}),oe+="</ul>"),oe?M.tip.show(oe):M.tip.hide();var Q="";Object.keys(X.data.succMap).forEach(function(re){var ne=X.data.succMap[re],Z=re.lastIndexOf("."),le=re.substr(Z),ye=M.options.upload.filename(re.substr(0,Z))+le;(le=le.toLowerCase()).indexOf(".wav")===0||le.indexOf(".mp3")===0||le.indexOf(".ogg")===0?M.currentMode==="wysiwyg"?Q+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`+ne+'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="'+ne+`"></audio></pre></div>
`:M.currentMode==="ir"?Q+='<audio controls="controls" src="'+ne+`"></audio>
`:Q+="["+ye+"]("+ne+`)
`:le.indexOf(".apng")===0||le.indexOf(".bmp")===0||le.indexOf(".gif")===0||le.indexOf(".ico")===0||le.indexOf(".cur")===0||le.indexOf(".jpg")===0||le.indexOf(".jpeg")===0||le.indexOf(".jfif")===0||le.indexOf(".pjp")===0||le.indexOf(".pjpeg")===0||le.indexOf(".png")===0||le.indexOf(".svg")===0||le.indexOf(".webp")===0?M.currentMode==="wysiwyg"?Q+='<img alt="'+ye+'" src="'+ne+`">
`:Q+="!["+ye+"]("+ne+`)
`:M.currentMode==="wysiwyg"?Q+='<a href="'+ne+'">'+ye+`</a>
`:Q+="["+ye+"]("+ne+`)
`}),(0,S.Hc)(M.upload.range),document.execCommand("insertHTML",!1,Q),M.upload.range=getSelection().getRangeAt(0).cloneRange()}(W,e)}else e.options.upload.error?e.options.upload.error(K.responseText):e.tip.show(K.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},K.upload.onprogress=function(W){if(W.lengthComputable){var V=W.loaded/W.total*100;e.upload.element.style.display="block",e.upload.element.style.width=V+"%"}},K.send(w),[2]}})})},ht=function(e,t,n){var o,r=(0,v.F9)(t.startContainer);if(r||(r=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var i=function(V){for(var M=V.previousSibling;M;){if(M.nodeType!==3&&M.tagName==="A"&&!M.previousSibling&&M.innerHTML.replace(f.g.ZWSP,"")===""&&M.nextSibling)return M;M=M.previousSibling}return!1}(t.startContainer);i&&i.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(V){V.remove()}),t.insertNode(document.createElement("wbr")),r.querySelectorAll("[style]").forEach(function(V){V.removeAttribute("style")}),r.querySelectorAll(".vditor-comment").forEach(function(V){V.textContent.trim()===""&&(V.classList.remove("vditor-comment","vditor-comment--focus"),V.removeAttribute("data-cmtids"))}),(o=r.previousElementSibling)===null||o===void 0||o.querySelectorAll(".vditor-comment").forEach(function(V){V.textContent.trim()===""&&(V.classList.remove("vditor-comment","vditor-comment--focus"),V.removeAttribute("data-cmtids"))});var a="";r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.wysiwyg.element);var h,E=r.isEqualNode(e.wysiwyg.element),w=(0,v.a1)(r,"data-type","footnotes-block");if(E)a=r.innerHTML;else{var y=(0,v.O9)(t.startContainer);if(y&&!w){var A=(0,N.S)(t.startContainer,"BLOCKQUOTE");r=A?(0,v.F9)(t.startContainer)||r:y}if(w&&(r=w),a=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var I=r.previousElementSibling,B=r.nextElementSibling;!I||I.tagName!=="UL"&&I.tagName!=="OL"||(a=I.outerHTML+a,I.remove()),!B||B.tagName!=="UL"&&B.tagName!=="OL"||(a+=B.outerHTML,B.remove()),a=a.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(V){V&&!r.isEqualNode(V)&&(a+=V.outerHTML,V.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(V){V&&!r.isEqualNode(V)&&(a+=V.outerHTML,V.remove())})}if((a=a.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(a='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),P("SpinVditorDOM",a,"argument",e.options.debugger),a=e.lute.SpinVditorDOM(a),P("SpinVditorDOM",a,"result",e.options.debugger),E)r.innerHTML=a;else if(r.outerHTML=a,w){var L=(0,v.E2)(e.wysiwyg.element.querySelector("wbr"),"LI");if(L){var j=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+L.getAttribute("data-marker")+'"]');j&&j.setAttribute("aria-label",L.textContent.trim().substr(0,24))}}var K,F=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");F.forEach(function(V,M){M===0?h=V:(h.insertAdjacentHTML("beforeend",V.innerHTML),V.remove())}),F.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",F[0]);var W=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");W.forEach(function(V,M){M===0?K=V:(K.insertAdjacentHTML("beforeend",V.innerHTML),V.remove())}),W.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",W[0]),(0,S.ib)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(V){Le(V,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}he(e),Ee(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},ar=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},lr=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(w){try{E(o.next(w))}catch(y){i(y)}}function h(w){try{E(o.throw(w))}catch(y){i(y)}}function E(w){var y;w.done?r(w.value):(y=w.value,y instanceof n?y:new n(function(A){A(y)})).then(a,h)}E((o=o.apply(e,t||[])).next())})},sr=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function h(E){return function(w){return function(y){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&y[0]?o.return:y[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,y[1])).done)return r;switch(o=0,r&&(y=[2&y[0],r.value]),y[0]){case 0:case 1:r=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,o=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||y[0]!==6&&y[0]!==2)){a=0;continue}if(y[0]===3&&(!r||y[1]>r[0]&&y[1]<r[3])){a.label=y[1];break}if(y[0]===6&&a.label<r[1]){a.label=r[1],r=y;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(y);break}r[2]&&a.ops.pop(),a.trys.pop();continue}y=t.call(e,a)}catch(A){y=[6,A],o=0}finally{n=r=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([E,w])}}},on=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var o=(0,v.F9)(n);if(o&&o.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},an=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||(0,l.yl)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var o=(0,v.lG)(e.startContainer,"P")||(0,v.lG)(e.startContainer,"LI");if(o&&(0,S.im)(o,t[t.currentMode].element,e).start===0){var r=document.createTextNode(f.g.ZWSP);e.insertNode(r),e.setStartAfter(r)}}},ln=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=(0,v.a1)(e.startContainer,"data-type","math-inline")||(0,v.a1)(e.startContainer,"data-type","html-entity")||(0,v.a1)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},gt=function(e,t){var n=(0,S.zh)(e),o=(0,v.F9)(n.startContainer);o&&(o.insertAdjacentHTML(t,'<p data-block="0">'+f.g.ZWSP+`<wbr>
</p>`),(0,S.ib)(e[e.currentMode].element,n),et(e),ce(e))},dr=function(e){var t=(0,v.lG)(e,"TABLE");return!(!t||!t.rows[0].cells[0].isSameNode(e))&&t},cr=function(e){var t=(0,v.lG)(e,"TABLE");return!(!t||!t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e))&&t},sn=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling;return o||(o=e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null),o&&(t.selectNodeContents(o),n||t.collapse(!1),(0,S.Hc)(t)),o},ut=function(e,t,n,o,r){var i=(0,S.im)(o,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&o.textContent.trimRight().substr(i.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&i.start>=o.textContent.trimRight().length){var a=r.nextElementSibling;return!a||a&&(a.tagName==="TABLE"||a.getAttribute("data-type"))?(r.insertAdjacentHTML("afterend",'<p data-block="0">'+f.g.ZWSP+"<wbr></p>"),(0,S.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(a),n.collapse(!0),(0,S.Hc)(n)),t.preventDefault(),!0}return!1},tt=function(e,t,n,o,r){var i=(0,S.im)(o,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&o.textContent.substr(0,i.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&i.start===0){var a=r.previousElementSibling;return!a||a&&(a.tagName==="TABLE"||a.getAttribute("data-type"))?(r.insertAdjacentHTML("beforebegin",'<p data-block="0">'+f.g.ZWSP+"<wbr></p>"),(0,S.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(a),n.collapse(!1),(0,S.Hc)(n)),t.preventDefault(),!0}return!1},bt=function(e,t,n,o){o===void 0&&(o=!0);var r=(0,v.lG)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(y){y.remove()}),t.insertNode(document.createElement("wbr")),o&&r){for(var i="",a=0;a<r.parentElement.childElementCount;a++){var h=r.parentElement.children[a].querySelector("input");h&&h.remove(),i+='<p data-block="0">'+r.parentElement.children[a].innerHTML.trimLeft()+"</p>"}r.parentElement.insertAdjacentHTML("beforebegin",i),r.parentElement.remove()}else if(r)if(n==="check")r.parentElement.querySelectorAll("li").forEach(function(y){y.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(y.textContent.indexOf(" ")===0?"":" ")),y.classList.add("vditor-task")});else{r.querySelector("input")&&r.parentElement.querySelectorAll("li").forEach(function(y){y.querySelector("input").remove(),y.classList.remove("vditor-task")});var E=void 0;n==="list"?(E=document.createElement("ul")).setAttribute("data-marker","*"):(E=document.createElement("ol")).setAttribute("data-marker","1."),E.setAttribute("data-block","0"),E.setAttribute("data-tight",r.parentElement.getAttribute("data-tight")),E.innerHTML=r.parentElement.innerHTML,r.parentElement.parentNode.replaceChild(E,r.parentElement)}else{var w=(0,v.a1)(t.startContainer,"data-block","0");w||(e[e.currentMode].element.querySelector("wbr").remove(),(w=e[e.currentMode].element.querySelector("p")).innerHTML="<wbr>"),n==="check"?(w.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+w.innerHTML+"</li></ul>"),w.remove()):n==="list"?(w.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+w.innerHTML+"</li></ul>"),w.remove()):n==="ordered-list"&&(w.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+w.innerHTML+"</li></ol>"),w.remove())}},dn=function(e,t,n){var o=t.previousElementSibling;if(t&&o){var r=[t];Array.from(n.cloneContents().children).forEach(function(E,w){E.nodeType!==3&&t&&E.textContent.trim()!==""&&t.getAttribute("data-node-id")===E.getAttribute("data-node-id")&&(w!==0&&r.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(E){E.remove()}),n.insertNode(document.createElement("wbr"));var i=o.parentElement,a="";r.forEach(function(E){var w=E.getAttribute("data-marker");w.length!==1&&(w="1"+w.slice(-1)),a+='<li data-node-id="'+E.getAttribute("data-node-id")+'" data-marker="'+w+'">'+E.innerHTML+"</li>",E.remove()}),o.insertAdjacentHTML("beforeend","<"+i.tagName+' data-block="0">'+a+"</"+i.tagName+">"),e.currentMode==="wysiwyg"?i.outerHTML=e.lute.SpinVditorDOM(i.outerHTML):i.outerHTML=e.lute.SpinVditorIRDOM(i.outerHTML),(0,S.ib)(e[e.currentMode].element,n);var h=(0,v.O9)(n.startContainer);h&&h.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(E){Le(E,e),e.currentMode==="wysiwyg"&&E.previousElementSibling.setAttribute("style","display:none")}),ce(e),et(e)}else e[e.currentMode].element.focus()},It=function(e,t,n,o){var r=(0,v.lG)(t.parentElement,"LI");if(r){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(A){A.remove()}),n.insertNode(document.createElement("wbr"));var i=t.parentElement,a=i.cloneNode(),h=[t];Array.from(n.cloneContents().children).forEach(function(A,I){A.nodeType!==3&&t&&A.textContent.trim()!==""&&t.getAttribute("data-node-id")===A.getAttribute("data-node-id")&&(I!==0&&h.push(t),t=t.nextElementSibling)});var E=!1,w="";i.querySelectorAll("li").forEach(function(A){E&&(w+=A.outerHTML,A.nextElementSibling||A.previousElementSibling?A.remove():A.parentElement.remove()),A.isSameNode(h[h.length-1])&&(E=!0)}),h.reverse().forEach(function(A){r.insertAdjacentElement("afterend",A)}),w&&(a.innerHTML=w,h[0].insertAdjacentElement("beforeend",a)),e.currentMode==="wysiwyg"?o.outerHTML=e.lute.SpinVditorDOM(o.outerHTML):o.outerHTML=e.lute.SpinVditorIRDOM(o.outerHTML),(0,S.ib)(e[e.currentMode].element,n);var y=(0,v.O9)(n.startContainer);y&&y.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(A){Le(A,e),e.currentMode==="wysiwyg"&&A.previousElementSibling.setAttribute("style","display:none")}),ce(e),et(e)}else e[e.currentMode].element.focus()},yt=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,o=e.rows[0].cells.length,r=e.rows.length,i=0,a=0;a<r;a++)for(var h=0;h<o;h++)if(e.rows[a].cells[h].isSameNode(n)){i=h;break}for(var E=0;E<r;E++)e.rows[E].cells[i].setAttribute("align",t)},Rt=function(e){var t=e.trimRight().split(`
`).pop();return t!==""&&(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2&&!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1)&&t.indexOf("    ")!==0&&t.indexOf("	")!==0},Pt=function(e){var t=e.trimRight().split(`
`);return(e=t.pop()).indexOf("    ")!==0&&e.indexOf("	")!==0&&(e=e.trimLeft())!==""&&t.length!==0&&(e.replace(/-/g,"")===""||e.replace(/=/g,"")==="")},ce=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?Ee(e,t):e.currentMode==="ir"?Ve(e,t):e.currentMode==="sv"&&De(e,t)},cn=function(e,t,n,o){var r,i=e.startContainer,a=(0,v.lG)(i,"LI");if(a){if(!(0,l.yl)(o)&&!o.altKey&&o.key==="Enter"&&!o.shiftKey&&n&&a.contains(n)&&n.nextElementSibling)return a&&!a.textContent.endsWith(`
`)&&a.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),ce(t),o.preventDefault(),!0;if(!((0,l.yl)(o)||o.shiftKey||o.altKey||o.key!=="Backspace"||a.previousElementSibling||e.toString()!==""||(0,S.im)(a,t[t.currentMode].element,e).start!==0))return a.nextElementSibling?(a.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+a.innerHTML+"</p>"),a.remove()):a.parentElement.outerHTML='<p data-block="0"><wbr>'+a.innerHTML+"</p>",(0,S.ib)(t[t.currentMode].element,e),ce(t),o.preventDefault(),!0;if(!(0,l.yl)(o)&&!o.shiftKey&&!o.altKey&&o.key==="Backspace"&&a.textContent.trim().replace(f.g.ZWSP,"")===""&&e.toString()===""&&((r=a.previousElementSibling)===null||r===void 0?void 0:r.tagName)==="LI")return a.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(a.previousElementSibling),e.collapse(!1),a.remove(),(0,S.ib)(t[t.currentMode].element,e),ce(t),o.preventDefault(),!0;if(!(0,l.yl)(o)&&!o.altKey&&o.key==="Tab"){var h=!1;if((e.startOffset===0&&(i.nodeType===3&&!i.previousSibling||i.nodeType!==3&&i.nodeName==="LI")||a.classList.contains("vditor-task")&&e.startOffset===1&&i.previousSibling.nodeType!==3&&i.previousSibling.tagName==="INPUT")&&(h=!0),h||e.toString()!=="")return o.shiftKey?It(t,a,e,a.parentElement):dn(t,a,e),o.preventDefault(),!0}}return!1},Bt=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,S.Hc)(t),ce(e),n.preventDefault(),!0},pn=function(e,t,n,o){if(n){if(!(0,l.yl)(e)&&!e.altKey&&e.key==="Enter"){var r=String.raw(Ft||(Ft=ar(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),i=r.split("|");if(r.startsWith("|")&&r.endsWith("|")&&i.length>3){var a=i.map(function(){return"---"}).join("|");return a=n.textContent+`
`+a.substring(3,a.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(a),(0,S.ib)(t[t.currentMode].element,o),ce(t),Ae(t),e.preventDefault(),!0}if(Rt(n.innerHTML)&&n.previousElementSibling){var h="",E=n.innerHTML.trimRight().split(`
`);return E.length>1&&(E.pop(),h='<p data-block="0">'+E.join(`
`)+"</p>"),n.insertAdjacentHTML("afterend",h+`<hr data-block="0"><p data-block="0"><wbr>
</p>`),n.remove(),(0,S.ib)(t[t.currentMode].element,o),ce(t),Ae(t),e.preventDefault(),!0}if(Pt(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,S.ib)(t[t.currentMode].element,o),ce(t),Ae(t),e.preventDefault(),!0}if(o.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!(0,l.yl)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&(0,S.im)(n,t[t.currentMode].element,o).start===0){var w=(0,v.DX)(n.previousElementSibling);return w.textContent.endsWith(`
`)||(w.textContent=w.textContent+`
`),w.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),(0,S.ib)(t[t.currentMode].element,o),!1}return!1}},un=function(e,t,n){for(var o="",r=0;r<n.parentElement.childElementCount;r++)o+='<td align="'+n.parentElement.children[r].getAttribute("align")+'"> </td>';n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+o+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+o+"</tr>"),ce(e)},mn=function(e,t,n){for(var o="",r=0;r<n.parentElement.childElementCount;r++)n.tagName==="TH"?o+='<th align="'+n.parentElement.children[r].getAttribute("align")+'"> </th>':o+='<td align="'+n.parentElement.children[r].getAttribute("align")+'"> </td>';if(n.tagName==="TH"){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+o+"</tr></thead>"),t.insertNode(document.createElement("wbr"));var i=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",i),n.parentElement.parentElement.remove(),(0,S.ib)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>"+o+"</tr>");ce(e)},wt=function(e,t,n,o){o===void 0&&(o="afterend");for(var r=0,i=n.previousElementSibling;i;)r++,i=i.previousElementSibling;for(var a=0;a<t.rows.length;a++)a===0?t.rows[a].cells[r].insertAdjacentHTML(o,"<th> </th>"):t.rows[a].cells[r].insertAdjacentHTML(o,"<td> </td>");ce(e)},fn=function(e,t,n){if(n.tagName==="TD"){var o=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(o.previousElementSibling.lastElementChild.lastElementChild),o.childElementCount===1?o.remove():n.parentElement.remove(),t.collapse(!1),(0,S.Hc)(t),ce(e)}},vn=function(e,t,n,o){for(var r=0,i=o.previousElementSibling;i;)r++,i=i.previousElementSibling;(o.previousElementSibling||o.nextElementSibling)&&(t.selectNodeContents(o.previousElementSibling||o.nextElementSibling),t.collapse(!0));for(var a=0;a<n.rows.length;a++){var h=n.rows[a].cells;if(h.length===1){n.remove(),et(e);break}h[r].remove()}(0,S.Hc)(t),ce(e)},hn=function(e,t,n){var o=n.startContainer,r=(0,v.lG)(o,"TD")||(0,v.lG)(o,"TH");if(r){if(!(0,l.yl)(t)&&!t.altKey&&t.key==="Enter"){r.lastElementChild&&(!r.lastElementChild||r.lastElementChild.isSameNode(r.lastChild)&&r.lastElementChild.tagName==="BR")||r.insertAdjacentHTML("beforeend","<br>");var i=document.createElement("br");return n.insertNode(i),n.setStartAfter(i),ce(e),Ae(e),t.preventDefault(),!0}if(t.key==="Tab")return t.shiftKey?(sn(r,n),t.preventDefault(),!0):((y=r.nextElementSibling)||(y=r.parentElement.nextElementSibling?r.parentElement.nextElementSibling.firstElementChild:r.parentElement.parentElement.tagName==="THEAD"&&r.parentElement.parentElement.nextElementSibling?r.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null),y&&(n.selectNodeContents(y),(0,S.Hc)(n)),t.preventDefault(),!0);var a=r.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),r.tagName==="TH")return a.previousElementSibling?(n.selectNodeContents(a.previousElementSibling),n.collapse(!1),(0,S.Hc)(n)):gt(e,"beforebegin"),!0;for(var h=0,E=r.parentElement;h<E.cells.length&&!E.cells[h].isSameNode(r);h++);var w=E.previousElementSibling;return w||(w=E.parentElement.previousElementSibling.firstChild),n.selectNodeContents(w.cells[h]),n.collapse(!1),(0,S.Hc)(n),!0}if(t.key==="ArrowDown"){var y;if(t.preventDefault(),!(E=r.parentElement).nextElementSibling&&r.tagName==="TD")return a.nextElementSibling?(n.selectNodeContents(a.nextElementSibling),n.collapse(!0),(0,S.Hc)(n)):gt(e,"afterend"),!0;for(h=0;h<E.cells.length&&!E.cells[h].isSameNode(r);h++);return(y=E.nextElementSibling)||(y=E.parentElement.nextElementSibling.firstChild),n.selectNodeContents(y.cells[h]),n.collapse(!0),(0,S.Hc)(n),!0}if(e.currentMode==="wysiwyg"&&!(0,l.yl)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var A=e.wysiwyg.popover.querySelector(".vditor-input");return A.focus(),A.select(),t.preventDefault(),!0}if(!(0,l.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()==="")return!sn(r,n,!1)&&a&&(a.textContent.trim()===""?(a.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,S.ib)(e[e.currentMode].element,n)):(n.setStartBefore(a),n.collapse(!0)),ce(e)),t.preventDefault(),!0;if(R("\u21E7\u2318F",t))return mn(e,n,r),t.preventDefault(),!0;if(R("\u2318=",t))return un(e,n,r),t.preventDefault(),!0;if(R("\u21E7\u2318G",t))return wt(e,a,r,"beforebegin"),t.preventDefault(),!0;if(R("\u21E7\u2318=",t))return wt(e,a,r),t.preventDefault(),!0;if(R("\u2318-",t))return fn(e,n,r),t.preventDefault(),!0;if(R("\u21E7\u2318-",t))return vn(e,n,a,r),t.preventDefault(),!0;if(R("\u21E7\u2318L",t)){if(e.currentMode==="ir")return yt(a,"left"),ce(e),t.preventDefault(),!0;if(I=e.wysiwyg.popover.querySelector('[data-type="left"]'))return I.click(),t.preventDefault(),!0}if(R("\u21E7\u2318C",t)){if(e.currentMode==="ir")return yt(a,"center"),ce(e),t.preventDefault(),!0;if(I=e.wysiwyg.popover.querySelector('[data-type="center"]'))return I.click(),t.preventDefault(),!0}if(R("\u21E7\u2318R",t)){if(e.currentMode==="ir")return yt(a,"right"),ce(e),t.preventDefault(),!0;var I;if(I=e.wysiwyg.popover.querySelector('[data-type="right"]'))return I.click(),t.preventDefault(),!0}}return!1},gn=function(e,t,n,o){if(n.tagName==="PRE"&&R("\u2318A",t))return o.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&o.toString()==="")return o.insertNode(document.createTextNode(e.options.tab)),o.collapse(!1),ce(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,l.yl)(t)&&!t.shiftKey&&!t.altKey){var r=(0,S.im)(n,e[e.currentMode].element,o);if((r.start===0||r.start===1&&n.innerText===`
`)&&o.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",(0,S.ib)(e[e.currentMode].element,o),ce(e),t.preventDefault(),!0}return!(0,l.yl)(t)&&!t.altKey&&t.key==="Enter"&&(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),o.extractContents(),o.insertNode(document.createTextNode(`
`)),o.collapse(!1),(0,S.Hc)(o),(0,l.vU)()||(e.currentMode==="wysiwyg"?ht(e,o):q(e,o)),Ae(e),t.preventDefault(),!0)},bn=function(e,t,n,o){var r=t.startContainer,i=(0,v.lG)(r,"BLOCKQUOTE");if(i&&t.toString()===""){if(n.key==="Backspace"&&!(0,l.yl)(n)&&!n.shiftKey&&!n.altKey&&(0,S.im)(i,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),i.outerHTML=i.innerHTML,(0,S.ib)(e[e.currentMode].element,t),ce(e),n.preventDefault(),!0;if(o&&n.key==="Enter"&&!(0,l.yl)(n)&&!n.shiftKey&&!n.altKey&&o.parentElement.tagName==="BLOCKQUOTE"){var a=!1;if(o.innerHTML.replace(f.g.ZWSP,"")===`
`||o.innerHTML.replace(f.g.ZWSP,"")===""?(a=!0,o.remove()):o.innerHTML.endsWith(`

`)&&(0,S.im)(o,e[e.currentMode].element,t).start===o.textContent.length-1&&(o.innerHTML=o.innerHTML.substr(0,o.innerHTML.length-2),a=!0),a)return i.insertAdjacentHTML("afterend",'<p data-block="0">'+f.g.ZWSP+`<wbr>
</p>`),(0,S.ib)(e[e.currentMode].element,t),ce(e),n.preventDefault(),!0}var h=(0,v.F9)(r);if(e.currentMode==="wysiwyg"&&h&&R("\u21E7\u2318;",n))return t.insertNode(document.createElement("wbr")),h.outerHTML='<blockquote data-block="0">'+h.outerHTML+"</blockquote>",(0,S.ib)(e.wysiwyg.element,t),Ee(e),n.preventDefault(),!0;if(ut(e,n,t,i,i)||tt(e,n,t,i,i))return!0}return!1},yn=function(e,t,n){var o=t.startContainer,r=(0,v.fb)(o,"vditor-task");if(r){if(R("\u21E7\u2318J",n)){var i=r.firstElementChild;return i.checked?i.removeAttribute("checked"):i.setAttribute("checked","checked"),ce(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!(0,l.yl)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(o.nodeType===3&&o.previousSibling&&o.previousSibling.tagName==="INPUT"||o.nodeType!==3)){var a=r.previousElementSibling;return r.querySelector("input").remove(),a?((0,v.DX)(a).parentElement.insertAdjacentHTML("beforeend","<wbr>"+r.innerHTML.trim()),r.remove()):(r.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(r.innerHTML.trim()||`
`)+"</p>"),r.nextElementSibling?r.remove():r.parentElement.remove()),(0,S.ib)(e[e.currentMode].element,t),ce(e),n.preventDefault(),!0}if(n.key==="Enter"&&!(0,l.yl)(n)&&!n.shiftKey&&!n.altKey){if(r.textContent.trim()==="")if((0,v.fb)(r.parentElement,"vditor-task")){var h=(0,v.O9)(o);h&&It(e,r,t,h)}else if(r.nextElementSibling){var E="",w="",y=!1;Array.from(r.parentElement.children).forEach(function(L){r.isSameNode(L)?y=!0:y?E+=L.outerHTML:w+=L.outerHTML});var A=r.parentElement.tagName,I=r.parentElement.tagName==="OL"?"":' data-marker="'+r.parentElement.getAttribute("data-marker")+'"',B="";w&&(B=r.parentElement.tagName==="UL"?"":' start="1"',w="<"+A+' data-tight="true"'+I+' data-block="0">'+w+"</"+A+">"),r.parentElement.outerHTML=w+`<p data-block="0"><wbr>
</p><`+A+`
 data-tight="true"`+I+' data-block="0"'+B+">"+E+"</"+A+">"}else r.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),r.parentElement.querySelectorAll("li").length===1?r.parentElement.remove():r.remove();else o.nodeType!==3&&t.startOffset===0&&o.firstChild.tagName==="INPUT"?t.setStart(o.childNodes[1],1):(t.setEndAfter(r.lastChild),r.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+r.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents()));return(0,S.ib)(e[e.currentMode].element,t),ce(e),Ae(e),n.preventDefault(),!0}}return!1},wn=function(e,t,n,o){if(t.startContainer.nodeType!==3){var r=t.startContainer.children[t.startOffset];if(r&&r.tagName==="HR")return t.selectNodeContents(r.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(o){var i=o.previousElementSibling;if(i&&(0,S.im)(o,e[e.currentMode].element,t).start===0&&((0,l.vU)()&&i.tagName==="HR"||i.tagName==="TABLE")){if(i.tagName==="TABLE"){var a=i.lastElementChild.lastElementChild.lastElementChild;a.innerHTML=a.innerHTML.trimLeft()+"<wbr>"+o.textContent.trim(),o.remove()}else i.remove();return(0,S.ib)(e[e.currentMode].element,t),ce(e),n.preventDefault(),!0}}return!1},kn=function(e){(0,l.vU)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},En=function(e,t,n){var o,r;if(!(0,l.vU)())return!1;if(e.key==="ArrowUp"&&t&&((o=t.previousElementSibling)===null||o===void 0?void 0:o.tagName)==="TABLE"){var i=t.previousElementSibling;return n.selectNodeContents(i.rows[i.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return!(e.key!=="ArrowDown"||!t||((r=t.nextElementSibling)===null||r===void 0?void 0:r.tagName)!=="TABLE")&&(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0)},kt=function(e,t,n){return lr(void 0,void 0,void 0,function(){var o,r,i,a,h,E,w,y,A,I,B,L,j,K,F,W;return sr(this,function(V){switch(V.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(o=t.clipboardData.getData("text/html"),r=t.clipboardData.getData("text/plain"),i=t.clipboardData.files):(o=t.dataTransfer.getData("text/html"),r=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(i=t.dataTransfer.items)),a={},h=function(M,X){if(!X)return["",Lute.WalkContinue];var oe=M.TokensStr();if(M.__internal_object__.Parent.Type===34&&oe&&oe.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var Q=new XMLHttpRequest;Q.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&Q.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(Q.withCredentials=!0),rn(e,Q),Q.setRequestHeader("Content-Type","application/json; charset=utf-8"),Q.onreadystatechange=function(){if(Q.readyState===XMLHttpRequest.DONE){if(Q.status===200){var re=Q.responseText;e.options.upload.linkToImgFormat&&(re=e.options.upload.linkToImgFormat(Q.responseText));var ne=JSON.parse(re);if(ne.code!==0)return void e.tip.show(ne.msg);var Z=ne.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(ye){ye.textContent===Z&&(ye.textContent=ne.data.url)});else{var le=e[e.currentMode].element.querySelector('img[src="'+Z+'"]');le.src=ne.data.url,e.currentMode==="ir"&&(le.previousElementSibling.previousElementSibling.innerHTML=ne.data.url)}ce(e)}else e.tip.show(Q.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(Q.responseText)}},Q.send(JSON.stringify({url:oe}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'+oe+"</span>",Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+oe+"</span>",Lute.WalkContinue]},o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+r+'">'+r+"</a>"&&o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<!--StartFragment--><a href="'+r+'">'+r+"</a><!--EndFragment-->"||(o=""),(E=new DOMParser().parseFromString(o,"text/html")).body&&(o=E.body.innerHTML),o=Lute.Sanitize(o),e.wysiwyg.getComments(e),w=e[e.currentMode].element.scrollHeight,y=function(M,X,oe){oe===void 0&&(oe="sv");var Q=document.createElement("div");Q.innerHTML=M;var re=!1;Q.childElementCount===1&&Q.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(re=!0);var ne=Q.querySelectorAll("pre");if(Q.childElementCount===1&&ne.length===1&&ne[0].className!=="vditor-wysiwyg"&&ne[0].className!=="vditor-sv"&&(re=!0),M.indexOf(`
<p class="p1">`)===0&&(re=!0),Q.childElementCount===1&&Q.firstElementChild.tagName==="TABLE"&&Q.querySelector(".line-number")&&Q.querySelector(".line-content")&&(re=!0),re){var Z=X||M;return/\n/.test(Z)||ne.length===1?oe==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+Z.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+Z.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":oe==="wysiwyg"?"<code>"+Z.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+Z+"`"}return!1}(o,r,e.currentMode),(A=e.currentMode==="sv"?(0,v.a1)(t.target,"data-type","code-block"):(0,v.lG)(t.target,"CODE"))?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,r.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(I=(0,S.im)(t.target,e[e.currentMode].element),A.parentElement.tagName!=="PRE"&&(r+=f.g.ZWSP),A.textContent=A.textContent.substring(0,I.start)+r+A.textContent.substring(I.end),(0,S.$j)(I.start+r.length,I.start+r.length,A.parentElement),!((W=A.parentElement)===null||W===void 0)&&W.nextElementSibling.classList.contains("vditor-"+e.currentMode+"__preview")&&(A.parentElement.nextElementSibling.innerHTML=A.outerHTML,Le(A.parentElement.nextElementSibling,e))),[3,8]):[3,1]);case 1:return y?(n.pasteCode(y),[3,8]):[3,2];case 2:return o.trim()===""?[3,3]:((B=document.createElement("div")).innerHTML=o,B.querySelectorAll("[style]").forEach(function(M){M.removeAttribute("style")}),B.querySelectorAll(".vditor-copy").forEach(function(M){M.remove()}),e.currentMode==="ir"?(a.HTML2VditorIRDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),(0,S.oC)(e.lute.HTML2VditorIRDOM(B.innerHTML),e)):e.currentMode==="wysiwyg"?(a.HTML2VditorDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),(0,S.oC)(e.lute.HTML2VditorDOM(B.innerHTML),e)):(a.Md2VditorSVDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),Qt(e,e.lute.HTML2Md(B.innerHTML).trimRight())),e.outline.render(e),[3,8]);case 3:return i.length>0?e.options.upload.url||e.options.upload.handler?[4,jt(e,i)]:[3,5]:[3,7];case 4:return V.sent(),[3,6];case 5:L=new FileReader,"clipboardData"in t?(i=t.clipboardData.files,j=i[0]):t.dataTransfer.types.includes("Files")&&(i=t.dataTransfer.items,j=i[0].getAsFile()),j&&j.type.startsWith("image")&&(L.readAsDataURL(j),L.onload=function(){var M="";e.currentMode==="wysiwyg"?M+='<img alt="'+j.name+'" src="'+L.result.toString()+`">
`:M+="!["+j.name+"]("+L.result.toString()+`)
`,document.execCommand("insertHTML",!1,M)}),V.label=6;case 6:return[3,8];case 7:r.trim()!==""&&i.length===0&&(e.currentMode==="ir"?(a.Md2VditorIRDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),(0,S.oC)(e.lute.Md2VditorIRDOM(r),e)):e.currentMode==="wysiwyg"?(a.Md2VditorDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),(0,S.oC)(e.lute.Md2VditorDOM(r),e)):(a.Md2VditorSVDOM={renderLinkDest:h},e.lute.SetJSRenderers({renderers:a}),Qt(e,r)),e.outline.render(e)),V.label=8;case 8:return e.currentMode!=="sv"&&((K=(0,v.F9)((0,S.zh)(e).startContainer))&&(F=(0,S.zh)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(M){M.remove()}),F.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?K.outerHTML=e.lute.SpinVditorDOM(K.outerHTML):K.outerHTML=e.lute.SpinVditorIRDOM(K.outerHTML),(0,S.ib)(e[e.currentMode].element,F)),e[e.currentMode].element.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(M){Le(M,e)})),e.wysiwyg.triggerRemoveComment(e),ce(e),e[e.currentMode].element.scrollHeight-w>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&Ae(e),[2]}})})},xn=function(e){e.hint.render(e);var t=(0,S.zh)(e).startContainer,n=(0,v.a1)(t,"data-type","code-block-info");if(n)if(n.textContent.replace(f.g.ZWSP,"")===""&&e.hint.recentLanguage)n.textContent=f.g.ZWSP+e.hint.recentLanguage,(0,S.zh)(e).selectNodeContents(n);else{var o=[],r=n.textContent.substring(0,(0,S.im)(n,e.ir.element).start).replace(f.g.ZWSP,"");f.g.CODE_LANGUAGES.forEach(function(i){i.indexOf(r.toLowerCase())>-1&&o.push({html:i,value:i})}),e.hint.genHTML(o,r,e)}},Ve=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&xn(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,l.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},mt=function(e,t){var n=(0,S.zh)(e),o=(0,v.F9)(n.startContainer)||n.startContainer;if(o){var r=o.querySelector(".vditor-ir__marker--heading");r?r.innerHTML=t:(o.insertAdjacentText("afterbegin",t),n.selectNodeContents(o),n.collapse(!1)),q(e,n.cloneRange()),st(e)}},Et=function(e,t,n){var o=(0,v.a1)(e.startContainer,"data-type",n);if(o){o.firstElementChild.remove(),o.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var r=document.createElement("div");r.innerHTML=t.lute.SpinVditorIRDOM(o.outerHTML),o.outerHTML=r.firstElementChild.innerHTML.trim()}},pr=function(e,t,n,o){var r=(0,S.zh)(e),i=t.getAttribute("data-type"),a=r.startContainer;a.nodeType===3&&(a=a.parentElement);var h=!0;if(t.classList.contains("vditor-menu--current"))if(i==="quote"){var E=(0,v.lG)(a,"BLOCKQUOTE");E&&(r.insertNode(document.createElement("wbr")),E.outerHTML=E.innerHTML.trim()===""?'<p data-block="0">'+E.innerHTML+"</p>":E.innerHTML)}else if(i==="link"){var w=(0,v.a1)(r.startContainer,"data-type","a");if(w){var y=(0,v.fb)(r.startContainer,"vditor-ir__link");y?(r.insertNode(document.createElement("wbr")),w.outerHTML=y.innerHTML):w.outerHTML=w.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else i==="italic"?Et(r,e,"em"):i==="bold"?Et(r,e,"strong"):i==="strike"?Et(r,e,"s"):i==="inline-code"?Et(r,e,"code"):i!=="check"&&i!=="list"&&i!=="ordered-list"||(bt(e,r,i),h=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,S.ib)(e.ir.element,r));var A=(0,v.F9)(r.startContainer);if(i==="line"){if(A){var I=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;A.innerHTML.trim()===""?A.outerHTML=I:A.insertAdjacentHTML("afterend",I)}}else if(i==="quote")A&&(r.insertNode(document.createElement("wbr")),A.outerHTML='<blockquote data-block="0">'+A.outerHTML+"</blockquote>",h=!1,t.classList.add("vditor-menu--current"));else if(i==="link"){var B=void 0;B=r.toString()===""?n+"<wbr>"+o:""+n+r.toString()+o.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,B),h=!1,t.classList.add("vditor-menu--current")}else if(i==="italic"||i==="bold"||i==="strike"||i==="inline-code"||i==="code"||i==="table"){B=void 0,r.toString()===""?B=n+"<wbr>"+o:(B=i==="code"||i==="table"?""+n+r.toString()+"<wbr>"+o:""+n+r.toString()+o+"<wbr>",r.deleteContents()),i!=="table"&&i!=="code"||(B=`
`+B+`

`);var L=document.createElement("span");L.innerHTML=B,r.insertNode(L),q(e,r),i==="table"&&(r.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,S.Hc)(r))}else i!=="check"&&i!=="list"&&i!=="ordered-list"||(bt(e,r,i,!1),h=!1,s(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,S.ib)(e.ir.element,r),Ve(e),h&&st(e)},ur=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(w){try{E(o.next(w))}catch(y){i(y)}}function h(w){try{E(o.throw(w))}catch(y){i(y)}}function E(w){var y;w.done?r(w.value):(y=w.value,y instanceof n?y:new n(function(A){A(y)})).then(a,h)}E((o=o.apply(e,t||[])).next())})},mr=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function h(E){return function(w){return function(y){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&y[0]?o.return:y[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,y[1])).done)return r;switch(o=0,r&&(y=[2&y[0],r.value]),y[0]){case 0:case 1:r=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,o=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||y[0]!==6&&y[0]!==2)){a=0;continue}if(y[0]===3&&(!r||y[1]>r[0]&&y[1]<r[3])){a.label=y[1];break}if(y[0]===6&&a.label<r[1]){a.label=r[1],r=y;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(y);break}r[2]&&a.ops.pop(),a.trys.pop();continue}y=t.call(e,a)}catch(A){y=[6,A],o=0}finally{n=r=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([E,w])}}},fr=function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(o,r){n.element.style.display="none";var i=decodeURIComponent(o.getAttribute("data-value")),a=window.getSelection().getRangeAt(0);if(r.currentMode==="ir"){var h=(0,v.a1)(a.startContainer,"data-type","code-block-info");if(h)return h.textContent=f.g.ZWSP+i.trimRight(),a.selectNodeContents(h),a.collapse(!1),Ve(r),h.parentElement.querySelectorAll("code").forEach(function(A){A.className="language-"+i.trimRight()}),Le(h.parentElement.querySelector(".vditor-ir__preview"),r),void(n.recentLanguage=i.trimRight())}if(r.currentMode==="wysiwyg"&&a.startContainer.nodeType!==3){var E=a.startContainer,w=void 0;if((w=E.classList.contains("vditor-input")?E:E.firstElementChild)&&w.classList.contains("vditor-input"))return w.value=i.trimRight(),a.selectNodeContents(w),a.collapse(!1),w.dispatchEvent(new CustomEvent("input",{detail:1})),void(n.recentLanguage=i.trimRight())}if(a.setStart(a.startContainer,n.lastIndex),a.deleteContents(),r.options.hint.parse?r.currentMode==="sv"?(0,S.oC)(r.lute.SpinVditorSVDOM(i),r):r.currentMode==="wysiwyg"?(0,S.oC)(r.lute.SpinVditorDOM(i),r):(0,S.oC)(r.lute.SpinVditorIRDOM(i),r):(0,S.oC)(i,r),n.splitChar===":"&&i.indexOf(":")>-1&&r.currentMode!=="sv"&&a.insertNode(document.createTextNode(" ")),a.collapse(!1),(0,S.Hc)(a),r.currentMode==="wysiwyg")(y=(0,v.fb)(a.startContainer,"vditor-wysiwyg__block"))&&y.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(y.lastElementChild.innerHTML=y.firstElementChild.innerHTML,Le(y.lastElementChild,r));else if(r.currentMode==="ir"){var y;(y=(0,v.fb)(a.startContainer,"vditor-ir__marker--pre"))&&y.nextElementSibling.classList.contains("vditor-ir__preview")&&(y.nextElementSibling.innerHTML=y.innerHTML,Le(y.nextElementSibling,r))}ce(r)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var o,r=getSelection().getRangeAt(0);o=r.startContainer.textContent.substring(0,r.startOffset)||"";var i=this.getKey(o,t.options.hint.extend);if(i===void 0)this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var a=i===""?t.options.hint.emoji:t.lute.GetEmojis(),h=[];Object.keys(a).forEach(function(E){E.indexOf(i.toLowerCase())===0&&(a[E].indexOf(".")>-1?h.push({html:'<img src="'+a[E]+'" title=":'+E+':"/> :'+E+":",value:":"+E+":"}):h.push({html:'<span class="vditor-hint__emoji">'+a[E]+"</span>"+E,value:a[E]}))}),this.genHTML(h,i,t)}else t.options.hint.extend.forEach(function(E){E.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){return ur(n,void 0,void 0,function(){var w;return mr(this,function(y){switch(y.label){case 0:return w=this.genHTML,[4,E.hint(i)];case 1:return w.apply(this,[y.sent(),i,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,o){var r=this;if(t.length!==0){var i=o[o.currentMode].element,a=(0,S.Ny)(i),h=a.left+(o.options.outline.position==="left"?o.outline.element.offsetWidth:0),E=a.top,w="";t.forEach(function(A,I){if(!(I>7)){var B=A.html;if(n!==""){var L=B.lastIndexOf(">")+1,j=B.substr(L),K=j.toLowerCase().indexOf(n.toLowerCase());K>-1&&(j=j.substring(0,K)+"<b>"+j.substring(K,K+n.length)+"</b>"+j.substring(K+n.length),B=B.substr(0,L)+j)}w+='<button data-value="'+encodeURIComponent(A.value)+` "
`+(I===0?"class='vditor-hint--current'":"")+"> "+B+"</button>"}}),this.element.innerHTML=w;var y=parseInt(document.defaultView.getComputedStyle(i,null).getPropertyValue("line-height"),10);this.element.style.top=E+(y||22)+"px",this.element.style.left=h+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(A){A.addEventListener("click",function(I){r.fillEmoji(A,o),I.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=E-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")}else this.element.style.display="none"},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var o=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.nextElementSibling?o.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.previousElementSibling)o.previousElementSibling.className="vditor-hint--current";else{var r=this.element.children.length;this.element.children[r-1].className="vditor-hint--current"}return!0}return!((0,l.yl)(t)||t.shiftKey||t.altKey||t.key!=="Enter"||t.isComposing)&&(t.preventDefault(),t.stopPropagation(),this.fillEmoji(o,n),!0)},e.prototype.getKey=function(t,n){var o,r=this;if(this.lastIndex=-1,this.splitChar="",n.forEach(function(E){var w=t.lastIndexOf(E.key);r.lastIndex<w&&(r.splitChar=E.key,r.lastIndex=w)}),this.lastIndex===-1)return o;var i=t.split(this.splitChar),a=i[i.length-1];if(i.length>1&&a.trim()===a)if(i.length===2&&i[0]===""&&i[1].length<32)o=i[1];else{var h=i[i.length-2].slice(-1);(0,c.X)(h)===" "&&a.length<32&&(o=a)}return o},e}(),vr=function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>`,this.element=n.firstElementChild,this.bindEvent(t),Lt(t,this.element),$t(t,this.element),At(t,this.element),Dt(t,this.element),Ot(t,this.element),Mt(t,this.element),Ht(t,this.element,this.copy),Nt(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var r=document.createElement("div");r.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(r.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){kt(t,o,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){(0,l.vU)()||q(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(o){if(o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop")return n.preventInput?(n.preventInput=!1,void Ve(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void(n.composingLock||o.data==="\u2018"||o.data==="\u201C"||o.data==="\u300A"||q(t,getSelection().getRangeAt(0).cloneRange(),!1,o))}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT")return o.target.checked?o.target.setAttribute("checked","checked"):o.target.removeAttribute("checked"),n.preventInput=!0,void Ve(t);var r=(0,S.zh)(t),i=(0,v.fb)(o.target,"vditor-ir__preview");if(i||(i=(0,v.fb)(r.startContainer,"vditor-ir__preview")),i&&(i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!0),(0,S.Hc)(r),Ae(t)),o.target.tagName==="IMG"){var a=o.target.parentElement.querySelector(".vditor-ir__marker--link");a&&(r.selectNode(a),(0,S.Hc)(r))}var h=(0,v.a1)(o.target,"data-type","a");if(!h||h.classList.contains("vditor-ir__node--expand")){if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&r.collapsed){var E=n.element.lastElementChild.getBoundingClientRect();o.y>E.top+E.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(f.g.ZWSP,"")===""?(r.selectNodeContents(n.element.lastElementChild),r.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+f.g.ZWSP+"<wbr></p>"),(0,S.ib)(n.element,r)))}r.toString()===""?D(r,t):setTimeout(function(){D((0,S.zh)(t),t)}),ee(o,t),st(t)}else window.open(h.querySelector(":scope > .vditor-ir__marker--link").textContent)}),this.element.addEventListener("keyup",function(o){if(!o.isComposing&&!(0,l.yl)(o))if(o.key==="Enter"&&Ae(t),st(t),o.key!=="Backspace"&&o.key!=="Delete"||t.ir.element.innerHTML===""||t.ir.element.childNodes.length!==1||!t.ir.element.firstElementChild||t.ir.element.firstElementChild.tagName!=="P"||t.ir.element.firstElementChild.childElementCount!==0||t.ir.element.textContent!==""&&t.ir.element.textContent!==`
`){var r=(0,S.zh)(t);o.key==="Backspace"?((0,l.vU)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent="",D(r,t)),n.element.querySelectorAll(".language-math").forEach(function(a){var h=a.querySelector("br");h&&h.remove()})):o.key.indexOf("Arrow")>-1?(o.key!=="ArrowLeft"&&o.key!=="ArrowRight"||xn(t),D(r,t)):o.keyCode===229&&o.code===""&&o.key==="Unidentified"&&D(r,t);var i=(0,v.fb)(r.startContainer,"vditor-ir__preview");if(i){if(o.key==="ArrowUp"||o.key==="ArrowLeft")return i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!1),o.preventDefault(),!0;if(i.tagName==="SPAN"&&(o.key==="ArrowDown"||o.key==="ArrowRight"))return i.parentElement.getAttribute("data-type")==="html-entity"?(i.parentElement.insertAdjacentText("afterend",f.g.ZWSP),r.setStart(i.parentElement.nextSibling,1)):r.selectNodeContents(i.parentElement.lastElementChild),r.collapse(!1),o.preventDefault(),!0}}else t.ir.element.innerHTML=""})},e}(),_n=function(e){return e.currentMode==="sv"?e.lute.Md2HTML(p(e)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML):void 0},hr=U(895),Sn=U(818),gr=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+t+`</div>
<div class="vditor-outline__content"></div>`}return e.prototype.render=function(t){return t.preview.element.style.display==="block"?(0,Sn.k)(t.preview.element.lastElementChild,this.element.lastElementChild,t):(0,Sn.k)(t[t.currentMode].element,this.element.lastElementChild,t)},e.prototype.toggle=function(t,n){var o;n===void 0&&(n=!0);var r=(o=t.toolbar.elements.outline)===null||o===void 0?void 0:o.firstElementChild;if(n&&window.innerWidth>=f.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),r==null||r.classList.add("vditor-menu--current")):(this.element.style.display="none",r==null||r.classList.remove("vditor-menu--current")),getSelection().rangeCount>0){var i=getSelection().getRangeAt(0);t[t.currentMode].element.contains(i.startContainer)?(0,S.Hc)(i):t[t.currentMode].element.focus()}ue(t)},e}(),br=U(554),yr=function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview";var o=document.createElement("div");o.className="vditor-reset",t.options.classes.preview&&o.classList.add(t.options.classes.preview),o.style.maxWidth=t.options.preview.maxWidth+"px",o.addEventListener("copy",function(w){if(w.target.tagName!=="TEXTAREA"){var y=document.createElement("div");y.className="vditor-reset",y.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,y),w.preventDefault()}}),o.addEventListener("click",function(w){var y=(0,v.lG)(w.target,"SPAN");if(y&&(0,v.fb)(y,"vditor-toc")){var A=o.querySelector("#"+y.getAttribute("data-target-id"));A&&(n.element.scrollTop=A.offsetTop)}else w.target.tagName==="IMG"&&(0,G.E)(w.target,t.options.lang,t.options.theme)});var r=t.options.preview.actions,i=document.createElement("div");i.className="vditor-preview__action";for(var a=[],h=0;h<r.length;h++){var E=r[h];if(typeof E!="object")switch(E){case"desktop":a.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":a.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":a.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":a.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u516C\u4F17\u53F7"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":a.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u77E5\u4E4E"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else a.push('<button type="button" data-type="'+E.key+'" class="'+E.className+'"'+(E.tooltip?' aria-label="'+E.tooltip+'"':"")+'">'+E.text+"</button>")}i.innerHTML=a.join(""),r.length===0&&(i.style.display="none"),this.element.appendChild(i),this.element.appendChild(o),i.addEventListener((0,l.Le)(),function(w){var y=(0,N.S)(w.target,"BUTTON");if(y){var A=y.getAttribute("data-type"),I=r.find(function(B){return(B==null?void 0:B.key)===A});I?I.click(A):A!=="mp-wechat"&&A!=="zhihu"?(o.style.width=A==="desktop"?"auto":A==="tablet"?"780px":"360px",o.scrollWidth>o.parentElement.clientWidth&&(o.style.width="auto"),n.render(t),i.querySelectorAll("button").forEach(function(B){B.classList.remove("vditor-preview__action--current")}),y.classList.add("vditor-preview__action--current")):n.copyToX(t,n.element.lastElementChild.cloneNode(!0),A)}})}return e.prototype.render=function(t,n){var o=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display!=="none")if(n)this.element.lastElementChild.innerHTML=n;else if(p(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")!==""){var r=new Date().getTime(),i=p(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var a=new XMLHttpRequest;a.open("POST",t.options.preview.url),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(a.status===200){var E=JSON.parse(a.responseText);if(E.code!==0)return void t.tip.show(E.msg);t.options.preview.transform&&(E.data=t.options.preview.transform(E.data)),o.element.lastElementChild.innerHTML=E.data,o.afterRender(t,r)}else{var w=t.lute.Md2HTML(i);t.options.preview.transform&&(w=t.options.preview.transform(w)),o.element.lastElementChild.innerHTML=w,o.afterRender(t,r)}},a.send(JSON.stringify({markdownText:i}))}else{var h=t.lute.Md2HTML(i);t.options.preview.transform&&(h=t.options.preview.transform(h)),o.element.lastElementChild.innerHTML=h,o.afterRender(t,r)}},t.options.preview.delay)}else this.element.lastElementChild.innerHTML="";else this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide()},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var o=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",o.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var r=t.preview.element.querySelector(".vditor-comment--focus");r&&r.classList.remove("vditor-comment--focus"),(0,ie.O)(t.preview.element.lastElementChild),(0,fe.s)(t.options.preview.hljs,t.preview.element.lastElementChild,t.options.cdn),(0,ke.i)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),(0,de.P)(t.preview.element.lastElementChild,t.options.cdn),(0,we.v)(t.preview.element.lastElementChild,t.options.cdn),(0,$.p)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),(0,He.P)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),(0,Ne.B)(t.preview.element.lastElementChild,t.options.cdn),(0,J.Q)(t.preview.element.lastElementChild,t.options.cdn),(0,br.Y)(t.preview.element.lastElementChild);var i=t.preview.element,a=t.outline.render(t);a===""&&(a="[ToC]"),i.querySelectorAll('[data-type="toc-block"]').forEach(function(h){h.innerHTML=a,(0,ve.H)(h,{cdn:t.options.cdn,math:t.options.preview.math})}),(0,ve.H)(t.preview.element.lastElementChild,{cdn:t.options.cdn,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,o){o===void 0&&(o="mp-wechat"),o!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(i){i.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(i){i.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+i.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(i){i.style.backgroundImage="none"}),this.element.append(n);var r=n.ownerDocument.createRange();r.selectNode(n),(0,S.Hc)(r),document.execCommand("copy"),this.element.lastElementChild.remove(),t.tip.show("\u5DF2\u590D\u5236\uFF0C\u53EF\u5230"+(o==="zhihu"?"\u77E5\u4E4E":"\u5FAE\u4FE1\u516C\u4F17\u53F7\u5E73\u53F0")+"\u8FDB\u884C\u7C98\u8D34")},e}(),wr=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+t.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(o){var r=document,i=o.clientY,a=t.element.offsetHeight,h=63+t.element.querySelector(".vditor-toolbar").clientHeight;r.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),r.onmousemove=function(E){t.options.resize.position==="top"?t.element.style.height=Math.max(h,a+(i-E.clientY))+"px":t.element.style.height=Math.max(h,a+(E.clientY-i))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},r.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-a),window.captureEvents&&window.captureEvents(),r.onmousemove=null,r.onmouseup=null,r.ondragstart=null,r.onselectstart=null,r.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e}(),kr=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),Lt(t,this.element),At(t,this.element),Dt(t,this.element),Ot(t,this.element),Mt(t,this.element),Ht(t,this.element,this.copy),Nt(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",pt(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){kt(t,o,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var o=n.element.scrollTop,r=n.element.clientHeight,i=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),a=t.preview.element;a.scrollTop=o/r>.5?(o+r)*a.scrollHeight/i-r:o*a.scrollHeight/i}}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){(0,l.vU)()||ae(t,o),n.composingLock=!1}),this.element.addEventListener("input",function(o){if(o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop"&&!n.composingLock&&o.data!=="\u2018"&&o.data!=="\u201C"&&o.data!=="\u300A")return n.preventInput?(n.preventInput=!1,void De(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void ae(t,o)}),this.element.addEventListener("keyup",function(o){o.isComposing||(0,l.yl)(o)||(o.key!=="Backspace"&&o.key!=="Delete"||t.sv.element.innerHTML===""||t.sv.element.childNodes.length!==1||!t.sv.element.firstElementChild||t.sv.element.firstElementChild.tagName!=="DIV"||t.sv.element.firstElementChild.childElementCount!==2||t.sv.element.firstElementChild.textContent!==""&&t.sv.element.textContent!==`
`?o.key==="Enter"&&Ae(t):t.sv.element.innerHTML="")})},e}(),Er=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var o=this;n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0?(this.element.innerHTML='<div class="vditor-tip__content">'+t+`
<div class="vditor-tip__close">X</div></div>`,this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){o.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'+t+"</div>",setTimeout(function(){o.hide()},n)),this.element.removeAttribute("style"),setTimeout(function(){o.element.getBoundingClientRect().top<46&&(o.element.style.position="fixed",o.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),qt=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),u(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",s(t.toolbar.elements,["both"])}t.devtools&&t.devtools.renderEchart(t)}},xr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),_r=function(e){function t(n,o){var r=e.call(this,n,o)||this;return n.options.preview.mode==="both"&&r.element.children[0].classList.add("vditor-menu--current"),r.element.children[0].addEventListener((0,l.Le)(),function(i){r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||(i.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?qt("editor",n):qt("both",n)))}),r}return xr(t,e),t}(Se),Sr=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},Cn=U(312),Cr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tr=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow");var h="";return f.g.CODE_THEME.forEach(function(E){h+="<button>"+E+"</button>"}),a.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+h+"</div>",a.addEventListener((0,l.Le)(),function(E){E.target.tagName==="BUTTON"&&(k(n,["subToolbar"]),n.options.preview.hljs.style=E.target.textContent,(0,Cn.Y)(E.target.textContent,n.options.cdn),E.preventDefault(),E.stopPropagation())}),r.element.appendChild(a),x(n,a,i,o.level),r}return Cr(t,e),t}(Se),Lr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ar=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow");var h="";return Object.keys(n.options.preview.theme.list).forEach(function(E){h+='<button data-type="'+E+'">'+n.options.preview.theme.list[E]+"</button>"}),a.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+h+"</div>",a.addEventListener((0,l.Le)(),function(E){E.target.tagName==="BUTTON"&&(k(n,["subToolbar"]),n.options.preview.theme.current=E.target.getAttribute("data-type"),(0,te.Z)(n.options.preview.theme.current,n.options.preview.theme.path),E.preventDefault(),E.stopPropagation())}),r.element.appendChild(a),x(n,a,i,o.level),r}return Lr(t,e),t}(Se),Mr=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var o=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var r=t[t.currentMode].element.cloneNode(!0);r.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(i){i.remove()}),o=r.textContent.length}typeof t.options.counter.max=="number"?(o>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=o+"/"+t.options.counter.max):this.element.innerHTML=""+o,this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(o,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),Hr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].innerHTML=o.icon,r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),i.currentTarget.classList.contains(f.g.CLASS_MENU_DISABLED)||o.click(i,n)}),r}return Hr(t,e),t}(Se),Dr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Or=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.firstElementChild.addEventListener((0,l.Le)(),function(i){var a=r.element.firstElementChild;a.classList.contains(f.g.CLASS_MENU_DISABLED)||(i.preventDefault(),a.classList.contains("vditor-menu--current")?(a.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",ue(n)):(a.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",ue(n),n.devtools.renderEchart(n)))}),r}return Dr(t,e),t}(Se),jr=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},Ir=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rr=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");i.className="vditor-panel vditor-panel--arrow";var a="";return Object.keys(n.options.hint.emoji).forEach(function(h){var E=n.options.hint.emoji[h];E.indexOf(".")>-1?a+='<button data-value=":'+h+': " data-key=":'+h+`:"><img
data-value=":`+h+': " data-key=":'+h+':" class="vditor-emojis__icon" src="'+E+'"/></button>':a+='<button data-value="'+E+` "
 data-key="`+h+'"><span class="vditor-emojis__icon">'+E+"</span></button>"}),i.innerHTML='<div class="vditor-emojis" style="max-height: '+(n.options.height==="auto"?"auto":n.options.height-80)+'px">'+a+`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`+(n.options.hint.emojiTail||"")+`</span>
</div>`,r.element.appendChild(i),x(n,i,r.element.firstElementChild,o.level),r.bindEvent(n),r}return Ir(t,e),t.prototype.bindEvent=function(n){var o=this;this.element.lastElementChild.addEventListener((0,l.Le)(),function(r){var i=(0,N.S)(r.target,"BUTTON");if(i){r.preventDefault();var a=i.getAttribute("data-value"),h=(0,S.zh)(n),E=a;if(n.currentMode==="wysiwyg"?E=n.lute.SpinVditorDOM(a):n.currentMode==="ir"&&(E=n.lute.SpinVditorIRDOM(a)),a.indexOf(":")>-1&&n.currentMode!=="sv"){var w=document.createElement("div");w.innerHTML=E,E=w.firstElementChild.firstElementChild.outerHTML+" ",(0,S.oC)(E,n)}else h.extractContents(),h.insertNode(document.createTextNode(a));h.collapse(!1),(0,S.Hc)(h),o.element.lastElementChild.style.display="none",ce(n)}}),this.element.lastElementChild.addEventListener("mouseover",function(r){var i=(0,N.S)(r.target,"BUTTON");i&&(o.element.querySelector(".vditor-emojis__tip").innerHTML=i.getAttribute("data-key"))})},t}(Se),Tn=function(e,t,n){var o=document.createElement("a");"download"in o?(o.download=n,o.style.display="none",o.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(o),o.click(),o.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},Pr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Br=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");return a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow"),a.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,a.addEventListener((0,l.Le)(),function(h){var E=h.target;if(E.tagName==="BUTTON"){switch(E.getAttribute("data-type")){case"markdown":(function(w){var y=p(w);Tn(w,y,y.substr(0,10)+".md")})(n);break;case"pdf":(function(w){w.tip.show(window.VditorI18n.generate,3800);var y=document.querySelector("iframe");y.contentDocument.open(),y.contentDocument.write('<link rel="stylesheet" href="'+w.options.cdn+`/dist/index.css"/>
<script src="`+w.options.cdn+`/dist/method.min.js"><\/script>
<div id="preview"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    markdown: {
      theme: "`+w.options.preview.theme+`"
    },
    hljs: {
      style: "`+w.options.preview.hljs.style+`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`),y.contentDocument.close(),setTimeout(function(){y.contentWindow.postMessage(p(w),"*")},200)})(n);break;case"html":(function(w){var y=_n(w),A='<html><head><link rel="stylesheet" type="text/css" href="'+w.options.cdn+`/dist/index.css"/>
<script src="`+w.options.cdn+"/dist/js/i18n/"+w.options.lang+`.js"><\/script>
<script src="`+w.options.cdn+`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`+y+`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`+w.options.preview.theme.current+"', '"+w.options.preview.theme.path+`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`+JSON.stringify(w.options.preview.hljs)+", previewElement, '"+w.options.cdn+`');
    Vditor.mathRender(previewElement, {
        cdn: '`+w.options.cdn+`',
        math: `+JSON.stringify(w.options.preview.math)+`,
    });
    Vditor.mermaidRender(previewElement, '`+w.options.cdn+"', '"+w.options.theme+`');
    Vditor.flowchartRender(previewElement, '`+w.options.cdn+`');
    Vditor.graphvizRender(previewElement, '`+w.options.cdn+`');
    Vditor.chartRender(previewElement, '`+w.options.cdn+"', '"+w.options.theme+`');
    Vditor.mindmapRender(previewElement, '`+w.options.cdn+"', '"+w.options.theme+`');
    Vditor.abcRender(previewElement, '`+w.options.cdn+`');
    Vditor.mediaRender(previewElement);
    Vditor.speechRender(previewElement);
<\/script>
<script src="`+w.options.cdn+"/dist/js/icons/"+w.options.icon+'.js"><\/script></body></html>';Tn(w,A,y.substr(0,10)+".html")})(n)}k(n,["subToolbar"]),h.preventDefault(),h.stopPropagation()}}),r.element.appendChild(a),x(n,a,i,o.level),r}return Pr(t,e),t}(Se),qr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),zr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n,o),r}return qr(t,e),t.prototype._bindEvent=function(n,o){this.element.children[0].addEventListener((0,l.Le)(),function(r){r.preventDefault(),n.element.className.includes("vditor--fullscreen")?(o.level||(this.innerHTML=o.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(i){var a=n.toolbar.elements[i].firstChild;a&&(a.className=a.className.replace("__s","__n"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(o.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(i){var a=n.toolbar.elements[i].firstChild;a&&(a.className=a.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),o.click&&o.click(r,n),ue(n),be(n)})},t}(Se),Vr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ur=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");return i.className="vditor-hint vditor-panel--arrow",i.innerHTML='<button data-tag="h1" data-value="# ">'+window.VditorI18n.heading1+" "+(0,l.ns)("&lt;\u2325\u23181>")+`</button>
<button data-tag="h2" data-value="## ">`+window.VditorI18n.heading2+" &lt;"+(0,l.ns)("\u2325\u23182")+`></button>
<button data-tag="h3" data-value="### ">`+window.VditorI18n.heading3+" &lt;"+(0,l.ns)("\u2325\u23183")+`></button>
<button data-tag="h4" data-value="#### ">`+window.VditorI18n.heading4+" &lt;"+(0,l.ns)("\u2325\u23184")+`></button>
<button data-tag="h5" data-value="##### ">`+window.VditorI18n.heading5+" &lt;"+(0,l.ns)("\u2325\u23185")+`></button>
<button data-tag="h6" data-value="###### ">`+window.VditorI18n.heading6+" &lt;"+(0,l.ns)("\u2325\u23186")+"></button>",r.element.appendChild(i),r._bindEvent(n,i),r}return Vr(t,e),t.prototype._bindEvent=function(n,o){var r=this.element.children[0];r.addEventListener((0,l.Le)(),function(a){a.preventDefault(),r.classList.contains(f.g.CLASS_MENU_DISABLED)||(r.blur(),r.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(Ct(n),Ee(n)):n.currentMode==="ir"&&mt(n,""),r.classList.remove("vditor-menu--current")):(k(n,["subToolbar"]),o.style.display="block"))});for(var i=0;i<6;i++)o.children.item(i).addEventListener((0,l.Le)(),function(a){a.preventDefault(),n.currentMode==="wysiwyg"?(ft(n,a.target.getAttribute("data-tag")),Ee(n),r.classList.add("vditor-menu--current")):n.currentMode==="ir"?(mt(n,a.target.getAttribute("data-value")),r.classList.add("vditor-menu--current")):tn(n,a.target.getAttribute("data-value")),o.style.display="none"})},t}(Se),Gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown \u4F7F\u7528\u6307\u5357</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">\u8BED\u6CD5\u901F\u67E5\u624B\u518C</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">\u57FA\u7840\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">\u6269\u5C55\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">\u952E\u76D8\u5FEB\u6377\u952E</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor \u652F\u6301</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">\u5B98\u65B9\u8BA8\u8BBA\u533A</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">\u5F00\u53D1\u624B\u518C</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">\u6F14\u793A\u5730\u5740</a></li>
    </ul>
</div></div>`,0)}),r}return Gr(t,e),t}(Se),Fr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var a=(0,S.zh)(n),h=(0,v.lG)(a.startContainer,"LI");h&&dn(n,h,a)}}),r}return Fr(t,e),t}(Se),Xr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>\u4E0B\u4E00\u4EE3\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u4E3A\u672A\u6765\u800C\u6784\u5EFA</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor \u662F\u4E00\u6B3E\u6D4F\u89C8\u5668\u7AEF\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u652F\u6301\u6240\u89C1\u5373\u6240\u5F97\u3001\u5373\u65F6\u6E32\u67D3\uFF08\u7C7B\u4F3C Typora\uFF09\u548C\u5206\u5C4F\u9884\u89C8\u6A21\u5F0F\u3002
        \u5B83\u4F7F\u7528 TypeScript \u5B9E\u73B0\uFF0C\u652F\u6301\u539F\u751F JavaScript \u4EE5\u53CA Vue\u3001React\u3001Angular \u548C Svelte \u7B49\u6846\u67B6\u3002
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        \u9879\u76EE\u5730\u5740\uFF1A<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        \u5F00\u6E90\u534F\u8BAE\uFF1AMIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        \u7EC4\u4EF6\u7248\u672C\uFF1AVditor v`+f.H+" / Lute v"+Lute.Version+`
        </li>
        <li>
        \u8D5E\u52A9\u6350\u8D60\uFF1A<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`,0)}),r}return Xr(t,e),t}(Se),Zr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||n.currentMode==="sv"||gt(n,"afterend")}),r}return Zr(t,e),t}(Se),$r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||n.currentMode==="sv"||gt(n,"beforebegin")}),r}return $r(t,e),t}(Se),eo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),to=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener((0,l.Le)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var a=(0,S.zh)(n),h=(0,v.lG)(a.startContainer,"LI");h&&It(n,h,a,h.parentElement)}}),r}return eo(t,e),t}(Se),no=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ro=function(e){function t(n,o){var r=e.call(this,n,o)||this;return n.options.outline&&r.element.firstElementChild.classList.add("vditor-menu--current"),r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),n.toolbar.elements.outline.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||(n.options.outline.enable=!r.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),r}return no(t,e),t}(Se),oo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),io=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n),r}return oo(t,e),t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener((0,l.Le)(),function(r){r.preventDefault();var i=o.element.firstElementChild;if(!i.classList.contains(f.g.CLASS_MENU_DISABLED)){var a=f.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);i.classList.contains("vditor-menu--current")?(i.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),g(n.toolbar.elements,a),n.outline.render(n)):(b(n.toolbar.elements,a),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),i.classList.add("vditor-menu--current"),k(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),ue(n)}})},t}(Se),ao=function(){function e(t){var n;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,typeof AudioContext!="undefined")n=new AudioContext;else{if(!webkitAudioContext)return;n=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=n.sampleRate;var o=n.createGain();n.createMediaStreamSource(t).connect(o),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,o.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),o=new Float32Array(t.length),r=0;r<t.length;++r)o[r]=.5*(t[r]+n[r]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(o=this.downSampleBuffer(o,this.SAMPLE_RATE));var i=44+2*o.length,a=new ArrayBuffer(i),h=new DataView(a);this.writeUTFBytes(h,0,"RIFF"),h.setUint32(4,i,!0),this.writeUTFBytes(h,8,"WAVE"),this.writeUTFBytes(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,1,!0),h.setUint32(24,this.SAMPLE_RATE,!0),h.setUint32(28,2*this.SAMPLE_RATE,!0),h.setUint16(32,2,!0),h.setUint16(34,16,!0);var E=2*o.length;this.writeUTFBytes(h,36,"data"),h.setUint32(40,E,!0);for(var w=o.length,y=44,A=0;A<w;A++)h.setInt16(y,32767*o[A],!0),y+=2;return new Blob([h],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var o=this.DEFAULT_SAMPLE_RATE/n,r=Math.round(t.length/o),i=new Float32Array(r),a=0,h=0;a<i.length;){for(var E=Math.round((a+1)*o),w=0,y=0,A=h;A<E&&A<t.length;A++)w+=t[A],y++;i[a]=w/y,a++,h=E}return i},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),o=0,r=t.length,i=0;i<r;++i){var a=t[i];n.set(a,o),o+=a.length}return n},e.prototype.writeUTFBytes=function(t,n,o){for(var r=o.length,i=0;i<r;i++)t.setUint8(n+i,o.charCodeAt(i))},e}(),lo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),so=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n),r}return lo(t,e),t.prototype._bindEvent=function(n){var o,r=this;this.element.children[0].addEventListener((0,l.Le)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)){var a=n[n.currentMode].element;if(o)if(o.isRecording){o.stopRecording(),n.tip.hide();var h=new File([o.buildWavFileBlob()],"record"+new Date().getTime()+".wav",{type:"video/webm"});jt(n,[h]),r.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(window.VditorI18n.recording),a.setAttribute("contenteditable","false"),o.startRecordingNewWavFile(),r.element.children[0].classList.add("vditor-menu--current");else navigator.mediaDevices.getUserMedia({audio:!0}).then(function(E){(o=new ao(E)).recorder.onaudioprocess=function(w){if(o.isRecording){var y=w.inputBuffer.getChannelData(0),A=w.inputBuffer.getChannelData(1);o.cloneChannelData(y,A)}},o.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),a.setAttribute("contenteditable","false"),r.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])})}})},t}(Se),co=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),po=function(e){function t(n,o){var r=e.call(this,n,o)||this;return b({redo:r.element},["redo"]),r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||n.undo.redo(n)}),r}return co(t,e),t}(Se),uo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mo=function(e){function t(n,o){var r=e.call(this,n,o)||this;return b({undo:r.element},["undo"]),r.element.children[0].addEventListener((0,l.Le)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED)||n.undo.undo(n)}),r}return uo(t,e),t}(Se),fo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),vo=function(e){function t(n,o){var r=e.call(this,n,o)||this,i='<input type="file"';return n.options.upload.multiple&&(i+=' multiple="multiple"'),n.options.upload.accept&&(i+=' accept="'+n.options.upload.accept+'"'),r.element.children[0].innerHTML=""+(o.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+i+">",r._bindEvent(n),r}return fo(t,e),t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener((0,l.Le)(),function(r){if(o.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault()}),this.element.querySelector("input").addEventListener("change",function(r){if(o.element.firstElementChild.classList.contains(f.g.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault();r.target.files.length!==0&&jt(n,r.target.files,r.target)})},t}(Se),ho=function(){function e(t){var n=this,o=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",o.toolbar.forEach(function(r,i){var a=n.genItem(t,r,i);if(n.element.appendChild(a),r.toolbar){var h=document.createElement("div");h.className="vditor-hint vditor-panel--arrow",h.addEventListener((0,l.Le)(),function(E){h.style.display="none"}),r.toolbar.forEach(function(E,w){E.level=2,h.appendChild(n.genItem(t,E,i+w))}),a.appendChild(h),x(t,h,a.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new Mr(t),this.element.appendChild(t.counter.element))}return e.prototype.genItem=function(t,n,o){var r;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":r=new Se(t,n);break;case"emoji":r=new Rr(t,n);break;case"headings":r=new Ur(t,n);break;case"|":r=new jr;break;case"br":r=new Sr;break;case"undo":r=new mo(t,n);break;case"redo":r=new po(t,n);break;case"help":r=new Wr(t,n);break;case"both":r=new _r(t,n);break;case"preview":r=new io(t,n);break;case"fullscreen":r=new zr(t,n);break;case"upload":r=new vo(t,n);break;case"record":r=new so(t,n);break;case"info":r=new Jr(t,n);break;case"edit-mode":r=new er(t,n);break;case"devtools":r=new Or(t,n);break;case"outdent":r=new to(t,n);break;case"indent":r=new Kr(t,n);break;case"outline":r=new ro(t,n);break;case"insert-after":r=new Yr(t,n);break;case"insert-before":r=new Qr(t,n);break;case"code-theme":r=new Tr(t,n);break;case"content-theme":r=new Ar(t,n);break;case"export":r=new Br(t,n);break;default:r=new Nr(t,n)}if(r){var i=n.name;return i!=="br"&&i!=="|"||(i+=o),this.elements[i]=r.element,r.element}},e}(),go=U(760),bo=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new go}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?g(t.toolbar.elements,["undo"]):b(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?g(t.toolbar.elements,["redo"]):b(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,k(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0||(0,l.vU)()&&n.key==="Backspace"||(0,l.G6)())){var o=this.addCaret(t);o.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=o,this[t.currentMode].lastText=o)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),o=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),r=this.dmp.patch_make(n,this[t.currentMode].lastText,o);r.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(r),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,b(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&g(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,o){var r;if(o===void 0&&(o=!1),o){var i=this.dmp.patch_deepCopy(t).reverse();i.forEach(function(h){h.diffs.forEach(function(E){E[0]=-E[0]})}),r=this.dmp.patch_apply(i,this[n.currentMode].lastText)[0]}else r=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=r,n[n.currentMode].element.innerHTML=r,n.currentMode!=="sv"&&n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(h){Le(h,n)}),n[n.currentMode].element.querySelector("wbr"))(0,S.ib)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),Ae(n);else{var a=getSelection().getRangeAt(0);a.setEndBefore(n[n.currentMode].element),a.collapse(!1)}he(n),ce(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),et(n),n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(h){Le(h,n)}),this[n.currentMode].undoStack.length>1?g(n.toolbar.elements,["undo"]):b(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?g(n.toolbar.elements,["redo"]):b(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){var o;if(n===void 0&&(n=!1),getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var r=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(r.startContainer)){o=r.cloneRange();var i=document.createElement("span");i.className="vditor-wbr",r.insertNode(i)}}t.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='1']").forEach(function(h){(h.firstElementChild.classList.contains("language-echarts")||h.firstElementChild.classList.contains("language-plantuml")||h.firstElementChild.classList.contains("language-mindmap"))&&(h.firstElementChild.removeAttribute("_echarts_instance_"),h.firstElementChild.removeAttribute("data-processed"),h.firstElementChild.innerHTML=h.previousElementSibling.firstElementChild.innerHTML,h.setAttribute("data-render","2")),h.firstElementChild.classList.contains("language-math")&&(h.setAttribute("data-render","2"),h.firstElementChild.textContent=h.firstElementChild.getAttribute("data-math"),h.firstElementChild.removeAttribute("data-math"))});var a=t[t.currentMode].element.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(h){h.remove()}),n&&o&&(0,S.Hc)(o),a.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),yo=U(640),wo=function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:f.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\u{1F44D}","-1":"\u{1F44E}",confused:"\u{1F615}",eyes:"\u{1F440}\uFE0F",heart:"\u2764\uFE0F",rocket:"\u{1F680}\uFE0F",smile:"\u{1F604}",tada:"\u{1F389}\uFE0F"},emojiPath:f.g.CDN+"/dist/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:f.g.HLJS_OPTIONS,markdown:f.g.MARKDOWN_OPTIONS,math:f.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:f.g.THEME_OPTIONS},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,o;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0)&&n.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((o=this.options.hint)===null||o===void 0)&&o.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment));var r=(0,yo.T)(this.defaultOptions,this.options);if(r.cache.enable&&!r.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return r},e.prototype.mergeToolbar=function(t){var n=this,o=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"\u2318E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"\u2318H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"\u2318B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"\u2318I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"\u2318D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"\u2318K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"\u2318L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"\u2318O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"\u2318J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"\u21E7\u2318I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"\u21E7\u2318O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"\u2318;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"\u21E7\u2318H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"\u2318U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"\u2318G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"\u21E7\u2318B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"\u21E7\u2318E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"\u2318M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"\u2318Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"\u2318Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"\u2318'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"\u2318P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],r=[];return t.forEach(function(i){var a=i;o.forEach(function(h){typeof i=="string"&&h.name===i&&(a=h),typeof i=="object"&&h.name===i.name&&(a=Object.assign({},h,i))}),i.toolbar&&(a.toolbar=n.mergeToolbar(i.toolbar)),r.push(a)}),r},e}(),ko=function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var o=document.createElement("div");o.className="vditor-wysiwyg",o.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`+window.VditorI18n.comment+`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`,this.element=o.firstElementChild,this.popover=o.firstElementChild.nextElementSibling,this.selectPopover=o.lastElementChild,this.bindEvent(t),Lt(t,this.element),$t(t,this.element),At(t,this.element),Dt(t,this.element),Ot(t,this.element),Mt(t,this.element),Ht(t,this.element,this.copy),Nt(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var r,i,a=Lute.NewNodeID(),h=getSelection().getRangeAt(0),E=h.cloneRange(),w=h.extractContents(),y=!1,A=!1;w.childNodes.forEach(function(L,j){var K=!1;if(L.nodeType===3?K=!0:L.classList.contains("vditor-comment")?L.classList.contains("vditor-comment")&&L.setAttribute("data-cmtids",L.getAttribute("data-cmtids")+" "+a):K=!0,K)if(L.nodeType!==3&&L.getAttribute("data-block")==="0"&&j===0&&E.startOffset>0)L.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+L.innerHTML+"</span>",r=L;else if(L.nodeType!==3&&L.getAttribute("data-block")==="0"&&j===w.childNodes.length-1&&E.endOffset<E.endContainer.textContent.length)L.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+L.innerHTML+"</span>",i=L;else if(L.nodeType!==3&&L.getAttribute("data-block")==="0")j===0?y=!0:j===w.childNodes.length-1&&(A=!0),L.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+L.innerHTML+"</span>";else{var F=document.createElement("span");F.classList.add("vditor-comment"),F.setAttribute("data-cmtids",a),L.parentNode.insertBefore(F,L),F.appendChild(L)}});var I=(0,v.F9)(E.startContainer);I&&(r?(I.insertAdjacentHTML("beforeend",r.innerHTML),r.remove()):I.textContent.trim().replace(f.g.ZWSP,"")===""&&y&&I.remove());var B=(0,v.F9)(E.endContainer);B&&(i?(B.insertAdjacentHTML("afterbegin",i.innerHTML),i.remove()):B.textContent.trim().replace(f.g.ZWSP,"")===""&&A&&B.remove()),h.insertNode(w),t.options.comment.add(a,h.toString(),n.getComments(t,!0)),Ee(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var o=this;if(n===void 0&&(n=!1),t.currentMode!=="wysiwyg"||!t.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(i){o.commentIds=o.commentIds.concat(i.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var r=[];return n?(this.commentIds.forEach(function(i){r.push({id:i,top:o.element.querySelector('.vditor-comment[data-cmtids="'+i+'"]').offsetTop})}),r):void 0},e.prototype.triggerRemoveComment=function(t){var n,o,r;if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var i=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var a=(n=i,o=this.commentIds,r=new Set(o),n.filter(function(h){return!r.has(h)}));a.length>0&&t.options.comment.remove(a)}},e.prototype.showComment=function(){var t=(0,S.Ny)(this.element);this.selectPopover.setAttribute("style","left:"+t.left+"px;display:block;top:"+Math.max(-8,t.top-21)+"px")},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var r=(0,v.lG)(o.startContainer,"CODE"),i=(0,v.lG)(o.endContainer,"CODE");if(r&&i&&i.isSameNode(r)){var a="";return a=r.parentElement.tagName==="PRE"?o.toString():"`"+o.toString()+"`",t.clipboardData.setData("text/plain",a),void t.clipboardData.setData("text/html","")}var h=(0,v.lG)(o.startContainer,"A"),E=(0,v.lG)(o.endContainer,"A");if(h&&E&&E.isSameNode(h)){var w=h.getAttribute("title")||"";return w&&(w=' "'+w+'"'),t.clipboardData.setData("text/plain","["+o.toString()+"]("+h.getAttribute("href")+w+")"),void t.clipboardData.setData("text/html","")}var y=document.createElement("div");y.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(y.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(k(t,["hint"]),n.popover.style.display==="block"&&n.selectPopover.style.display==="block"){var o=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height==="auto"){if(t.options.toolbarConfig.pin){var r=Math.max(o,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=r),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=r)}}else if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var i=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(o-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=i),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=i)}}}),this.element.addEventListener("scroll",function(){if(k(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var o=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,r=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(r=window.scrollY-t.element.offsetTop+r);var i=Math.max(r,Math.min(o,n.element.clientHeight-21))+"px";n.popover.style.top=i,n.selectPopover.style.top=i}}),this.element.addEventListener("paste",function(o){kt(t,o,{pasteCode:function(r){var i=(0,S.zh)(t),a=document.createElement("template");a.innerHTML=r,i.insertNode(a.content.cloneNode(!0));var h=(0,v.a1)(i.startContainer,"data-block","0");h?h.outerHTML=t.lute.SpinVditorDOM(h.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,S.ib)(t.wysiwyg.element,i)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){var r=(0,N.W)(getSelection().getRangeAt(0).startContainer);r&&r.textContent===""?he(t):((0,l.vU)()||ht(t,getSelection().getRangeAt(0).cloneRange(),o),n.composingLock=!1)}),this.element.addEventListener("input",function(o){if(o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop"){if(n.preventInput)return n.preventInput=!1,void Ee(t);if(n.composingLock||o.data==="\u2018"||o.data==="\u201C"||o.data==="\u300A")Ee(t);else{var r=getSelection().getRangeAt(0),i=(0,v.F9)(r.startContainer);if(i||(Jt(t,r),i=(0,v.F9)(r.startContainer)),i){for(var a=(0,S.im)(i,t.wysiwyg.element,r).start,h=!0,E=a-1;E>i.textContent.substr(0,a).lastIndexOf(`
`);E--)if(i.textContent.charAt(E)!==" "&&i.textContent.charAt(E)!=="	"){h=!1;break}a===0&&(h=!1);var w=!0;for(E=a-1;E<i.textContent.length;E++)if(i.textContent.charAt(E)!==" "&&i.textContent.charAt(E)!==`
`){w=!1;break}var y=(0,N.W)(getSelection().getRangeAt(0).startContainer);y&&y.textContent===""&&(he(t),y.remove()),h&&i.getAttribute("data-type")!=="code-block"||w||Pt(i.innerHTML)||Rt(i.innerHTML)&&i.previousElementSibling||ht(t,r,o)}}}}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT"){var r=o.target;return r.checked?r.setAttribute("checked","checked"):r.removeAttribute("checked"),n.preventInput=!0,void Ee(t)}if(o.target.tagName!=="IMG"||o.target.parentElement.classList.contains("vditor-wysiwyg__preview")){o.target.tagName==="A"&&window.open(o.target.getAttribute("href"));var i=(0,S.zh)(t);if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&i.collapsed){var a=n.element.lastElementChild.getBoundingClientRect();o.y>a.top+a.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(f.g.ZWSP,"")===""?(i.selectNodeContents(n.element.lastElementChild),i.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+f.g.ZWSP+"<wbr></p>"),(0,S.ib)(n.element,i)))}Xe(t);var h=(0,v.fb)(o.target,"vditor-wysiwyg__preview");h||(h=(0,v.fb)((0,S.zh)(t).startContainer,"vditor-wysiwyg__preview")),h&&dt(h,t),ee(o,t)}else o.target.getAttribute("data-type")==="link-ref"?Zt(t,o.target):function(E,w){var y=E.target;w.wysiwyg.popover.innerHTML="";var A=function(){y.setAttribute("src",B.value),y.setAttribute("alt",j.value),y.setAttribute("title",F.value)},I=document.createElement("span");I.setAttribute("aria-label",window.VditorI18n.imageURL),I.className="vditor-tooltipped vditor-tooltipped__n";var B=document.createElement("input");I.appendChild(B),B.className="vditor-input",B.setAttribute("placeholder",window.VditorI18n.imageURL),B.value=y.getAttribute("src")||"",B.oninput=function(){A()},B.onkeydown=function(W){je(w,W)};var L=document.createElement("span");L.setAttribute("aria-label",window.VditorI18n.alternateText),L.className="vditor-tooltipped vditor-tooltipped__n";var j=document.createElement("input");L.appendChild(j),j.className="vditor-input",j.setAttribute("placeholder",window.VditorI18n.alternateText),j.style.width="52px",j.value=y.getAttribute("alt")||"",j.oninput=function(){A()},j.onkeydown=function(W){je(w,W)};var K=document.createElement("span");K.setAttribute("aria-label",window.VditorI18n.title),K.className="vditor-tooltipped vditor-tooltipped__n";var F=document.createElement("input");K.appendChild(F),F.className="vditor-input",F.setAttribute("placeholder",window.VditorI18n.title),F.value=y.getAttribute("title")||"",F.oninput=function(){A()},F.onkeydown=function(W){je(w,W)},Pe(y,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",I),w.wysiwyg.popover.insertAdjacentElement("beforeend",L),w.wysiwyg.popover.insertAdjacentElement("beforeend",K),Re(w,y)}(o,t)}),this.element.addEventListener("keyup",function(o){if(!o.isComposing&&!(0,l.yl)(o)){o.key==="Enter"&&Ae(t),o.key!=="Backspace"&&o.key!=="Delete"||t.wysiwyg.element.innerHTML===""||t.wysiwyg.element.childNodes.length!==1||!t.wysiwyg.element.firstElementChild||t.wysiwyg.element.firstElementChild.tagName!=="P"||t.wysiwyg.element.firstElementChild.childElementCount!==0||t.wysiwyg.element.textContent!==""&&t.wysiwyg.element.textContent!==`
`||(t.wysiwyg.element.innerHTML="");var r=(0,S.zh)(t);if(o.key==="Backspace"&&(0,l.vU)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent=""),Jt(t,r),Xe(t),o.key==="ArrowDown"||o.key==="ArrowRight"||o.key==="Backspace"||o.key==="ArrowLeft"||o.key==="ArrowUp"){o.key!=="ArrowLeft"&&o.key!=="ArrowRight"||t.hint.render(t);var i=(0,v.fb)(r.startContainer,"vditor-wysiwyg__preview");if(!i&&r.startContainer.nodeType!==3&&r.startOffset>0&&(h=r.startContainer).classList.contains("vditor-wysiwyg__block")&&(i=h.lastElementChild),i)if(i.previousElementSibling.style.display!=="none"){var a=i.previousElementSibling;if(a.tagName==="PRE"&&(a=a.firstElementChild),o.key==="ArrowDown"||o.key==="ArrowRight"){var h,E=function(y){for(var A=y;A&&!A.nextSibling;)A=A.parentElement;return A.nextSibling}(h=i.parentElement);if(E&&E.nodeType!==3){var w=E.querySelector(".vditor-wysiwyg__preview");if(w)return void dt(w,t)}if(E.nodeType===3){for(;E.textContent.length===0&&E.nextSibling;)E=E.nextSibling;r.setStart(E,1)}else r.setStart(E.firstChild,0)}else r.selectNodeContents(a),r.collapse(!1)}else o.key==="ArrowDown"||o.key==="ArrowRight"?dt(i,t):dt(i,t,!1)}}})},e}(),Eo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();const xo=function(e){function t(n,o){var r=e.call(this)||this;r.version=f.H,typeof n=="string"&&(o?o.cache?o.cache.id||(o.cache.id="vditor"+n):o.cache={id:"vditor"+n}:o={cache:{id:"vditor"+n}},n=document.getElementById(n));var i=new wo(o).merge();if(i.i18n)window.VditorI18n=i.i18n,r.init(n,i);else{if(!["en_US","ja_JP","ko_KR","ru_RU","zh_CN","zh_TW"].includes(i.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");var a="vditorI18nScript",h=a+i.lang;document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(E){E.id!==h&&document.head.removeChild(E)}),(0,d.G)(i.cdn+"/dist/js/i18n/"+i.lang+".js",h).then(function(){r.init(n,i)})}return r}return Eo(t,e),t.prototype.setTheme=function(n,o,r,i){this.vditor.options.theme=n,Y(this.vditor),o&&(this.vditor.options.preview.theme.current=o,(0,te.Z)(o,i||this.vditor.options.preview.theme.path)),r&&(this.vditor.options.preview.hljs.style=r,(0,Cn.Y)(r,this.vditor.options.cdn))},t.prototype.getValue=function(){return p(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){k(this.vditor,["subToolbar","hint","popover"]),b(this.vditor.toolbar.elements,f.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){g(this.vditor.toolbar.elements,f.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){return this.vditor.currentMode==="wysiwyg"?pt(this.vditor.wysiwyg.element):this.vditor.currentMode==="sv"?pt(this.vditor.sv.element):this.vditor.currentMode==="ir"?pt(this.vditor.ir.element):void 0},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return(0,S.Ny)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.exportJSON=function(n){return this.vditor.lute.RenderJSON(n)},t.prototype.getHTML=function(){return _n(this.vditor)},t.prototype.tip=function(n,o){this.vditor.tip.show(n,o)},t.prototype.setPreviewMode=function(n){qt(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,o){o===void 0&&(o=!0);var r=(0,S.zh)(this.vditor);r.collapse(!0);var i=document.createElement("template");i.innerHTML=n,r.insertNode(i.content.cloneNode(!0)),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,o&&ae(this.vditor)):this.vditor.currentMode==="wysiwyg"?(this.vditor.wysiwyg.preventInput=!0,o&&ht(this.vditor,getSelection().getRangeAt(0))):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,o&&q(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.setValue=function(n,o){var r=this;o===void 0&&(o=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>"+this.vditor.lute.SpinVditorSVDOM(n)+"</div>",De(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?Yt(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(i){Le(i,r.vditor)}),Ve(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(k(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),o&&this.clearStack()},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var n=document.getElementById("vditorIconScript");n&&n.remove(),this.clearCache(),se(),this.vditor.wysiwyg.unbindListener()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(r){r.classList.remove("vditor-comment--hover"),n.forEach(function(i){r.getAttribute("data-cmtids").indexOf(i)>-1&&r.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(r){n.forEach(function(i){r.getAttribute("data-cmtids").indexOf(i)>-1&&r.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)})}},t.prototype.removeCommentIds=function(n){var o=this;if(this.vditor.currentMode==="wysiwyg"){var r=function(i,a){var h=i.getAttribute("data-cmtids").split(" ");h.find(function(E,w){if(E===a)return h.splice(w,1),!0}),h.length===0?(i.outerHTML=i.innerHTML,(0,S.zh)(o.vditor).collapse(!0)):i.setAttribute("data-cmtids",h.join(" "))};n.forEach(function(i){o.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a,i)}),o.vditor.preview.element.style.display!=="none"&&o.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a,i)})}),Ee(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(n,o){var r=this;this.vditor={currentMode:o.mode,element:n,hint:new fr(o.hint.extend),lute:void 0,options:o,originalInnerHTML:n.innerHTML,outline:new gr(window.VditorI18n.outline),tip:new Er},this.vditor.sv=new kr(this.vditor),this.vditor.undo=new bo,this.vditor.wysiwyg=new ko(this.vditor),this.vditor.ir=new vr(this.vditor),this.vditor.toolbar=new ho(this.vditor),o.resize.enable&&(this.vditor.resize=new wr(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new m),(o.upload.url||o.upload.handler)&&(this.vditor.upload=new ir),(0,d.G)(o._lutePath||o.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){r.vditor.lute=(0,hr.X)({autoSpace:r.vditor.options.preview.markdown.autoSpace,codeBlockPreview:r.vditor.options.preview.markdown.codeBlockPreview,emojiSite:r.vditor.options.hint.emojiPath,emojis:r.vditor.options.hint.emoji,fixTermTypo:r.vditor.options.preview.markdown.fixTermTypo,footnotes:r.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:r.vditor.options.preview.math.inlineDigit,linkBase:r.vditor.options.preview.markdown.linkBase,linkPrefix:r.vditor.options.preview.markdown.linkPrefix,listStyle:r.vditor.options.preview.markdown.listStyle,mark:r.vditor.options.preview.markdown.mark,mathBlockPreview:r.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:r.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:r.vditor.options.preview.markdown.sanitize,toc:r.vditor.options.preview.markdown.toc}),r.vditor.preview=new yr(r.vditor),function(i){i.element.innerHTML="",i.element.classList.add("vditor"),i.options.rtl&&i.element.setAttribute("dir","rtl"),Y(i),(0,te.Z)(i.options.preview.theme.current,i.options.preview.theme.path),typeof i.options.height=="number"?i.element.style.height=i.options.height+"px":i.element.style.height=i.options.height,typeof i.options.minHeight=="number"&&(i.element.style.minHeight=i.options.minHeight+"px"),typeof i.options.width=="number"?i.element.style.width=i.options.width+"px":i.element.style.width=i.options.width,i.element.appendChild(i.toolbar.element);var a=document.createElement("div");if(a.className="vditor-content",i.options.outline.position==="left"&&a.appendChild(i.outline.element),a.appendChild(i.wysiwyg.element.parentElement),a.appendChild(i.sv.element),a.appendChild(i.ir.element.parentElement),a.appendChild(i.preview.element),i.toolbar.elements.devtools&&a.appendChild(i.devtools.element),i.options.outline.position==="right"&&(i.outline.element.classList.add("vditor-outline--right"),a.appendChild(i.outline.element)),i.upload&&a.appendChild(i.upload.element),i.options.resize.enable&&a.appendChild(i.resize.element),a.appendChild(i.hint.element),a.appendChild(i.tip.element),i.element.appendChild(a),a.addEventListener("click",function(){k(i,["subToolbar"])}),i.toolbar.elements.export&&i.element.insertAdjacentHTML("beforeend",'<iframe style="width: 100%;height: 0;border: 0"></iframe>'),Je(i,i.options.mode,Yn(i)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&window.visualViewport!==void 0){var h=!1,E=function(w){h||(h=!0,requestAnimationFrame(function(){h=!1;var y=i.toolbar.element;y.style.transform="none",y.getBoundingClientRect().top<0&&(y.style.transform="translate(0, "+-y.getBoundingClientRect().top+"px)")}))};window.visualViewport.addEventListener("scroll",E),window.visualViewport.addEventListener("resize",E)}}(r.vditor),o.after&&o.after(),o.icon&&(0,d.J)(o.cdn+"/dist/js/icons/"+o.icon+".js","vditorIconScript")})},t}(_.default)})(),Te=Te.default})()})})(Jn);var Vo=qn(Jn.exports);const ze=(me,ge="default")=>{const pe=me==="dark";switch(ge){case"default":return pe?"dark":"classic";case"content":return pe?"dark":"light";case"code":return pe?"dracula":"github"}},Uo=Wt({inheritAttrs:!1,props:{height:{type:Number,default:360},value:{type:String,default:""}},emits:["change","get","update:value"],setup(me,{attrs:ge,emit:pe}){const _e=Ke(null),U=Ke(null),Te=Ke(!1),O=qo(),{getLocale:_}=Mo(),{getDarkMode:f}=zn(),c=Ke(me.value||"");_t([()=>f.value,()=>Te.value],([s,u])=>{var g;!u||(g=m.getVditor())==null||g.setTheme(ze(s),ze(s,"content"),ze(s,"code"))},{immediate:!0,flush:"post"}),_t(()=>me.value,s=>{var u;s!==c.value&&((u=m.getVditor())==null||u.setValue(s)),c.value=s});const p=Ho(()=>{let s;switch(lt(_)){case"en":s="en_US";break;case"ja":s="ja_JP";break;case"ko":s="ko_KR";break;default:s="zh_CN"}return s});function d(){const s=lt(_e);if(!s)return;const u=Ye(Ye({},ge),me),g=new Vo(s,jn(Ye({theme:ze(f.value),lang:lt(p),mode:"sv",fullscreen:{index:520},preview:{theme:{current:ze(f.value,"content")},hljs:{style:ze(f.value,"code")},actions:[]},input:b=>{c.value=b,pe("update:value",b),pe("change",b)},after:()=>{No(()=>{var b;(b=O==null?void 0:O.redoModalHeight)==null||b.call(O),g.setValue(c.value),U.value=g,Te.value=!0,pe("get",m)})},blur:()=>{}},u),{cache:{enable:!1}}))}const m={getVditor:()=>U.value};function l(){var u;const s=lt(U);if(!!s){try{(u=s==null?void 0:s.destroy)==null||u.call(s)}catch(g){}U.value=null,Te.value=!1}}return Xn(d),Vn(l),Un(l),Ye({wrapRef:_e},m)}}),Go={ref:"wrapRef"};function Wo(me,ge,pe,_e,U,Te){return St(),Wn("div",Go,null,512)}var Fo=Gn(Uo,[["render",Wo]]),Zn={exports:{}};(function(me,ge){(function(pe,_e){me.exports=_e()})(Bn,function(){return(()=>{var pe={54:(O,_,f)=>{f.d(_,{g:()=>c});var c=function(){function p(){}return p.ZWSP="\u200B",p.DROP_EDITOR="application/editor",p.MOBILE_WIDTH=520,p.CLASS_MENU_DISABLED="vditor-menu--disabled",p.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],p.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],p.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],p.CDN="https://unpkg.com/vditor@3.8.15",p.MARKDOWN_OPTIONS={autoSpace:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},p.HLJS_OPTIONS={enable:!0,lineNumber:!1,style:"github"},p.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},p.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:p.CDN+"/dist/css/content-theme"},p}()},478:(O,_,f)=>{f.d(_,{Q:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var u=d.abcRenderAdapter.getElements(l);u.length>0&&(0,p.G)(s+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){u.forEach(function(g){g.parentElement.classList.contains("vditor-wysiwyg__pre")||g.parentElement.classList.contains("vditor-ir__marker--pre")||g.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(g,d.abcRenderAdapter.getCode(g).trim()),g.style.overflowX="auto",g.setAttribute("data-processed","true"))})})}},156:(O,_,f)=>{f.r(_),f.d(_,{mathRenderAdapter:()=>c,mermaidRenderAdapter:()=>p,mindmapRenderAdapter:()=>d,chartRenderAdapter:()=>m,abcRenderAdapter:()=>l,graphvizRenderAdapter:()=>s,flowchartRenderAdapter:()=>u,plantumlRenderAdapter:()=>g});var c={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-math")}},p={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-mermaid")}},d={getCode:function(b){return b.getAttribute("data-code")},getElements:function(b){return b.querySelectorAll(".language-mindmap")}},m={getCode:function(b){return b.innerText},getElements:function(b){return b.querySelectorAll(".language-echarts")}},l={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-abc")}},s={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-graphviz")}},u={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-flowchart")}},g={getCode:function(b){return b.textContent},getElements:function(b){return b.querySelectorAll(".language-plantuml")}}},314:(O,_,f)=>{f.d(_,{p:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var g=d.chartRenderAdapter.getElements(l);g.length>0&&(0,p.G)(s+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){g.forEach(function(b){if(!b.parentElement.classList.contains("vditor-wysiwyg__pre")&&!b.parentElement.classList.contains("vditor-ir__marker--pre")){var C=d.chartRenderAdapter.getCode(b).trim();if(C)try{if(b.getAttribute("data-processed")==="true")return;var T=JSON.parse(C);echarts.init(b,u==="dark"?"dark":void 0).setOption(T),b.setAttribute("data-processed","true")}catch(k){b.className="vditor-reset--error",b.innerHTML="echarts render error: <br>"+k}}})})}},730:(O,_,f)=>{f.d(_,{O:()=>p});var c=f(51),p=function(d){d.querySelectorAll("pre > code").forEach(function(m,l){var s,u,g;if(!m.parentElement.classList.contains("vditor-wysiwyg__pre")&&!m.parentElement.classList.contains("vditor-ir__marker--pre")&&!(m.classList.contains("language-mermaid")||m.classList.contains("language-flowchart")||m.classList.contains("language-echarts")||m.classList.contains("language-mindmap")||m.classList.contains("language-plantuml")||m.classList.contains("language-abc")||m.classList.contains("language-graphviz")||m.classList.contains("language-math")||m.style.maxHeight.indexOf("px")>-1||d.classList.contains("vditor-preview")&&l>5)){var b=m.innerText;if(m.classList.contains("highlight-chroma")){var C=document.createElement("code");C.innerHTML=m.innerHTML,C.querySelectorAll(".highlight-ln").forEach(function(v){v.remove()}),b=C.innerText}var T='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(T='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var k=document.createElement("div");k.className="vditor-copy",k.innerHTML='<span aria-label="'+(((s=window.VditorI18n)===null||s===void 0?void 0:s.copy)||"\u590D\u5236")+`"
onmouseover="this.setAttribute('aria-label', '`+(((u=window.VditorI18n)===null||u===void 0?void 0:u.copy)||"\u590D\u5236")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((g=window.VditorI18n)===null||g===void 0?void 0:g.copy)||"\u5DF2\u590D\u5236")+`')">`+T+"</span>";var x=document.createElement("textarea");x.value=(0,c.X)(b),k.insertAdjacentElement("afterbegin",x),m.before(k),m.style.maxHeight=window.outerHeight-40+"px"}})}},66:(O,_,f)=>{f.d(_,{P:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){s===void 0&&(s=c.g.CDN);var u=d.flowchartRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){u.forEach(function(g){if(g.getAttribute("data-processed")!=="true"){var b=flowchart.parse(d.flowchartRenderAdapter.getCode(g));g.innerHTML="",b.drawSVG(g),g.setAttribute("data-processed","true")}})})}},218:(O,_,f)=>{f.d(_,{v:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){s===void 0&&(s=c.g.CDN);var u=d.graphvizRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){u.forEach(function(g){var b=d.graphvizRenderAdapter.getCode(g);if(!g.parentElement.classList.contains("vditor-wysiwyg__pre")&&!g.parentElement.classList.contains("vditor-ir__marker--pre")&&g.getAttribute("data-processed")!=="true"&&b.trim()!==""){try{var C=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),T=(window.URL||window.webkitURL).createObjectURL(C),k=new Worker(T);new Viz({worker:k}).renderSVGElement(b).then(function(x){g.innerHTML=x.outerHTML}).catch(function(x){g.innerHTML="graphviz render error: <br>"+x,g.className="vditor-reset--error"})}catch(x){console.error("graphviz error",x)}g.setAttribute("data-processed","true")}})})}},702:(O,_,f)=>{f.d(_,{s:()=>m});var c=f(54),p=f(526),d=f(578),m=function(l,s,u){s===void 0&&(s=document),u===void 0&&(u=c.g.CDN);var g=l.style;c.g.CODE_THEME.includes(g)||(g="github");var b=document.getElementById("vditorHljsStyle"),C=u+"/dist/js/highlight.js/styles/"+g+".css";b&&b.href!==C&&b.remove(),(0,d.c)(u+"/dist/js/highlight.js/styles/"+g+".css","vditorHljsStyle"),l.enable!==!1&&s.querySelectorAll("pre > code").length!==0&&(0,p.G)(u+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,p.G)(u+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,p.G)(u+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){s.querySelectorAll("pre > code").forEach(function(T){if(!T.parentElement.classList.contains("vditor-ir__marker--pre")&&!T.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(T.classList.contains("language-mermaid")||T.classList.contains("language-flowchart")||T.classList.contains("language-echarts")||T.classList.contains("language-mindmap")||T.classList.contains("language-plantuml")||T.classList.contains("language-abc")||T.classList.contains("language-graphviz")||T.classList.contains("language-math"))&&(hljs.highlightElement(T),l.lineNumber)){T.classList.add("vditor-linenumber");var k=T.querySelector(".vditor-linenumber__temp");k||((k=document.createElement("div")).className="vditor-linenumber__temp",T.insertAdjacentElement("beforeend",k));var x=getComputedStyle(T).whiteSpace,v=!1;x!=="pre-wrap"&&x!=="pre-line"||(v=!0);var N="",P=T.textContent.split(/\r\n|\r|\n/g);P.pop(),P.map(function(J){var $="";v&&(k.textContent=J||`
`,$=' style="height:'+k.getBoundingClientRect().height+'px"'),N+="<span"+$+"></span>"}),k.style.display="none",N='<span class="vditor-linenumber__rows">'+N+"</span>",T.insertAdjacentHTML("beforeend",N)}})})})})}},466:(O,_,f)=>{f.d(_,{H:()=>s});var c=f(54),p=f(526),d=f(578),m=f(51),l=f(156),s=function(u,g){var b=l.mathRenderAdapter.getElements(u);if(b.length!==0){var C={cdn:c.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(g&&g.math&&(g.math=Object.assign({},C.math,g.math)),(g=Object.assign({},C,g)).math.engine==="KaTeX")(0,d.c)(g.cdn+"/dist/js/katex/katex.min.css","vditorKatexStyle"),(0,p.G)(g.cdn+"/dist/js/katex/katex.min.js","vditorKatexScript").then(function(){(0,p.G)(g.cdn+"/dist/js/katex/mhchem.min.js","vditorKatexChemScript").then(function(){b.forEach(function(k){if(!k.parentElement.classList.contains("vditor-wysiwyg__pre")&&!k.parentElement.classList.contains("vditor-ir__marker--pre")&&!k.getAttribute("data-math")){var x=(0,m.X)(l.mathRenderAdapter.getCode(k));k.setAttribute("data-math",x);try{k.innerHTML=katex.renderToString(x,{displayMode:k.tagName==="DIV",output:"html"})}catch(v){k.innerHTML=v.message,k.className="language-math vditor-reset--error"}k.addEventListener("copy",function(v){v.stopPropagation(),v.preventDefault();var N=v.currentTarget.closest(".language-math");v.clipboardData.setData("text/html",N.innerHTML),v.clipboardData.setData("text/plain",N.getAttribute("data-math"))})}})})});else if(g.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:g.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:g.math.macros}}),(0,p.J)(g.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript");var T=function(k,x){var v=(0,m.X)(k.textContent).trim(),N=window.MathJax.getMetricsFor(k);N.display=k.tagName==="DIV",window.MathJax.tex2svgPromise(v,N).then(function(P){k.innerHTML="",k.setAttribute("data-math",v),k.append(P),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var J=P.querySelector('[data-mml-node="merror"]');J&&J.textContent.trim()!==""&&(k.innerHTML=J.textContent.trim(),k.className="vditor-reset--error"),x&&x()})};window.MathJax.startup.promise.then(function(){for(var k=[],x=function(N){var P=b[N];P.parentElement.classList.contains("vditor-wysiwyg__pre")||P.parentElement.classList.contains("vditor-ir__marker--pre")||P.getAttribute("data-math")||!(0,m.X)(P.textContent).trim()||k.push(function(J){N===b.length-1?T(P):T(P,J)})},v=0;v<b.length;v++)x(v);(function(N){if(N.length!==0){var P=0,J=N[N.length-1],$=function(){var ie=N[P++];ie===J?ie():ie($)};$()}})(k)})}}}},554:(O,_,f)=>{f.d(_,{Y:()=>c});var c=function(p){p&&p.querySelectorAll("a").forEach(function(d){var m=d.getAttribute("href");m&&(m.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(l,s){l.insertAdjacentHTML("afterend",'<video controls="controls" src="'+s+'"></video>'),l.remove()}(d,m):m.match(/^.+.(mp3|wav|flac)$/)?function(l,s){l.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+s+'"></audio>'),l.remove()}(d,m):function(l,s){var u=s.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),g=s.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),b=s.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),C=s.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),T=s.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),k=s.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),x=s.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),v=s.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);u&&u[1].length===11?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+u[1]+(u[2]?"?start="+u[2]:"")+'"></iframe>'),l.remove()):g&&g[1]?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+g[1]+'"></iframe>'),l.remove()):b&&b[1]?(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+b[1]+'"></iframe>'),l.remove()):C&&C[1]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+C[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),l.remove()):T&&T[0]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(T[0])+'"></iframe>'),l.remove()):k&&k[2]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+k[2]+'"></iframe>'),l.remove()):x&&x[1]?(l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+x[1]+'"></iframe>'),l.remove()):v&&v[1]&&(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+v[1]+'"></iframe>'),l.remove())}(d,m))})}},40:(O,_,f)=>{f.d(_,{i:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){s===void 0&&(s=c.g.CDN);var g=d.mermaidRenderAdapter.getElements(l);g.length!==0&&(0,p.G)(s+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var b={altFontFamily:"sans-serif",flowchart:{htmlLabels:!0,useMaxWidth:!0},fontFamily:"sans-serif",gantt:{leftPadding:75,rightPadding:20},securityLevel:"loose",sequence:{boxMargin:8,diagramMarginX:8,diagramMarginY:8,useMaxWidth:!0},startOnLoad:!1};u==="dark"&&(b.theme="dark",b.themeVariables={activationBkgColor:"hsl(180, 1.5873015873%, 28.3529411765%)",activationBorderColor:"#81B1DB",activeTaskBkgColor:"#81B1DB",activeTaskBorderColor:"#ffffff",actorBkg:"#1f2020",actorBorder:"#81B1DB",actorLineColor:"lightgrey",actorTextColor:"lightgrey",altBackground:"hsl(0, 0%, 40%)",altSectionBkgColor:"#333",arrowheadColor:"lightgrey",background:"#333",border1:"#81B1DB",border2:"rgba(255, 255, 255, 0.25)",classText:"#e0dfdf",clusterBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",clusterBorder:"rgba(255, 255, 255, 0.25)",critBkgColor:"#E83737",critBorderColor:"#E83737",darkTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",defaultLinkColor:"lightgrey",doneTaskBkgColor:"lightgrey",doneTaskBorderColor:"grey",edgeLabelBackground:"hsl(0, 0%, 34.4117647059%)",errorBkgColor:"#a44141",errorTextColor:"#ddd",fillType0:"#1f2020",fillType1:"hsl(180, 1.5873015873%, 28.3529411765%)",fillType2:"hsl(244, 1.5873015873%, 12.3529411765%)",fillType3:"hsl(244, 1.5873015873%, 28.3529411765%)",fillType4:"hsl(116, 1.5873015873%, 12.3529411765%)",fillType5:"hsl(116, 1.5873015873%, 28.3529411765%)",fillType6:"hsl(308, 1.5873015873%, 12.3529411765%)",fillType7:"hsl(308, 1.5873015873%, 28.3529411765%)",fontFamily:'"trebuchet ms", verdana, arial',fontSize:"16px",gridColor:"lightgrey",labelBackground:"#181818",labelBoxBkgColor:"#1f2020",labelBoxBorderColor:"#81B1DB",labelColor:"#ccc",labelTextColor:"lightgrey",lineColor:"lightgrey",loopTextColor:"lightgrey",mainBkg:"#1f2020",mainContrastColor:"lightgrey",nodeBkg:"#1f2020",nodeBorder:"#81B1DB",noteBkgColor:"#fff5ad",noteBorderColor:"rgba(255, 255, 255, 0.25)",noteTextColor:"#1f2020",primaryBorderColor:"hsl(180, 0%, 2.3529411765%)",primaryColor:"#1f2020",primaryTextColor:"#e0dfdf",secondBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryBorderColor:"hsl(180, 0%, 18.3529411765%)",secondaryColor:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryTextColor:"rgb(183.8476190475, 181.5523809523, 181.5523809523)",sectionBkgColor:"hsl(52.9411764706, 28.813559322%, 58.431372549%)",sectionBkgColor2:"#EAE8D9",sequenceNumberColor:"black",signalColor:"lightgrey",signalTextColor:"lightgrey",taskBkgColor:"hsl(180, 1.5873015873%, 35.3529411765%)",taskBorderColor:"#ffffff",taskTextClickableColor:"#003163",taskTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextDarkColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextLightColor:"lightgrey",taskTextOutsideColor:"lightgrey",tertiaryBorderColor:"hsl(20, 0%, 2.3529411765%)",tertiaryColor:"hsl(20, 1.5873015873%, 12.3529411765%)",tertiaryTextColor:"rgb(222.9999999999, 223.6666666666, 223.9999999999)",textColor:"#ccc",titleColor:"#F9FFFE",todayLineColor:"#DB5757"}),mermaid.initialize(b),g.forEach(function(C){var T=d.mermaidRenderAdapter.getCode(C);C.getAttribute("data-processed")!=="true"&&T.trim()!==""&&(mermaid.init(void 0,C),C.setAttribute("data-processed","true"))})})}},749:(O,_,f)=>{f.d(_,{P:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s,u){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var g=d.mindmapRenderAdapter.getElements(l);g.length>0&&(0,p.G)(s+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){g.forEach(function(b){if(!b.parentElement.classList.contains("vditor-wysiwyg__pre")&&!b.parentElement.classList.contains("vditor-ir__marker--pre")){var C=d.mindmapRenderAdapter.getCode(b);if(C)try{if(b.getAttribute("data-processed")==="true")return;echarts.init(b,u==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(C))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(T,k){var x;return!((x=k==null?void 0:k.data)===null||x===void 0)&&x.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),b.setAttribute("data-processed","true")}catch(T){b.className="vditor-reset--error",b.innerHTML="mindmap render error: <br>"+T}}})})}},818:(O,_,f)=>{f.d(_,{k:()=>d});var c=f(64),p=f(466),d=function(m,l,s){var u="",g=[];if(Array.from(m.children).forEach(function(k,x){if((0,c.W)(k)){if(s){var v=k.id.lastIndexOf("_");k.id=k.id.substring(0,v===-1?void 0:v)+"_"+x}g.push(k.id),u+=k.outerHTML.replace("<wbr>","")}}),u==="")return l.innerHTML="","";var b=document.createElement("div");if(s)s.lute.SetToC(!0),s.currentMode!=="wysiwyg"||s.preview.element.contains(m)?s.currentMode!=="ir"||s.preview.element.contains(m)?b.innerHTML=s.lute.HTML2VditorDOM("<p>[ToC]</p>"+u):b.innerHTML=s.lute.SpinVditorIRDOM("<p>[ToC]</p>"+u):b.innerHTML=s.lute.SpinVditorDOM("<p>[ToC]</p>"+u),s.lute.SetToC(s.options.preview.markdown.toc);else{l.classList.add("vditor-outline");var C=Lute.New();C.SetToC(!0),b.innerHTML=C.HTML2VditorDOM("<p>[ToC]</p>"+u)}var T=b.firstElementChild.querySelectorAll("li > span[data-target-id]");return T.forEach(function(k,x){if(k.nextElementSibling&&k.nextElementSibling.tagName==="UL"){var v="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(v='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),k.innerHTML=v+"<span>"+k.innerHTML+"</span>"}else k.innerHTML="<svg></svg><span>"+k.innerHTML+"</span>";k.setAttribute("data-target-id",g[x])}),u=b.firstElementChild.innerHTML,T.length===0?(l.innerHTML="",u):(l.innerHTML=u,s&&(0,p.H)(l,{cdn:s.options.cdn,math:s.options.preview.math}),l.firstElementChild.addEventListener("click",function(k){for(var x=k.target;x&&!x.isEqualNode(l);){if(x.classList.contains("vditor-outline__action")){x.classList.contains("vditor-outline__action--close")?(x.classList.remove("vditor-outline__action--close"),x.parentElement.nextElementSibling.setAttribute("style","display:block")):(x.classList.add("vditor-outline__action--close"),x.parentElement.nextElementSibling.setAttribute("style","display:none")),k.preventDefault(),k.stopPropagation();break}if(x.getAttribute("data-target-id")){k.preventDefault(),k.stopPropagation();var v=document.getElementById(x.getAttribute("data-target-id"));if(!v)return;if(s)if(s.options.height==="auto"){var N=v.offsetTop+s.element.offsetTop;s.options.toolbarConfig.pin||(N+=s.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,N)}else s.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,s.element.offsetTop),s.preview.element.contains(m)?m.parentElement.scrollTop=v.offsetTop:m.scrollTop=v.offsetTop;else window.scrollTo(window.scrollX,v.offsetTop);break}x=x.parentElement}}),u)}},408:(O,_,f)=>{f.d(_,{B:()=>m});var c=f(54),p=f(526),d=f(156),m=function(l,s){l===void 0&&(l=document),s===void 0&&(s=c.g.CDN);var u=d.plantumlRenderAdapter.getElements(l);u.length!==0&&(0,p.G)(s+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){u.forEach(function(g){if(!g.parentElement.classList.contains("vditor-wysiwyg__pre")&&!g.parentElement.classList.contains("vditor-ir__marker--pre")){var b=d.plantumlRenderAdapter.getCode(g).trim();if(b)try{g.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(b)+'">'}catch(C){g.className="vditor-reset--error",g.innerHTML="plantuml render error: <br>"+C}}})})}},895:(O,_,f)=>{f.d(_,{X:()=>c});var c=function(p){var d=Lute.New();return d.PutEmojis(p.emojis),d.SetEmojiSite(p.emojiSite),d.SetHeadingAnchor(p.headingAnchor),d.SetInlineMathAllowDigitAfterOpenMarker(p.inlineMathDigit),d.SetAutoSpace(p.autoSpace),d.SetToC(p.toc),d.SetFootnotes(p.footnotes),d.SetFixTermTypo(p.fixTermTypo),d.SetVditorCodeBlockPreview(p.codeBlockPreview),d.SetVditorMathBlockPreview(p.mathBlockPreview),d.SetSanitize(p.sanitize),d.SetChineseParagraphBeginningSpace(p.paragraphBeginningSpace),d.SetRenderListStyle(p.listStyle),d.SetLinkBase(p.linkBase),d.SetLinkPrefix(p.linkPrefix),d.SetMark(p.mark),p.lazyLoadImage&&d.SetImageLazyLoading(p.lazyLoadImage),d}},863:(O,_,f)=>{f.d(_,{E:()=>c});var c=function(p,d,m){m===void 0&&(m="classic");var l=p.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(m==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+p.width+"px;height:"+p.height+"px;transform: translate3d("+l.left+"px, "+(l.top-36)+'px, 0)" src="'+p.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var s=document.querySelector(".vditor-img img"),u="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-p.naturalHeight)/2+"px, 0)";setTimeout(function(){s.setAttribute("style","transition: transform .3s ease-in-out;transform: "+u),setTimeout(function(){s.parentElement.scrollTo((s.parentElement.scrollWidth-s.parentElement.clientWidth)/2,(s.parentElement.scrollHeight-s.parentElement.clientHeight)/2)},400)});var g=document.querySelector(".vditor-img__btn");g.addEventListener("click",function(){var b=parseInt(g.getAttribute("data-deg"),10)+90;b/90%2==1&&p.naturalWidth>s.parentElement.clientHeight?s.style.transform="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+(p.naturalWidth/2-p.naturalHeight/2)+"px, 0) rotateZ("+b+"deg)":s.style.transform=u+" rotateZ("+b+"deg)",g.setAttribute("data-deg",b.toString()),setTimeout(function(){s.parentElement.scrollTo((s.parentElement.scrollWidth-s.parentElement.clientWidth)/2,(s.parentElement.scrollHeight-s.parentElement.clientHeight)/2)},400)})}},312:(O,_,f)=>{f.d(_,{Y:()=>d});var c=f(54),p=f(578),d=function(m,l){l===void 0&&(l=c.g.CDN),c.g.CODE_THEME.includes(m)||(m="github");var s=document.getElementById("vditorHljsStyle"),u=l+"/dist/js/highlight.js/styles/"+m+".css";s?s.href!==u&&(s.remove(),(0,p.c)(u,"vditorHljsStyle")):(0,p.c)(u,"vditorHljsStyle")}},227:(O,_,f)=>{f.d(_,{Z:()=>p});var c=f(578),p=function(d,m){if(d&&m){var l=document.getElementById("vditorContentTheme"),s=m+"/"+d+".css";l?l.getAttribute("href")!==s&&(l.remove(),(0,c.c)(s,"vditorContentTheme")):(0,c.c)(s,"vditorContentTheme")}}},526:(O,_,f)=>{f.d(_,{J:()=>c,G:()=>p});var c=function(d,m){if(document.getElementById(m))return!1;var l=new XMLHttpRequest;l.open("GET",d,!1),l.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),l.send("");var s=document.createElement("script");s.type="text/javascript",s.text=l.responseText,s.id=m,document.head.appendChild(s)},p=function(d,m){return new Promise(function(l,s){if(document.getElementById(m))return l(),!1;var u=document.createElement("script");u.src=d,u.async=!0,document.head.appendChild(u),u.onload=function(){if(document.getElementById(m))return u.remove(),l(),!1;u.id=m,l()}})}},578:(O,_,f)=>{f.d(_,{c:()=>c});var c=function(p,d){if(!document.getElementById(d)){var m=document.createElement("link");m.id=d,m.rel="stylesheet",m.type="text/css",m.href=p,document.getElementsByTagName("head")[0].appendChild(m)}}},51:(O,_,f)=>{f.d(_,{X:()=>c});var c=function(p){return p.replace(/\u00a0/g," ")}},827:(O,_,f)=>{f.d(_,{lG:()=>c,fb:()=>p});var c=function(d,m){if(!d)return!1;d.nodeType===3&&(d=d.parentElement);for(var l=d,s=!1;l&&!s&&!l.classList.contains("vditor-reset");)l.nodeName===m?s=!0:l=l.parentElement;return s&&l},p=function(d,m){if(!d)return!1;d.nodeType===3&&(d=d.parentElement);for(var l=d,s=!1;l&&!s&&!l.classList.contains("vditor-reset");)l.classList.contains(m)?s=!0:l=l.parentElement;return s&&l}},64:(O,_,f)=>{f.d(_,{W:()=>c});var c=function(p){var d=function(m,l){if(!m)return!1;m.nodeType===3&&(m=m.parentElement);for(var s=m,u=!1;s&&!u&&!s.classList.contains("vditor-reset");)s.nodeName.indexOf(l)===0?u=!0:s=s.parentElement;return u&&s}(p,"H");return!(!d||d.tagName.length!==2||d.tagName==="HR")&&d}},640:(O,_,f)=>{f.d(_,{T:()=>c});var c=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];for(var m={},l=function(u){for(var g in u)u.hasOwnProperty(g)&&(Object.prototype.toString.call(u[g])==="[object Object]"?m[g]=c(m[g],u[g]):m[g]=u[g])},s=0;s<p.length;s++)l(p[s]);return m}},393:(O,_,f)=>{f.d(_,{Hc:()=>c}),f(54);var c=function(p){var d=window.getSelection();d.removeAllRanges(),d.addRange(p)}}},_e={};function U(O){var _=_e[O];if(_!==void 0)return _.exports;var f=_e[O]={exports:{}};return pe[O](f,f.exports,U),f.exports}U.d=(O,_)=>{for(var f in _)U.o(_,f)&&!U.o(O,f)&&Object.defineProperty(O,f,{enumerable:!0,get:_[f]})},U.o=(O,_)=>Object.prototype.hasOwnProperty.call(O,_),U.r=O=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var Te={};return(()=>{U.d(Te,{default:()=>Le});var O=U(478),_=U(156),f=U(314),c=U(730),p=U(66),d=U(218),m=U(702),l=function(S){S===void 0&&(S=document);var he=function(ee){var H=document.createElement("img");H.src=ee.getAttribute("data-src"),H.addEventListener("load",function(){ee.getAttribute("style")||ee.getAttribute("class")||ee.getAttribute("width")||ee.getAttribute("height")||H.naturalHeight>H.naturalWidth&&H.naturalWidth/H.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&H.naturalHeight>window.innerHeight-40&&(ee.style.height=window.innerHeight-40+"px"),ee.src=H.src}),ee.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return S.querySelectorAll("img").forEach(function(ee){ee.getAttribute("data-src")&&he(ee)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),S.querySelectorAll("img").forEach(function(ee){window.vditorImageIntersectionObserver.observe(ee)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(ee){ee.forEach(function(H){(H.isIntersecting===void 0?H.intersectionRatio!==0:H.isIntersecting)&&H.target.getAttribute("data-src")&&he(H.target)})}),S.querySelectorAll("img").forEach(function(ee){window.vditorImageIntersectionObserver.observe(ee)}))},s=U(466),u=U(554),g=U(40),b=U(749),C=U(818),T=U(408),k=U(54),x=U(227),v=U(526),N=U(827),P=U(640),J=U(895),$=U(393),ie=function(S,he){if(he===void 0&&(he="zh_CN"),typeof speechSynthesis!="undefined"&&typeof SpeechSynthesisUtterance!="undefined"){var ee='<svg><use xlink:href="#vditor-icon-play"></use></svg>',H='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(ee='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',H='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var q=document.querySelector(".vditor-speech");if(!q){(q=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",q);var R=function(){var G,ae;return speechSynthesis.getVoices().forEach(function(te){te.lang===he.replace("_","-")&&(G=te),te.default&&(ae=te)}),G||(G=ae),G};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=R);var D=R();q.onclick=function(){if(q.className==="vditor-speech"){var G=new SpeechSynthesisUtterance(q.getAttribute("data-text"));G.voice=D,G.onend=function(){q.className="vditor-speech",speechSynthesis.cancel(),q.innerHTML=ee},speechSynthesis.speak(G),q.className="vditor-speech vditor-speech--current",q.innerHTML=H}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),q.innerHTML=H):(speechSynthesis.pause(),q.innerHTML=ee));(0,$.Hc)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&q.style.display==="block"&&(q.className="vditor-speech",speechSynthesis.cancel(),q.style.display="none")})}S.addEventListener("mouseup",function(G){var ae=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()!==""){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var te=getSelection().getRangeAt(0).getBoundingClientRect();q.innerHTML=ee,q.style.display="block",q.style.top=te.top+te.height+document.querySelector("html").scrollTop-20+"px",q.style.left=G.screenX+2+"px",q.setAttribute("data-text",ae)}else q.style.display==="block"&&(q.className="vditor-speech",q.style.display="none")})}},de=function(S,he,ee,H){return new(ee||(ee=Promise))(function(q,R){function D(te){try{ae(H.next(te))}catch(Y){R(Y)}}function G(te){try{ae(H.throw(te))}catch(Y){R(Y)}}function ae(te){var Y;te.done?q(te.value):(Y=te.value,Y instanceof ee?Y:new ee(function(ue){ue(Y)})).then(D,G)}ae((H=H.apply(S,he||[])).next())})},we=function(S,he){var ee,H,q,R,D={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return R={next:G(0),throw:G(1),return:G(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function G(ae){return function(te){return function(Y){if(ee)throw new TypeError("Generator is already executing.");for(;D;)try{if(ee=1,H&&(q=2&Y[0]?H.return:Y[0]?H.throw||((q=H.return)&&q.call(H),0):H.next)&&!(q=q.call(H,Y[1])).done)return q;switch(H=0,q&&(Y=[2&Y[0],q.value]),Y[0]){case 0:case 1:q=Y;break;case 4:return D.label++,{value:Y[1],done:!1};case 5:D.label++,H=Y[1],Y=[0];continue;case 7:Y=D.ops.pop(),D.trys.pop();continue;default:if(q=D.trys,!((q=q.length>0&&q[q.length-1])||Y[0]!==6&&Y[0]!==2)){D=0;continue}if(Y[0]===3&&(!q||Y[1]>q[0]&&Y[1]<q[3])){D.label=Y[1];break}if(Y[0]===6&&D.label<q[1]){D.label=q[1],q=Y;break}if(q&&D.label<q[2]){D.label=q[2],D.ops.push(Y);break}q[2]&&D.ops.pop(),D.trys.pop();continue}Y=he.call(S,D)}catch(ue){Y=[6,ue],H=0}finally{ee=q=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([ae,te])}}},fe=function(S){var he={anchor:0,cdn:k.g.CDN,customEmoji:{},emojiPath:(S&&S.emojiPath||k.g.CDN)+"/dist/images/emoji",hljs:k.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:k.g.MARKDOWN_OPTIONS,math:k.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:k.g.THEME_OPTIONS};return(0,P.T)(he,S)},ve=function(S,he){var ee=fe(he);return(0,v.G)(ee.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var H=(0,J.X)({autoSpace:ee.markdown.autoSpace,codeBlockPreview:ee.markdown.codeBlockPreview,emojiSite:ee.emojiPath,emojis:ee.customEmoji,fixTermTypo:ee.markdown.fixTermTypo,footnotes:ee.markdown.footnotes,headingAnchor:ee.anchor!==0,inlineMathDigit:ee.math.inlineDigit,lazyLoadImage:ee.lazyLoadImage,linkBase:ee.markdown.linkBase,linkPrefix:ee.markdown.linkPrefix,listStyle:ee.markdown.listStyle,mark:ee.markdown.mark,mathBlockPreview:ee.markdown.mathBlockPreview,paragraphBeginningSpace:ee.markdown.paragraphBeginningSpace,sanitize:ee.markdown.sanitize,toc:ee.markdown.toc});return he!=null&&he.renderers&&H.SetJSRenderers({renderers:{Md2HTML:he.renderers}}),H.SetHeadingID(!0),H.Md2HTML(S)})},ke=function(S,he,ee){return de(void 0,void 0,void 0,function(){var H,q,R;return we(this,function(D){switch(D.label){case 0:return H=fe(ee),[4,ve(he,H)];case 1:if(q=D.sent(),H.transform&&(q=H.transform(q)),S.innerHTML=q,S.classList.add("vditor-reset"),H.i18n)return[3,5];if(["en_US","ja_JP","ko_KR","ru_RU","zh_CN","zh_TW"].includes(H.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return R="vditorI18nScript"+H.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(ae){ae.id!==R&&document.head.removeChild(ae)}),[4,(0,v.G)(H.cdn+"/dist/js/i18n/"+H.lang+".js",R)];case 3:D.sent(),D.label=4;case 4:return[3,6];case 5:window.VditorI18n=H.i18n,D.label=6;case 6:return H.icon?[4,(0,v.G)(H.cdn+"/dist/js/icons/"+H.icon+".js","vditorIconScript")]:[3,8];case 7:D.sent(),D.label=8;case 8:return(0,x.Z)(H.theme.current,H.theme.path),H.anchor===1&&S.classList.add("vditor-reset--anchor"),(0,c.O)(S),(0,m.s)(H.hljs,S,H.cdn),(0,s.H)(S,{cdn:H.cdn,math:H.math}),(0,g.i)(S,H.cdn,H.mode),(0,p.P)(S,H.cdn),(0,d.v)(S,H.cdn),(0,f.p)(S,H.cdn,H.mode),(0,b.P)(S,H.cdn,H.mode),(0,T.B)(S,H.cdn),(0,O.Q)(S,H.cdn),(0,u.Y)(S),H.speech.enable&&ie(S),H.anchor!==0&&(G=H.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(ae){G===1&&ae.classList.add("vditor-anchor--left"),ae.onclick=function(){var te=ae.getAttribute("href").substr(1),Y=document.getElementById("vditorAnchor-"+te).offsetTop;document.querySelector("html").scrollTop=Y}}),window.onhashchange=function(){var ae=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));ae&&(document.querySelector("html").scrollTop=ae.offsetTop)}),H.after&&H.after(),H.lazyLoadImage&&l(S),S.addEventListener("click",function(ae){var te=(0,N.lG)(ae.target,"SPAN");if(te&&(0,N.fb)(te,"vditor-toc")){var Y=S.querySelector("#"+te.getAttribute("data-target-id"));Y&&window.scrollTo(window.scrollX,Y.offsetTop)}}),[2]}var G})})},He=U(863),Ne=U(312);const Le=function(){function S(){}return S.adapterRender=_,S.previewImage=He.E,S.codeRender=c.O,S.graphvizRender=d.v,S.highlightRender=m.s,S.mathRender=s.H,S.mermaidRender=g.i,S.flowchartRender=p.P,S.chartRender=f.p,S.abcRender=O.Q,S.mindmapRender=b.P,S.plantumlRender=T.B,S.outlineRender=C.k,S.mediaRender=u.Y,S.speechRender=ie,S.lazyLoadImageRender=l,S.md2html=ve,S.preview=ke,S.setCodeTheme=Ne.Y,S.setContentTheme=x.Z,S}()})(),Te=Te.default})()})})(Zn);var Gt=qn(Zn.exports);const Ko=Wt({__name:"MarkdownViewer",props:{value:{type:String},class:{type:String}},setup(me){const ge=me,pe=Ke(null),_e=Ke(null),{getDarkMode:U}=zn();function Te(){const _=lt(pe);_e.value=Gt.preview(_,ge.value,{mode:ze(U.value,"content"),theme:{current:ze(U.value,"content")},hljs:{style:ze(U.value,"code")}})}_t(()=>U.value,_=>{Gt.setContentTheme(ze(_,"content")),Gt.setCodeTheme(ze(_,"code")),Te()}),_t(()=>ge.value,(_,f)=>{_!==f&&Te()});function O(){var f;const _=lt(_e);if(!!_){try{(f=_==null?void 0:_.destroy)==null||f.call(_)}catch(c){}_e.value=null}}return Xn(Te),Vn(O),Un(O),(_,f)=>(St(),Wn("div",{ref_key:"viewerRef",ref:pe,id:"markdownViewer",class:Fn(_.$props.class)},null,2))}});Kn(Fo);const Xo=Kn(Ko),Jo=Wt({components:{PageWrapper:Po,Card:Bo,MarkdownViewer:Xo},setup(){const{meta:me,query:ge}=Do(),pe=me.title||"\u6807\u9898\u9519\u8BEF",_e=Ke(""),U=Ke(!1);return Oo(()=>In(this,null,function*(){let Te=me.param||{};U.value=!0;let O=yield zo(Ye(Ye({},Te),ge));_e.value=O.content,U.value=!1})),{prefixCls:"list-card",title:pe,value:_e,loading:U}}});function Zo(me,ge,pe,_e,U,Te){const O=Ut("MarkdownViewer"),_=Ut("Card"),f=Ut("PageWrapper"),c=jo("loading");return St(),Rn(f,{class:Fn(me.prefixCls)},{default:Pn(()=>[Io((St(),Rn(_,null,{default:Pn(()=>[Ro(O,{value:me.value},null,8,["value"])]),_:1})),[[c,me.loading]])]),_:1},8,["class"])}var vi=Gn(Jo,[["render",Zo]]);export{vi as default};
