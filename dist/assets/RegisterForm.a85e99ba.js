var U=Object.defineProperty;var _=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var C=(r,s,a)=>s in r?U(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,S=(r,s)=>{for(var a in s||(s={}))E.call(s,a)&&C(r,a,s[a]);if(_)for(var a of _(s))V.call(s,a)&&C(r,a,s[a]);return r};var F=(r,s,a)=>new Promise((n,f)=>{var w=i=>{try{p(a.next(i))}catch(d){f(d)}},g=i=>{try{p(a.throw(i))}catch(d){f(d)}},p=i=>i.done?n(i.value):Promise.resolve(i.value).then(w,g);p((a=a.apply(r,s)).next())});import{u as D,a as N,L as T,_ as q,b as j}from"./LoginFormTitle.1ea63a45.js";import{a as A,I as h,e as G,w as y,K,i as M,x as $,h as H,m as e,o as J,j as O,q as o,B as u,C as x,t as v,D as I,F as Q,n as W,L as X}from"./index.314cb164.js";import{F as R}from"./index.05a83db7.js";import"./index.d86be4eb.js";import{C as Y}from"./index.b5d67dff.js";import{S as Z}from"./index.1194be5e.js";import{C as ee}from"./index.f58a858b.js";import"./_baseIteratee.fd1a2cd7.js";import"./get.96830a59.js";import"./useSize.7ea8df22.js";const ce=A({__name:"RegisterForm",setup(r){var k;const s=R.Item,a=h.Password,{t:n}=G(),{handleBackLogin:f,getLoginState:w}=D(),g=y(),p=y(!1),i=K(),d=y((k=i.query)==null?void 0:k.parent_id),b=M(),t=$({username:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!0}),{getFormRules:z}=N(t),{validForm:P}=j(g),B=H(()=>e(w)===T.REGISTER);function L(){return F(this,null,function*(){const c=yield P();!c||(c.parent_id=e(d),yield X(S({},c)),yield b.login({password:c.password,username:c.username,mode:"none"}))})}return(c,l)=>e(B)?(J(),O(Q,{key:0},[o(q,{class:"enter-x"}),o(e(R),{class:"p-4 enter-x",model:t,rules:e(z),ref_key:"formRef",ref:g},{default:u(()=>[o(e(s),{name:"username",class:"enter-x"},{default:u(()=>[o(e(h),{class:"fix-auto-fill",size:"large",value:t.username,"onUpdate:value":l[0]||(l[0]=m=>t.username=m),placeholder:e(n)("sys.login.email")},null,8,["value","placeholder"])]),_:1}),o(e(s),{name:"sms",class:"enter-x"},{default:u(()=>[o(e(ee),{size:"large",class:"fix-auto-fill",value:t.sms,"onUpdate:value":l[1]||(l[1]=m=>t.sms=m),placeholder:e(n)("sys.login.smsCode")},null,8,["value","placeholder"])]),_:1}),o(e(s),{name:"password",class:"enter-x"},{default:u(()=>[o(e(Z),{size:"large",value:t.password,"onUpdate:value":l[2]||(l[2]=m=>t.password=m),placeholder:e(n)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),o(e(s),{name:"confirmPassword",class:"enter-x"},{default:u(()=>[o(e(a),{size:"large",visibilityToggle:"",value:t.confirmPassword,"onUpdate:value":l[3]||(l[3]=m=>t.confirmPassword=m),placeholder:e(n)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),o(e(s),{class:"enter-x",name:"policy"},{default:u(()=>[o(e(Y),{checked:t.policy,"onUpdate:checked":l[4]||(l[4]=m=>t.policy=m),size:"small"},{default:u(()=>[x(v(e(n)("sys.login.policy")),1)]),_:1},8,["checked"])]),_:1}),o(e(I),{type:"primary",class:"enter-x",size:"large",block:"",onClick:L,loading:p.value},{default:u(()=>[x(v(e(n)("sys.login.registerButton")),1)]),_:1},8,["loading"]),o(e(I),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(f)},{default:u(()=>[x(v(e(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):W("",!0)}});export{ce as default};
